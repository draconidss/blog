<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Java-é›†åˆå®¹å™¨ | LifeAlsoIsGG&#39;s Blog</title>
    <meta name="generator" content="VuePress 1.7.1">
    <script src="https://cdn.jsdelivr.net/npm/react/umd/react.production.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/react-dom/umd/react-dom.production.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@babel/standalone/babel.min.js"></script>
    <link rel="icon" href="/favicon.ico">
    <link rel="icon" href="/assets/icon/chrome-mask-512.png" type="image/png" sizes="512x512">
    <link rel="icon" href="/assets/icon/chrome-mask-192.png" type="image/png" sizes="192x192">
    <link rel="icon" href="/assets/icon/chrome-512.png" type="image/png" sizes="512x512">
    <link rel="icon" href="/assets/icon/chrome-192.png" type="image/png" sizes="192x192">
    <link rel="manifest" href="/manifest.webmanifest">
    <link rel="apple-touch-icon" href="/assets/icon/apple-icon-152.png">
    <meta name="description" content="We found hope in hopeless place">
    <meta property="og:url" content="/Java/Java-Collections.html">
    <meta property="og:site_name" content="LifeAlsoIsGG's Blog">
    <meta property="og:title" content="Java-é›†åˆå®¹å™¨">
    <meta property="og:type" content="article">
    <meta property="og:locale" content="zh-CN">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image:alt" content="LifeAlsoIsGG's Blog">
    <meta property="article:author" content="LifeAlsoIsGG">
    <meta property="article:tag" content="å­¦ä¹ ç¬”è®°">
    <meta property="article:published_time" content="2020-08-23T20:37:41.000Z">
    <meta name="theme-color" content="#46bd87">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/assets/icon/ms-icon-144.png">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    
    <link rel="preload" href="/assets/css/0.styles.ee34f577.css" as="style"><link rel="preload" href="/assets/js/app.37d24613.js" as="script"><link rel="preload" href="/assets/js/layout-Layout.91119c09.js" as="script"><link rel="preload" href="/assets/js/vendors~layout-Blog~layout-Layout~layout-NotFound.397a85cd.js" as="script"><link rel="preload" href="/assets/js/vendors~layout-Blog~layout-Layout~layout-NotFound~layout-Slide.5d1fa701.js" as="script"><link rel="preload" href="/assets/js/vendors~layout-Blog~layout-Layout.d3f55ab1.js" as="script"><link rel="preload" href="/assets/js/page-Java-é›†åˆå®¹å™¨--b6c81274.adbc525f.js" as="script"><link rel="prefetch" href="/assets/js/100.3c6430c7.js"><link rel="prefetch" href="/assets/js/101.2228a371.js"><link rel="prefetch" href="/assets/js/102.45a4c85a.js"><link rel="prefetch" href="/assets/js/103.974f724e.js"><link rel="prefetch" href="/assets/js/99.79e4dfee.js"><link rel="prefetch" href="/assets/js/layout-Blog.cb4d2db5.js"><link rel="prefetch" href="/assets/js/layout-NotFound.46908cc3.js"><link rel="prefetch" href="/assets/js/layout-Slide.92e5904b.js"><link rel="prefetch" href="/assets/js/page-About--1d45e806.6182a2d6.js"><link rel="prefetch" href="/assets/js/page-Devtoolsçƒ­éƒ¨ç½²SpringBoot--19e65860.2a510b37.js"><link rel="prefetch" href="/assets/js/page-DockerInstallsoftware--49ef6be4.a7d354a1.js"><link rel="prefetch" href="/assets/js/page-Dockerdeployment--45ace4e8.676d8f1b.js"><link rel="prefetch" href="/assets/js/page-Dockerå­¦ä¹ ç›®å½•--4648a5c5.510070c1.js"><link rel="prefetch" href="/assets/js/page-Dockerå­¦ä¹ ç¬”è®°--d4c9269c.c7f87ef5.js"><link rel="prefetch" href="/assets/js/page-EasyExcelå¯¼å…¥å¯¼å‡ºExcel--2429aa46.4c614ce3.js"><link rel="prefetch" href="/assets/js/page-Hadoopä¼ªåˆ†å¸ƒå¼é…ç½®--15e2f806.1cbb0827.js"><link rel="prefetch" href="/assets/js/page-Home--58f04215.bf85371d.js"><link rel="prefetch" href="/assets/js/page-HttpServletrequestä¸HttpServletResponse--3d0c7926.ebce289a.js"><link rel="prefetch" href="/assets/js/page-IDEAåˆå§‹åŒ–SpringBooté¡¹ç›®+é€†å‘å·¥ç¨‹+é…ç½®--4155c966.a05c7365.js"><link rel="prefetch" href="/assets/js/page-IDEAé…ç½®RunDashboard--d1099db4.5e0648bd.js"><link rel="prefetch" href="/assets/js/page-JWTè®¤è¯åŸç†(æ›´æ–°ä¸­)--0aea2374.c11cc315.js"><link rel="prefetch" href="/assets/js/page-Java-ClassLoader--27790a06.3f92b644.js"><link rel="prefetch" href="/assets/js/page-Java-IO--03bf2f8a.97f883c9.js"><link rel="prefetch" href="/assets/js/page-Java-JDK8æ–°ç‰¹æ€§--0c8e1b70.bc666485.js"><link rel="prefetch" href="/assets/js/page-Java-JVM--c660f774.7e497b65.js"><link rel="prefetch" href="/assets/js/page-Java-String--355c4cb4.f97eb6b8.js"><link rel="prefetch" href="/assets/js/page-Java-UMLç±»å›¾--eecaa5a4.0a5165a2.js"><link rel="prefetch" href="/assets/js/page-Java-åå°„--758242c0.8d408875.js"><link rel="prefetch" href="/assets/js/page-Java-åŸºç¡€çŸ¥è¯†ç¬”è®°--ba9e4320.53fdc579.js"><link rel="prefetch" href="/assets/js/page-Java-åŸºç¡€é¢è¯•é¢˜--e85683f4.6607399c.js"><link rel="prefetch" href="/assets/js/page-Java-å¤šçº¿ç¨‹å¹¶å‘--0bb93550.da63d900.js"><link rel="prefetch" href="/assets/js/page-Java-å¸¸ç”¨æ–¹æ³•æ±‡æ€»--0920d226.f307a4ab.js"><link rel="prefetch" href="/assets/js/page-Java-æ—¶é—´å¤„ç†--6004773a.8d04f7d7.js"><link rel="prefetch" href="/assets/js/page-Java-è®¾è®¡æ¨¡å¼--1a0c1365.4a50e8b0.js"><link rel="prefetch" href="/assets/js/page-JavaScripté¢è¯•é¢˜--26935a60.9d21d247.js"><link rel="prefetch" href="/assets/js/page-JavaSwing-è¶…å¸‚ç³»ç»Ÿ--0ce27734.bdaa65e4.js"><link rel="prefetch" href="/assets/js/page-Javawebå¤§å­¦æ´»åŠ¨ç®¡ç†ç³»ç»Ÿ--caa08eb4.ae180620.js"><link rel="prefetch" href="/assets/js/page-Javaå­¦ä¹ ç›®å½•--750e92c5.c5ff7067.js"><link rel="prefetch" href="/assets/js/page-Javaé¢è¯•æ•´ç†--1394b30a.47687979.js"><link rel="prefetch" href="/assets/js/page-Linuxå­¦ä¹ ç›®å½•--db391b6a.4147dc22.js"><link rel="prefetch" href="/assets/js/page-Linuxå¸¸ç”¨å‘½ä»¤--d48f65cc.370d2641.js"><link rel="prefetch" href="/assets/js/page-LinuxæŠ€å·§--ac107af4.d6633c0a.js"><link rel="prefetch" href="/assets/js/page-Lombokä½¿ç”¨--42d53e1a.00c10a8f.js"><link rel="prefetch" href="/assets/js/page-Markdownå¢å¼º--4b95fe64.45b70c80.js"><link rel="prefetch" href="/assets/js/page-Mavenä¸­ä¾èµ–çš„scopeæ€»ç»“--27a93a26.c168bbf3.js"><link rel="prefetch" href="/assets/js/page-MyProject--78e65145.04a3fdd5.js"><link rel="prefetch" href="/assets/js/page-Mybatis-PlusåŸºç¡€ç¬”è®°--554cade8.525394e7.js"><link rel="prefetch" href="/assets/js/page-MybatisåŸºç¡€ç¬”è®°--09597604.7830c7a8.js"><link rel="prefetch" href="/assets/js/page-Mybatisè¯­æ³•ç¬”è®°--7398e168.7dc0f9e7.js"><link rel="prefetch" href="/assets/js/page-Mybatisé€†å‘å·¥ç¨‹Exampleç±»ä½¿ç”¨--71ad982a.40c30895.js"><link rel="prefetch" href="/assets/js/page-Mysqlç†è®ºå­¦ä¹ ç¬”è®°--0c399cb6.846b6160.js"><link rel="prefetch" href="/assets/js/page-Nginx-åŠ¨é™åˆ†ç¦»--1ae9b8d0.81ee7f25.js"><link rel="prefetch" href="/assets/js/page-Nginx-åå‘ä»£ç†--5233292a.8bff88bb.js"><link rel="prefetch" href="/assets/js/page-Nginx-è´Ÿè½½å‡è¡¡--29df1766.d5c5796b.js"><link rel="prefetch" href="/assets/js/page-NginxåŸºç¡€ç¬”è®°å’Œå®‰è£…é…ç½®--92e6aea8.7bf83c3d.js"><link rel="prefetch" href="/assets/js/page-Nginxå­¦ä¹ ç›®å½•--63b6427f.0a3ac06e.js"><link rel="prefetch" href="/assets/js/page-Promiseå¼‚æ­¥è°ƒç”¨--640cbe74.96042f0c.js"><link rel="prefetch" href="/assets/js/page-Rediså®ç°å•ç‚¹ç™»å½•--7b42df90.b31d8992.js"><link rel="prefetch" href="/assets/js/page-Rediså®ç°é«˜å¹¶å‘ç§’æ€ç³»ç»Ÿ--64ce7608.1bd81d91.js"><link rel="prefetch" href="/assets/js/page-Redisç†è®ºå­¦ä¹ ç¬”è®°--1a52f412.4f6ee06b.js"><link rel="prefetch" href="/assets/js/page-Rediséƒ¨ç½²ä¸åŸºæœ¬ä½¿ç”¨--a93cca34.6214454a.js"><link rel="prefetch" href="/assets/js/page-Redisé›†ç¾¤å’Œå“¨å…µ--0d126b66.c8846ffd.js"><link rel="prefetch" href="/assets/js/page-SQLå­¦ä¹ ç¬”è®°--aca945b4.a1516e15.js"><link rel="prefetch" href="/assets/js/page-SpringBootVueé¡¹ç›®æ­å»º(æŒç»­æ›´æ–°)--bfbdf510.d710235c.js"><link rel="prefetch" href="/assets/js/page-SpringBootæ•´åˆSpringSecurity--3b654e46.f7094ad1.js"><link rel="prefetch" href="/assets/js/page-SpringMVCåŸºç¡€ç¬”è®°--1c0305d4.bfe80245.js"><link rel="prefetch" href="/assets/js/page-SpringMVCæ³¨è§£--3507a8c6.c0603c29.js"><link rel="prefetch" href="/assets/js/page-SpringåŸºç¡€ç¬”è®°--2a31cfe6.dcc485fa.js"><link rel="prefetch" href="/assets/js/page-Springå­¦ä¹ ç›®å½•--f0ce3bb6.1376f2e5.js"><link rel="prefetch" href="/assets/js/page-Springé”™è¯¯å‘è®°å½•--d652e24c.5ff412c3.js"><link rel="prefetch" href="/assets/js/page-Swaggerä½¿ç”¨--8ce01834.d6c9c674.js"><link rel="prefetch" href="/assets/js/page-ä¸»è¦åŠŸèƒ½ä¸é…ç½®æ¼”ç¤º--79d4d00a.f7ccb7df.js"><link rel="prefetch" href="/assets/js/page-ä¿®æ”¹Hostä»¥è®¿é—®Github--3b3d36bc.a1a4669c.js"><link rel="prefetch" href="/assets/js/page-å‰ç«¯å­¦ä¹ ç›®å½•--2ec43f45.123920c0.js"><link rel="prefetch" href="/assets/js/page-å¤§ä¸‰ä¸‹å®è®­æœŸæœ«ä½œä¸š--6a0c5a86.4241dcae.js"><link rel="prefetch" href="/assets/js/page-å®éªŒå®¤å‡ºå…¥ç®¡ç†å°ç¨‹åº--10da6510.312394a4.js"><link rel="prefetch" href="/assets/js/page-å¯†ç åŠ å¯†çš„æ–‡ç« --f898c734.74d352a5.js"><link rel="prefetch" href="/assets/js/page-æ•°æ®åº“å­¦ä¹ ç›®å½•--906c7e36.1acec34a.js"><link rel="prefetch" href="/assets/js/page-æ•°æ®ç»“æ„ç®—æ³•åŸºç¡€ç¬”è®°--ae42cccc.a720b86e.js"><link rel="prefetch" href="/assets/js/page-æ•°æ®ç»“æ„ç®—æ³•å­¦ä¹ ç›®å½•--68e3704f.803f16b5.js"><link rel="prefetch" href="/assets/js/page-æ•°æ®ç»“æ„ç®—æ³•é¢˜ç›®åˆé›†--566522b2.fe31c406.js"><link rel="prefetch" href="/assets/js/page-æœåŠ¡å™¨ä¸Šéƒ¨ç½²SpringBoot--b6e3c208.29da9142.js"><link rel="prefetch" href="/assets/js/page-ç”¨xshellè¿æ¥è™šæ‹Ÿæœºä¸­çš„Centos7--17ea1126.33124694.js"><link rel="prefetch" href="/assets/js/page-ç»„ä»¶ç¦ç”¨--2c21e206.074dfa53.js"><link rel="prefetch" href="/assets/js/page-è…¾è®¯äº‘å­¦ä¹ ç¬”è®°--79348f12.ec8007d5.js"><link rel="prefetch" href="/assets/js/page-è®¡ç®—æœºå…¶å®ƒé¢è¯•é¢˜--c2758204.86a79b85.js"><link rel="prefetch" href="/assets/js/page-è®¤è¯†SpringCloud--e6d91cf4.6d43a1f2.js"><link rel="prefetch" href="/assets/js/page-è®¾è®¡æ¨¡å¼ä¹‹J2EEè®¾è®¡æ¨¡å¼--676aec24.07800c77.js"><link rel="prefetch" href="/assets/js/page-è®¾è®¡æ¨¡å¼ä¹‹åˆ›å»ºå‹è®¾è®¡æ¨¡å¼--1acf3366.ee3de6ca.js"><link rel="prefetch" href="/assets/js/page-è®¾è®¡æ¨¡å¼ä¹‹ç»“æ„å‹è®¾è®¡æ¨¡å¼--433dfc46.a79caab9.js"><link rel="prefetch" href="/assets/js/page-è®¾è®¡æ¨¡å¼ä¹‹è¡Œä¸ºå‹è®¾è®¡æ¨¡å¼--f3b0df74.99bc5930.js"><link rel="prefetch" href="/assets/js/page-è®¾è®¡æ¨¡å¼å…­å¤§åŸåˆ™--b4a89a74.aa3171aa.js"><link rel="prefetch" href="/assets/js/page-é¡µé¢é…ç½®--ec9920e4.baa9c591.js"><link rel="prefetch" href="/assets/js/vendors~flowchart.e687b7c5.js"><link rel="prefetch" href="/assets/js/vendors~photo-swipe.7ca15352.js"><link rel="prefetch" href="/assets/js/vendors~reveal.a3b91cc1.js"><link rel="prefetch" href="/assets/js/vendors~valine.7c865f95.js">
    <link rel="stylesheet" href="/assets/css/0.styles.ee34f577.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container has-anchor"><header class="navbar"><button class="sidebar-button"><span class="icon"></span></button> <a href="/" class="home-link router-link-active"><img src="https://cdn.jsdelivr.net/gh/lifealsoisgg/static-blog@gh-pages/logo.png" alt="LifeAlsoIsGG's Blog" class="logo"> <!----> <span class="site-name can-hide">LifeAlsoIsGG's Blog</span></a> <div class="links"><button class="color-button"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="skin-icon"><path d="M224 800c0 9.6 3.2 44.8 6.4 54.4 6.4 48-48 76.8-48 76.8s80 41.6 147.2 0 134.4-134.4
        38.4-195.2c-22.4-12.8-41.6-19.2-57.6-19.2C259.2 716.8 227.2 761.6 224 800zM560 675.2l-32
        51.2c-51.2 51.2-83.2 32-83.2 32 25.6 67.2 0 112-12.8 128 25.6 6.4 51.2 9.6 80 9.6 54.4 0
        102.4-9.6 150.4-32l0 0c3.2 0 3.2-3.2 3.2-3.2 22.4-16 12.8-35.2
        6.4-44.8-9.6-12.8-12.8-25.6-12.8-41.6 0-54.4 60.8-99.2 137.6-99.2 6.4 0 12.8 0 22.4
        0 12.8 0 38.4 9.6 48-25.6 0-3.2 0-3.2 3.2-6.4 0-3.2 3.2-6.4 3.2-6.4 6.4-16 6.4-16 6.4-19.2
        9.6-35.2 16-73.6 16-115.2 0-105.6-41.6-198.4-108.8-268.8C704 396.8 560 675.2 560 675.2zM224
        419.2c0-28.8 22.4-51.2 51.2-51.2 28.8 0 51.2 22.4 51.2 51.2 0 28.8-22.4 51.2-51.2 51.2C246.4
        470.4 224 448 224 419.2zM320 284.8c0-22.4 19.2-41.6 41.6-41.6 22.4 0 41.6 19.2 41.6 41.6 0
        22.4-19.2 41.6-41.6 41.6C339.2 326.4 320 307.2 320 284.8zM457.6 208c0-12.8 12.8-25.6 25.6-25.6
        12.8 0 25.6 12.8 25.6 25.6 0 12.8-12.8 25.6-25.6 25.6C470.4 233.6 457.6 220.8 457.6 208zM128
        505.6C128 592 153.6 672 201.6 736c28.8-60.8 112-60.8 124.8-60.8-16-51.2 16-99.2
        16-99.2l316.8-422.4c-48-19.2-99.2-32-150.4-32C297.6 118.4 128 291.2 128 505.6zM764.8
        86.4c-22.4 19.2-390.4 518.4-390.4 518.4-22.4 28.8-12.8 76.8 22.4 99.2l9.6 6.4c35.2 22.4
        80 12.8 99.2-25.6 0 0 6.4-12.8 9.6-19.2 54.4-105.6 275.2-524.8 288-553.6
        6.4-19.2-3.2-32-19.2-32C777.6 76.8 771.2 80 764.8 86.4z"></path></svg> <div class="color-picker-menu" style="display:none;"><div class="theme-options"><ul class="themecolor-select"><label for="themecolor-select">ä¸»é¢˜è‰²:</label> <li><a href="#" class="default-theme"></a></li> </ul> <div class="darkmode-toggle"><label for="darkmode-toggle" class="desc">ä¸»é¢˜æ¨¡å¼:</label> <div class="darkmode-switch"><div class="item day"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon light-icon"><path d="M512 256a42.667 42.667 0 0042.667-42.667V128a42.667 42.667 0 00-85.334 0v85.333A42.667 42.667 0 00512 256zm384 213.333h-85.333a42.667 42.667 0 000 85.334H896a42.667 42.667 0 000-85.334zM256 512a42.667 42.667 0 00-42.667-42.667H128a42.667 42.667 0 000 85.334h85.333A42.667 42.667 0 00256 512zm9.387-298.667a42.667 42.667 0 00-59.307 62.72l61.44 59.307a42.667 42.667 0 0031.147 11.947 42.667 42.667 0 0030.72-13.227 42.667 42.667 0 000-60.16zm459.946 133.974a42.667 42.667 0 0029.44-11.947l61.44-59.307a42.667 42.667 0 00-57.6-62.72l-61.44 60.587a42.667 42.667 0 000 60.16 42.667 42.667 0 0028.16 13.227zM512 768a42.667 42.667 0 00-42.667 42.667V896a42.667 42.667 0 0085.334 0v-85.333A42.667 42.667 0 00512 768zm244.48-79.36a42.667 42.667 0 00-59.307 61.44l61.44 60.587a42.667 42.667 0 0029.44 11.946 42.667 42.667 0 0030.72-12.8 42.667 42.667 0 000-60.586zm-488.96 0l-61.44 59.307a42.667 42.667 0 000 60.586 42.667 42.667 0 0030.72 12.8 42.667 42.667 0 0028.587-10.666l61.44-59.307a42.667 42.667 0 00-59.307-61.44zM512 341.333A170.667 170.667 0 10682.667 512 170.667 170.667 0 00512 341.333z" fill="currentColor"></path></svg></div> <div class="item auto active"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon auto-icon"><path d="M460.864 539.072H564.8L510.592 376l-49.728 163.072zM872 362.368V149.504H659.648L510.528 0l-149.12 149.504H149.12v212.928L0 511.872l149.12 149.504v212.928h212.352l149.12 149.504 149.12-149.504h212.352V661.376l149.12-149.504L872 362.368zM614.464 693.12l-31.616-90.624H438.272l-31.616 90.624h-85.888l144.576-407.68h90.368l144.576 407.68h-85.824zm0 0" fill="currentColor"></path></svg></div> <div class="item night"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon dark-icon"><path d="M935.539 630.402c-11.43-11.432-28.674-14.739-43.531-8.354-46.734 20.103-96.363 30.297-147.508 30.297-99.59 0-193.221-38.784-263.64-109.203-108.637-108.637-139.61-270.022-78.908-411.148a39.497 39.497 0 00-51.886-51.887c-52.637 22.64-100.017 54.81-140.826 95.616-85.346 85.346-132.346 198.821-132.346 319.52 0 120.7 47.001 234.172 132.347 319.519S408.063 947.11 528.76 947.11c120.7 0 234.172-47.003 319.52-132.351 40.809-40.81 72.978-88.19 95.616-140.826a39.497 39.497 0 00-8.356-43.532z" fill="currentColor"></path></svg></div></div> <!----></div></div></div></button> <div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/category/" class="nav-link"><i class="iconfont icon-note"></i>
  åˆ†ç±»
</a></div><div class="nav-item"><a href="/category/å­¦ä¹ ç¬”è®°/" class="nav-link"><i class="iconfont icon-note"></i>
  å­¦ä¹ ç¬”è®°
</a></div><div class="nav-item"><a href="/timeline/" class="nav-link"><i class="iconfont icon-time"></i>
  æ—¶é—´çº¿
</a></div><div class="nav-item"><a href="/about/" class="nav-link"><i class="iconfont icon-info"></i>
  å…³äº
</a></div><div class="nav-item"><a href="https://photos.lifeisgg.online/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont icon-emoji"></i>
  ç›¸å†Œ
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a rel="noopener noreferrer" href="https://github.com/LifeAlsoIsGG" target="_blank" class="repo-link">
    Github
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <nav class="nav-links"><div class="nav-item"><a href="/category/" class="nav-link"><i class="iconfont icon-note"></i>
  åˆ†ç±»
</a></div><div class="nav-item"><a href="/category/å­¦ä¹ ç¬”è®°/" class="nav-link"><i class="iconfont icon-note"></i>
  å­¦ä¹ ç¬”è®°
</a></div><div class="nav-item"><a href="/timeline/" class="nav-link"><i class="iconfont icon-time"></i>
  æ—¶é—´çº¿
</a></div><div class="nav-item"><a href="/about/" class="nav-link"><i class="iconfont icon-info"></i>
  å…³äº
</a></div><div class="nav-item"><a href="https://photos.lifeisgg.online/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont icon-emoji"></i>
  ç›¸å†Œ
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a rel="noopener noreferrer" href="https://github.com/LifeAlsoIsGG" target="_blank" class="repo-link">
    Github
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading clickable"><i class="iconfont icon-creative"></i> <span>My-Project</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading clickable"><i class="iconfont icon-creative"></i> <span>Javaé¢è¯•æ•´ç†</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading clickable open"><i class="iconfont icon-code"></i> <span>Java</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Java/" aria-current="page" class="sidebar-link">Javaå­¦ä¹ ç›®å½•</a></li><li><a href="/Java/Java-BasicNotes/" class="sidebar-link">Java-åŸºç¡€çŸ¥è¯†ç¬”è®°</a></li><li><a href="/Java/Java-Interview/" class="sidebar-link">Java-åŸºç¡€é¢è¯•é¢˜</a></li><li><a href="/Java/Java-Methods/" class="sidebar-link">Java-å¸¸ç”¨æ–¹æ³•æ±‡æ€»</a></li><li><a href="/Java/Java-Collections/" aria-current="page" class="active sidebar-link">Java-é›†åˆå®¹å™¨</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Java/Java-Collections/#å®¹å™¨æ€»è§ˆ" class="sidebar-link">å®¹å™¨æ€»è§ˆ</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Java/Java-Collections/#å¸¸ç”¨é›†åˆæ–¹æ³•" class="sidebar-link">å¸¸ç”¨é›†åˆæ–¹æ³•</a></li></ul></li><li class="sidebar-sub-header"><a href="/Java/Java-Collections/#_1-list-arraylist" class="sidebar-link">1. List | ArrayList</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Java/Java-Collections/#æ„é€ æ–¹æ³•" class="sidebar-link">æ„é€ æ–¹æ³•</a></li><li class="sidebar-sub-header"><a href="/Java/Java-Collections/#e-get-int-index-è·å–indexä½ç½®çš„å…ƒç´ " class="sidebar-link">E get(int index) ï¼šè·å–indexä½ç½®çš„å…ƒç´ </a></li><li class="sidebar-sub-header"><a href="/Java/Java-Collections/#e-set-int-index-e-element-è®¾ç½®-è¦†ç›–-indexä½ç½®çš„å…ƒç´ " class="sidebar-link">E set(int index, E element)  ï¼šè®¾ç½®ï¼ˆè¦†ç›–ï¼‰indexä½ç½®çš„å…ƒç´ </a></li><li class="sidebar-sub-header"><a href="/Java/Java-Collections/#boolean-add-e-e-æ·»åŠ ä¸€ä¸ªå…ƒç´ åˆ°åˆ—è¡¨å°¾-æ‰©å®¹æœºåˆ¶" class="sidebar-link">boolean add(E e)  ï¼šæ·»åŠ ä¸€ä¸ªå…ƒç´ åˆ°åˆ—è¡¨å°¾/æ‰©å®¹æœºåˆ¶</a></li><li class="sidebar-sub-header"><a href="/Java/Java-Collections/#void-add-int-index-e-element-åœ¨indexå¤„æ”¾ç½®å…ƒç´ " class="sidebar-link">void add(int index, E element) ï¼šåœ¨indexå¤„æ”¾ç½®å…ƒç´ </a></li><li class="sidebar-sub-header"><a href="/Java/Java-Collections/#ensurecapacity-int-mincapacity-è‡ªä¸»æ‰©å¢å®¹é‡" class="sidebar-link">ensureCapacity(int minCapacity)ï¼šè‡ªä¸»æ‰©å¢å®¹é‡</a></li><li class="sidebar-sub-header"><a href="/Java/Java-Collections/#æ•°ç»„å¤åˆ¶-æ‰©å®¹çš„ä¸¤ä¸ªæ–¹æ³•" class="sidebar-link">æ•°ç»„å¤åˆ¶/æ‰©å®¹çš„ä¸¤ä¸ªæ–¹æ³•</a></li><li class="sidebar-sub-header"><a href="/Java/Java-Collections/#boolean-addall-collection-extends-e-c-æ·»åŠ ä¸€ä¸ªé›†åˆé‡Œçš„æ‰€æœ‰å…ƒç´ åˆ°åˆ—è¡¨å°¾" class="sidebar-link">boolean addAll(Collection c) : æ·»åŠ ä¸€ä¸ªé›†åˆé‡Œçš„æ‰€æœ‰å…ƒç´ åˆ°åˆ—è¡¨å°¾</a></li><li class="sidebar-sub-header"><a href="/Java/Java-Collections/#int-indexof-object-o-æŸ¥æ‰¾oå…ƒç´ åœ¨åˆ—è¡¨ç¬¬ä¸€æ¬¡å‡ºç°çš„ä½ç½®" class="sidebar-link">int indexOf(Object o)  ï¼šæŸ¥æ‰¾oå…ƒç´ åœ¨åˆ—è¡¨ç¬¬ä¸€æ¬¡å‡ºç°çš„ä½ç½®</a></li><li class="sidebar-sub-header"><a href="/Java/Java-Collections/#e-remove-int-index-åˆ é™¤indexä½ç½®ä¸Šçš„å…ƒç´ " class="sidebar-link">E remove(int index)  ï¼šåˆ é™¤indexä½ç½®ä¸Šçš„å…ƒç´ </a></li><li class="sidebar-sub-header"><a href="/Java/Java-Collections/#boolean-remove-object-o-åˆ é™¤oå…ƒç´ " class="sidebar-link">boolean remove(Object o)  ï¼šåˆ é™¤oå…ƒç´ </a></li><li class="sidebar-sub-header"><a href="/Java/Java-Collections/#foreach-consumer-super-e-action-éå†åˆ—è¡¨" class="sidebar-link">forEach(Consumer action) ï¼šéå†åˆ—è¡¨</a></li></ul></li><li class="sidebar-sub-header"><a href="/Java/Java-Collections/#_2-list-linkedlist" class="sidebar-link">2. List | LinkedList</a></li><li class="sidebar-sub-header"><a href="/Java/Java-Collections/#_3-list-åŒºåˆ«" class="sidebar-link">3. List | åŒºåˆ«</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Java/Java-Collections/#arraylistä¸listçš„åŒºåˆ«" class="sidebar-link">ArrayListä¸Listçš„åŒºåˆ«</a></li><li class="sidebar-sub-header"><a href="/Java/Java-Collections/#arraylist-ä¸-linkedlist-åŒºåˆ«" class="sidebar-link">Arraylist ä¸ LinkedList åŒºåˆ«?</a></li><li class="sidebar-sub-header"><a href="/Java/Java-Collections/#arraylist-ä¸-vector-åŒºåˆ«å‘¢-ä¸ºä»€ä¹ˆè¦ç”¨arraylistå–ä»£vectorå‘¢" class="sidebar-link">ArrayList ä¸ Vector åŒºåˆ«å‘¢?ä¸ºä»€ä¹ˆè¦â½¤Arraylistå–ä»£Vectorå‘¢ï¼Ÿ</a></li></ul></li><li class="sidebar-sub-header"><a href="/Java/Java-Collections/#_4-set-hashset" class="sidebar-link">4. Set | HashSet</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Java/Java-Collections/#hashsetä¸hashmapåŒºåˆ«" class="sidebar-link">HashSetä¸HashMapåŒºåˆ«</a></li><li class="sidebar-sub-header"><a href="/Java/Java-Collections/#æ„é€ å™¨" class="sidebar-link">æ„é€ å™¨</a></li><li class="sidebar-sub-header"><a href="/Java/Java-Collections/#è°ƒç”¨addæ–¹æ³•-å¦‚ä½•å»é‡" class="sidebar-link">è°ƒç”¨addæ–¹æ³•/å¦‚ä½•å»é‡</a></li><li class="sidebar-sub-header"><a href="/Java/Java-Collections/#è°ƒç”¨removeæ–¹æ³•" class="sidebar-link">è°ƒç”¨removeæ–¹æ³•</a></li><li class="sidebar-sub-header"><a href="/Java/Java-Collections/#è°ƒç”¨clearæ–¹æ³•" class="sidebar-link">è°ƒç”¨clearæ–¹æ³•</a></li><li class="sidebar-sub-header"><a href="/Java/Java-Collections/#è¿­ä»£å™¨éå†" class="sidebar-link">è¿­ä»£å™¨éå†</a></li><li class="sidebar-sub-header"><a href="/Java/Java-Collections/#sizeå¤§å°" class="sidebar-link">sizeå¤§å°</a></li><li class="sidebar-sub-header"><a href="/Java/Java-Collections/#åˆ¤æ–­ç©º" class="sidebar-link">åˆ¤æ–­ç©º</a></li><li class="sidebar-sub-header"><a href="/Java/Java-Collections/#åˆ¤æ–­æ˜¯å¦å­˜åœ¨æŸä¸ªå¯¹è±¡" class="sidebar-link">åˆ¤æ–­æ˜¯å¦å­˜åœ¨æŸä¸ªå¯¹è±¡</a></li></ul></li><li class="sidebar-sub-header"><a href="/Java/Java-Collections/#_5-map-hashmap" class="sidebar-link">5. Map | HashMap</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Java/Java-Collections/#å‚è€ƒ" class="sidebar-link">å‚è€ƒ</a></li><li class="sidebar-sub-header"><a href="/Java/Java-Collections/#å“ˆå¸Œè¡¨-å“ˆå¸Œå†²çª" class="sidebar-link">å“ˆå¸Œè¡¨&amp;å“ˆå¸Œå†²çª</a></li><li class="sidebar-sub-header"><a href="/Java/Java-Collections/#hashmapæ•°æ®ç»“æ„" class="sidebar-link">HashMapæ•°æ®ç»“æ„</a></li><li class="sidebar-sub-header"><a href="/Java/Java-Collections/#hashmapå±æ€§" class="sidebar-link">HashMapå±æ€§</a></li><li class="sidebar-sub-header"><a href="/Java/Java-Collections/#hashmapå¸¸ç”¨å†…éƒ¨ç±»" class="sidebar-link">HashMapå¸¸ç”¨å†…éƒ¨ç±»</a></li><li class="sidebar-sub-header"><a href="/Java/Java-Collections/#æ„é€ æ–¹æ³•-2" class="sidebar-link">æ„é€ æ–¹æ³•</a></li><li class="sidebar-sub-header"><a href="/Java/Java-Collections/#put-æ·»åŠ ä¸€ä¸ªé”®å€¼å¯¹-æ‰©å®¹æœºåˆ¶" class="sidebar-link">put()ï¼šæ·»åŠ ä¸€ä¸ªé”®å€¼å¯¹/æ‰©å®¹æœºåˆ¶</a></li><li class="sidebar-sub-header"><a href="/Java/Java-Collections/#resize-æ‰©å®¹æ“ä½œ" class="sidebar-link">resize()æ‰©å®¹æ“ä½œ</a></li><li class="sidebar-sub-header"><a href="/Java/Java-Collections/#hashmap-çš„â»“åº¦ä¸ºä»€ä¹ˆæ˜¯2çš„å¹‚æ¬¡æ–¹" class="sidebar-link">HashMap çš„â»“åº¦ä¸ºä»€ä¹ˆæ˜¯2çš„å¹‚æ¬¡â½…</a></li><li class="sidebar-sub-header"><a href="/Java/Java-Collections/#jdk1-8ä¸­hashmapå¦‚ä½•åº”å¯¹hashå†²çª" class="sidebar-link">JDK1.8ä¸­HashMapå¦‚ä½•åº”å¯¹hashå†²çªï¼Ÿ</a></li><li class="sidebar-sub-header"><a href="/Java/Java-Collections/#ä¸ºä»€ä¹ˆhashmapçº¿ç¨‹ä¸å®‰å…¨" class="sidebar-link">ä¸ºä»€ä¹ˆHashMapçº¿ç¨‹ä¸å®‰å…¨</a></li><li class="sidebar-sub-header"><a href="/Java/Java-Collections/#ä¸ºä»€ä¹ˆç”¨çº¢é»‘æ ‘ä¸ç”¨avlæ ‘" class="sidebar-link">ä¸ºä»€ä¹ˆç”¨çº¢é»‘æ ‘ä¸ç”¨AVLæ ‘</a></li></ul></li><li class="sidebar-sub-header"><a href="/Java/Java-Collections/#_6-map-linkedhashmap" class="sidebar-link">6. Map | LinkedHashMap</a></li><li class="sidebar-sub-header"><a href="/Java/Java-Collections/#_7-map-concurrenthashmap" class="sidebar-link">7. Map | ConcurrentHashMap</a></li><li class="sidebar-sub-header"><a href="/Java/Java-Collections/#_8-map-åŒºåˆ«" class="sidebar-link">8. Map | åŒºåˆ«</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Java/Java-Collections/#hashmapä¸hashtableåŒºåˆ«" class="sidebar-link">HashMapä¸HashtableåŒºåˆ«</a></li><li class="sidebar-sub-header"><a href="/Java/Java-Collections/#concurrenthashmap-å’Œ-hashtable-çš„åŒºåˆ«" class="sidebar-link">ConcurrentHashMap å’Œ Hashtable çš„åŒºåˆ«</a></li></ul></li></ul></li><li><a href="/Java/Java-Multithreading/" class="sidebar-link">Java-å¤šçº¿ç¨‹å¹¶å‘</a></li><li><a href="/Java/Java-JVM/" class="sidebar-link">Java-JVM</a></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading clickable"><!----> <span>Javaè®¾è®¡æ¨¡å¼</span> <span class="arrow right"></span></p> <!----></section></li><li><a href="/Java/Java-String/" class="sidebar-link">Java-String</a></li><li><a href="/Java/Java-reflection/" class="sidebar-link">Java-åå°„</a></li><li><a href="/Java/Java-IO/" class="sidebar-link">Java-IO</a></li><li><a href="/Java/Java-Date/" class="sidebar-link">Java-æ—¶é—´å¤„ç†</a></li><li><a href="/Java/Java-UML-ClassDiagram/" class="sidebar-link">Java-UMLç±»å›¾</a></li><li><a href="/Java/Java-JDK8/" class="sidebar-link">Java-JDK8æ–°ç‰¹æ€§</a></li><li><a href="/Java/Java-ClassLoader/" class="sidebar-link">Java-ClassLoader</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading clickable"><i class="iconfont icon-creative"></i> <span>æ•°æ®åº“</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading clickable"><i class="iconfont icon-creative"></i> <span>Spring</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading clickable"><i class="iconfont icon-creative"></i> <span>æ•°æ®ç»“æ„&amp;ç®—æ³•</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading clickable"><i class="iconfont icon-creative"></i> <span>Linux</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading clickable"><i class="iconfont icon-creative"></i> <span>Docker</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading clickable"><i class="iconfont icon-creative"></i> <span>Nginx</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading clickable"><i class="iconfont icon-creative"></i> <span>å‰ç«¯</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading clickable"><i class="iconfont icon-creative"></i> <span>Guide</span> <span class="arrow right"></span></p> <!----></section></li><li><a href="/about/" class="sidebar-link"><i class="iconfont icon-info" style="margin-right:0.2em;"></i>About</a></li></ul> </aside> <main class="page"><nav class="breadcrumb"><ul><li><a href="/Java/" class="router-link-active"><!---->
        Javaå­¦ä¹ ç›®å½•
      </a></li><li class="is-active"><a href="/Java/Java-Collections/" aria-current="page" class="router-link-exact-active router-link-active"><!---->
        Java-é›†åˆå®¹å™¨
      </a></li></ul></nav>  <div class="page-title"><h1><!---->
    Java-é›†åˆå®¹å™¨
  </h1> <div class="page-info"><span class="origin">åŸåˆ›ğŸ’¡</span> <span aria-label="ä½œè€…ğŸ–Š" data-balloon-pos="down"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon author-icon"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z" fill="currentColor"></path></svg> <span>LifeAlsoIsGG</span></span><span aria-label="è®¿é—®é‡ğŸ”¢" data-balloon-pos="down" class="visitor-info"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon eye-icon"><path d="M992 512.096c0-5.76-.992-10.592-1.28-11.136-.192-2.88-1.152-8.064-2.08-10.816-.256-.672-.544-1.376-.832-2.08-.48-1.568-1.024-3.104-1.6-4.32C897.664 290.112 707.104 160 512 160c-195.072 0-385.632 130.016-473.76 322.592-1.056 2.112-1.792 4.096-2.272 5.856a55.512 55.512 0 00-.64 1.6c-1.76 5.088-1.792 8.64-1.632 7.744-.832 3.744-1.568 11.168-1.568 11.168-.224 2.272-.224 4.032.032 6.304 0 0 .736 6.464 1.088 7.808.128 1.824.576 4.512 1.12 6.976h-.032c.448 2.08 1.12 4.096 1.984 6.08.48 1.536.992 2.976 1.472 4.032C126.432 733.856 316.992 864 512 864c195.136 0 385.696-130.048 473.216-321.696 1.376-2.496 2.24-4.832 2.848-6.912.256-.608.48-1.184.672-1.728 1.536-4.48 1.856-8.32 1.728-8.32l-.032.032c.608-3.104 1.568-7.744 1.568-13.28zM512 672c-88.224 0-160-71.776-160-160s71.776-160 160-160 160 71.776 160 160-71.776 160-160 160z" fill="currentColor"></path></svg> <span id="/Java/Java-Collections/" data-flag-title="Java-é›†åˆå®¹å™¨" class="leancloud_visitors"><span class="leancloud-visitors-count">...</span></span></span><span aria-label="å†™ä½œæ—¥æœŸğŸ“…" data-balloon-pos="down" class="time-info"><svg viewBox="0 0 1030 1024" xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z" fill="currentColor"></path></svg> <span>2020-08-23 20:37:41</span></span><!----><span aria-label="æ ‡ç­¾ğŸ·" data-balloon-pos="down"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon tag-icon"><path d="M939.902 458.563L910.17 144.567c-1.507-16.272-14.465-29.13-30.737-30.737L565.438 84.098h-.402c-3.215 0-5.726 1.005-7.634 2.913l-470.39 470.39a10.004 10.004 0 000 14.164l365.423 365.424c1.909 1.908 4.42 2.913 7.132 2.913s5.223-1.005 7.132-2.913l470.39-470.39c2.01-2.11 3.014-5.023 2.813-8.036zm-240.067-72.121c-35.458 0-64.286-28.828-64.286-64.286s28.828-64.285 64.286-64.285 64.286 28.828 64.286 64.285-28.829 64.286-64.286 64.286z" fill="currentColor"></path></svg> <ul class="tags-wrapper"><li class="tag clickable tag0"><span role="navigation">å­¦ä¹ ç¬”è®°</span></li><li class="tag clickable tag1"><span role="navigation">Java</span></li><li class="tag clickable tag2"><span role="navigation">Java-é›†åˆå®¹å™¨</span></li></ul></span><span aria-label="é˜…è¯»æ—¶é—´âŒ›" data-balloon-pos="down" class="read-time-info"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon time-icon"><path d="M511.997 70.568c-243.797 0-441.429 197.633-441.429 441.435 0 243.797 197.632 441.429 441.43 441.429S953.431 755.8 953.431 512.002c0-243.796-197.637-441.434-441.435-441.434zm150.158 609.093l-15.605 15.61c-8.621 8.615-22.596 8.615-31.215 0L472.197 552.126c-4.95-4.944-4.34-14.888-4.34-24.677V247.14c0-12.19 9.882-22.07 22.07-22.07h22.07c12.19 0 22.07 9.882 22.07 22.07v273.218l128.088 128.088c8.62 8.62 8.62 22.595 0 31.215zm0 0" fill="currentColor"></path></svg> <span>å¤§çº¦ 41 åˆ†é’Ÿ</span></span></div> <hr></div> <!----> <div class="anchor-place-holder"><aside id="anchor"><div class="anchor-wrapper"><ul class="anchor-list"><li class="anchor anchor2"><a href="/Java/Java-Collections/#å®¹å™¨æ€»è§ˆ" class="anchor-link"><div>å®¹å™¨æ€»è§ˆ</div></a><ul class="anchor-list"><li class="anchor anchor3"><a href="/Java/Java-Collections/#å¸¸ç”¨é›†åˆæ–¹æ³•" class="anchor-link"><div>å¸¸ç”¨é›†åˆæ–¹æ³•</div></a></li></ul></li><li class="anchor anchor2"><a href="/Java/Java-Collections/#_1-list-arraylist" class="anchor-link"><div>1. List | ArrayList</div></a><ul class="anchor-list"><li class="anchor anchor3"><a href="/Java/Java-Collections/#æ„é€ æ–¹æ³•" class="anchor-link"><div>æ„é€ æ–¹æ³•</div></a></li><li class="anchor anchor3"><a href="/Java/Java-Collections/#e-get-int-index-è·å–indexä½ç½®çš„å…ƒç´ " class="anchor-link"><div>E get(int index) ï¼šè·å–indexä½ç½®çš„å…ƒç´ </div></a></li><li class="anchor anchor3"><a href="/Java/Java-Collections/#e-set-int-index-e-element-è®¾ç½®-è¦†ç›–-indexä½ç½®çš„å…ƒç´ " class="anchor-link"><div>E set(int index, E element)  ï¼šè®¾ç½®ï¼ˆè¦†ç›–ï¼‰indexä½ç½®çš„å…ƒç´ </div></a></li><li class="anchor anchor3"><a href="/Java/Java-Collections/#boolean-add-e-e-æ·»åŠ ä¸€ä¸ªå…ƒç´ åˆ°åˆ—è¡¨å°¾-æ‰©å®¹æœºåˆ¶" class="anchor-link"><div>boolean add(E e)  ï¼šæ·»åŠ ä¸€ä¸ªå…ƒç´ åˆ°åˆ—è¡¨å°¾/æ‰©å®¹æœºåˆ¶</div></a></li><li class="anchor anchor3"><a href="/Java/Java-Collections/#void-add-int-index-e-element-åœ¨indexå¤„æ”¾ç½®å…ƒç´ " class="anchor-link"><div>void add(int index, E element) ï¼šåœ¨indexå¤„æ”¾ç½®å…ƒç´ </div></a></li><li class="anchor anchor3"><a href="/Java/Java-Collections/#ensurecapacity-int-mincapacity-è‡ªä¸»æ‰©å¢å®¹é‡" class="anchor-link"><div>ensureCapacity(int minCapacity)ï¼šè‡ªä¸»æ‰©å¢å®¹é‡</div></a></li><li class="anchor anchor3"><a href="/Java/Java-Collections/#æ•°ç»„å¤åˆ¶-æ‰©å®¹çš„ä¸¤ä¸ªæ–¹æ³•" class="anchor-link"><div>æ•°ç»„å¤åˆ¶/æ‰©å®¹çš„ä¸¤ä¸ªæ–¹æ³•</div></a></li><li class="anchor anchor3"><a href="/Java/Java-Collections/#boolean-addall-collection-extends-e-c-æ·»åŠ ä¸€ä¸ªé›†åˆé‡Œçš„æ‰€æœ‰å…ƒç´ åˆ°åˆ—è¡¨å°¾" class="anchor-link"><div>boolean addAll(Collection c) : æ·»åŠ ä¸€ä¸ªé›†åˆé‡Œçš„æ‰€æœ‰å…ƒç´ åˆ°åˆ—è¡¨å°¾</div></a></li><li class="anchor anchor3"><a href="/Java/Java-Collections/#int-indexof-object-o-æŸ¥æ‰¾oå…ƒç´ åœ¨åˆ—è¡¨ç¬¬ä¸€æ¬¡å‡ºç°çš„ä½ç½®" class="anchor-link"><div>int indexOf(Object o)  ï¼šæŸ¥æ‰¾oå…ƒç´ åœ¨åˆ—è¡¨ç¬¬ä¸€æ¬¡å‡ºç°çš„ä½ç½®</div></a></li><li class="anchor anchor3"><a href="/Java/Java-Collections/#e-remove-int-index-åˆ é™¤indexä½ç½®ä¸Šçš„å…ƒç´ " class="anchor-link"><div>E remove(int index)  ï¼šåˆ é™¤indexä½ç½®ä¸Šçš„å…ƒç´ </div></a></li><li class="anchor anchor3"><a href="/Java/Java-Collections/#boolean-remove-object-o-åˆ é™¤oå…ƒç´ " class="anchor-link"><div>boolean remove(Object o)  ï¼šåˆ é™¤oå…ƒç´ </div></a></li><li class="anchor anchor3"><a href="/Java/Java-Collections/#foreach-consumer-super-e-action-éå†åˆ—è¡¨" class="anchor-link"><div>forEach(Consumer action) ï¼šéå†åˆ—è¡¨</div></a></li></ul></li><li class="anchor anchor2"><a href="/Java/Java-Collections/#_2-list-linkedlist" class="anchor-link"><div>2. List | LinkedList</div></a></li><li class="anchor anchor2"><a href="/Java/Java-Collections/#_3-list-åŒºåˆ«" class="anchor-link"><div>3. List | åŒºåˆ«</div></a><ul class="anchor-list"><li class="anchor anchor3"><a href="/Java/Java-Collections/#arraylistä¸listçš„åŒºåˆ«" class="anchor-link"><div>ArrayListä¸Listçš„åŒºåˆ«</div></a></li><li class="anchor anchor3"><a href="/Java/Java-Collections/#arraylist-ä¸-linkedlist-åŒºåˆ«" class="anchor-link"><div>Arraylist ä¸ LinkedList åŒºåˆ«?</div></a></li><li class="anchor anchor3"><a href="/Java/Java-Collections/#arraylist-ä¸-vector-åŒºåˆ«å‘¢-ä¸ºä»€ä¹ˆè¦ç”¨arraylistå–ä»£vectorå‘¢" class="anchor-link"><div>ArrayList ä¸ Vector åŒºåˆ«å‘¢?ä¸ºä»€ä¹ˆè¦â½¤Arraylistå–ä»£Vectorå‘¢ï¼Ÿ</div></a></li></ul></li><li class="anchor anchor2"><a href="/Java/Java-Collections/#_4-set-hashset" class="anchor-link"><div>4. Set | HashSet</div></a><ul class="anchor-list"><li class="anchor anchor3"><a href="/Java/Java-Collections/#hashsetä¸hashmapåŒºåˆ«" class="anchor-link"><div>HashSetä¸HashMapåŒºåˆ«</div></a></li><li class="anchor anchor3"><a href="/Java/Java-Collections/#æ„é€ å™¨" class="anchor-link"><div>æ„é€ å™¨</div></a></li><li class="anchor anchor3"><a href="/Java/Java-Collections/#è°ƒç”¨addæ–¹æ³•-å¦‚ä½•å»é‡" class="anchor-link"><div>è°ƒç”¨addæ–¹æ³•/å¦‚ä½•å»é‡</div></a></li><li class="anchor anchor3"><a href="/Java/Java-Collections/#è°ƒç”¨removeæ–¹æ³•" class="anchor-link"><div>è°ƒç”¨removeæ–¹æ³•</div></a></li><li class="anchor anchor3"><a href="/Java/Java-Collections/#è°ƒç”¨clearæ–¹æ³•" class="anchor-link"><div>è°ƒç”¨clearæ–¹æ³•</div></a></li><li class="anchor anchor3"><a href="/Java/Java-Collections/#è¿­ä»£å™¨éå†" class="anchor-link"><div>è¿­ä»£å™¨éå†</div></a></li><li class="anchor anchor3"><a href="/Java/Java-Collections/#sizeå¤§å°" class="anchor-link"><div>sizeå¤§å°</div></a></li><li class="anchor anchor3"><a href="/Java/Java-Collections/#åˆ¤æ–­ç©º" class="anchor-link"><div>åˆ¤æ–­ç©º</div></a></li><li class="anchor anchor3"><a href="/Java/Java-Collections/#åˆ¤æ–­æ˜¯å¦å­˜åœ¨æŸä¸ªå¯¹è±¡" class="anchor-link"><div>åˆ¤æ–­æ˜¯å¦å­˜åœ¨æŸä¸ªå¯¹è±¡</div></a></li></ul></li><li class="anchor anchor2"><a href="/Java/Java-Collections/#_5-map-hashmap" class="anchor-link"><div>5. Map | HashMap</div></a><ul class="anchor-list"><li class="anchor anchor3"><a href="/Java/Java-Collections/#å‚è€ƒ" class="anchor-link"><div>å‚è€ƒ</div></a></li><li class="anchor anchor3"><a href="/Java/Java-Collections/#å“ˆå¸Œè¡¨-å“ˆå¸Œå†²çª" class="anchor-link"><div>å“ˆå¸Œè¡¨&amp;å“ˆå¸Œå†²çª</div></a></li><li class="anchor anchor3"><a href="/Java/Java-Collections/#hashmapæ•°æ®ç»“æ„" class="anchor-link"><div>HashMapæ•°æ®ç»“æ„</div></a></li><li class="anchor anchor3"><a href="/Java/Java-Collections/#hashmapå±æ€§" class="anchor-link"><div>HashMapå±æ€§</div></a></li><li class="anchor anchor3"><a href="/Java/Java-Collections/#hashmapå¸¸ç”¨å†…éƒ¨ç±»" class="anchor-link"><div>HashMapå¸¸ç”¨å†…éƒ¨ç±»</div></a></li><li class="anchor anchor3"><a href="/Java/Java-Collections/#æ„é€ æ–¹æ³•-2" class="anchor-link"><div>æ„é€ æ–¹æ³•</div></a></li><li class="anchor anchor3"><a href="/Java/Java-Collections/#put-æ·»åŠ ä¸€ä¸ªé”®å€¼å¯¹-æ‰©å®¹æœºåˆ¶" class="anchor-link"><div>put()ï¼šæ·»åŠ ä¸€ä¸ªé”®å€¼å¯¹/æ‰©å®¹æœºåˆ¶</div></a></li><li class="anchor anchor3"><a href="/Java/Java-Collections/#resize-æ‰©å®¹æ“ä½œ" class="anchor-link"><div>resize()æ‰©å®¹æ“ä½œ</div></a></li><li class="anchor anchor3"><a href="/Java/Java-Collections/#hashmap-çš„â»“åº¦ä¸ºä»€ä¹ˆæ˜¯2çš„å¹‚æ¬¡æ–¹" class="anchor-link"><div>HashMap çš„â»“åº¦ä¸ºä»€ä¹ˆæ˜¯2çš„å¹‚æ¬¡â½…</div></a></li><li class="anchor anchor3"><a href="/Java/Java-Collections/#jdk1-8ä¸­hashmapå¦‚ä½•åº”å¯¹hashå†²çª" class="anchor-link"><div>JDK1.8ä¸­HashMapå¦‚ä½•åº”å¯¹hashå†²çªï¼Ÿ</div></a></li><li class="anchor anchor3"><a href="/Java/Java-Collections/#ä¸ºä»€ä¹ˆhashmapçº¿ç¨‹ä¸å®‰å…¨" class="anchor-link"><div>ä¸ºä»€ä¹ˆHashMapçº¿ç¨‹ä¸å®‰å…¨</div></a></li><li class="anchor anchor3"><a href="/Java/Java-Collections/#ä¸ºä»€ä¹ˆç”¨çº¢é»‘æ ‘ä¸ç”¨avlæ ‘" class="anchor-link"><div>ä¸ºä»€ä¹ˆç”¨çº¢é»‘æ ‘ä¸ç”¨AVLæ ‘</div></a></li></ul></li><li class="anchor anchor2"><a href="/Java/Java-Collections/#_6-map-linkedhashmap" class="anchor-link"><div>6. Map | LinkedHashMap</div></a></li><li class="anchor anchor2"><a href="/Java/Java-Collections/#_7-map-concurrenthashmap" class="anchor-link"><div>7. Map | ConcurrentHashMap</div></a></li><li class="anchor anchor2"><a href="/Java/Java-Collections/#_8-map-åŒºåˆ«" class="anchor-link"><div>8. Map | åŒºåˆ«</div></a><ul class="anchor-list"><li class="anchor anchor3"><a href="/Java/Java-Collections/#hashmapä¸hashtableåŒºåˆ«" class="anchor-link"><div>HashMapä¸HashtableåŒºåˆ«</div></a></li><li class="anchor anchor3"><a href="/Java/Java-Collections/#concurrenthashmap-å’Œ-hashtable-çš„åŒºåˆ«" class="anchor-link"><div>ConcurrentHashMap å’Œ Hashtable çš„åŒºåˆ«</div></a></li></ul></li></ul></div></aside></div> <div class="theme-default-content content__default"><h2 id="å®¹å™¨æ€»è§ˆ"><a href="#å®¹å™¨æ€»è§ˆ" class="header-anchor">#</a> å®¹å™¨æ€»è§ˆ</h2> <p>æ³¨</p> <blockquote><ul><li>è™šçº¿ç©ºå¿ƒä¸‰è§’ï¼šç»§æ‰¿ï¼Œä¾‹å¦‚<code>AbstractList</code>ç»§æ‰¿<code>List</code></li> <li>å®çº¿ç©ºå¿ƒä¸‰è§’ï¼šå®ç°ï¼Œä¾‹å¦‚<code>ArrayList</code>å®ç°<code>AbstractList</code></li></ul></blockquote> <blockquote><ul><li>å°è™šçº¿ï¼šæ¥å£</li> <li>é•¿è™šçº¿ï¼šæŠ½è±¡ç±»</li> <li>å®ç°ï¼šå®ç°ç±»</li></ul></blockquote> <p><img src="/assets/img/Java_Collections_diagram_1.c47bf992.jpg" alt="Javaé›†åˆå›¾"></p> <p><img src="/assets/img/Java_Collections_diagram_2.b0723f1c.jpg" alt="Javaé›†åˆå›¾"></p> <p><img src="/assets/img/Java_Collections_Framework_System.d23f9829.png" alt="Javaé›†åˆæ¡†æ¶ä½“ç³»"></p> <p><img src="/assets/img/summary_of_data_structure_of_the_Collections.88ed191a.png" alt="é›†åˆåº•å±‚æ•°æ®ç»“æ„"></p> <p><img src="/assets/img/difference_between_List_Set_and_Map.7c286342.png" alt="List,Set,Mapä¸‰è€…çš„åŒºåˆ«"></p> <h3 id="å¸¸ç”¨é›†åˆæ–¹æ³•"><a href="#å¸¸ç”¨é›†åˆæ–¹æ³•" class="header-anchor">#</a> å¸¸ç”¨é›†åˆæ–¹æ³•</h3> <p>å‚è€ƒ</p> <blockquote><p>https://wiki.lifeisgg.online/archives/Java%E6%96%B9%E6%B3%95%E6%B1%87%E6%80%BB</p></blockquote> <h2 id="_1-list-arraylist"><a href="#_1-list-arraylist" class="header-anchor">#</a> 1. List | ArrayList</h2> <p>å‚è€ƒ</p> <blockquote><p>ArrayListæ–¹æ³•åŸç†ï¼šhttps://www.cnblogs.com/lierabbit/p/8383683.html</p></blockquote> <h3 id="æ„é€ æ–¹æ³•"><a href="#æ„é€ æ–¹æ³•" class="header-anchor">#</a> æ„é€ æ–¹æ³•</h3> <ul><li>æ— å‚æ„é€ æ–¹æ³•</li> <li>æœ‰å‚æ„é€ æ–¹æ³•</li> <li>æŒ‡å®šé›†åˆ</li></ul> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token class-name">ArrayList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">//æ— å‚æ„é€ æ–¹æ³•</span>
<span class="token keyword">public</span> <span class="token class-name">ArrayList</span><span class="token punctuation">(</span><span class="token keyword">int</span> initialCapacity<span class="token punctuation">)</span>ï¼›<span class="token comment">//æœ‰å‚æ„é€ æ–¹æ³•</span>
<span class="token keyword">public</span> <span class="token class-name">ArrayList</span><span class="token punctuation">(</span><span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> c<span class="token punctuation">)</span><span class="token comment">//æŒ‡å®šé›†åˆ</span>
  
<span class="token comment">/**
* é»˜è®¤åˆå§‹å®¹é‡å¤§å°ä¸º10
*/</span>
<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> DEFAULT_CAPACITY <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
    
<span class="token comment">/**é»˜è®¤ç©ºæ•°ç»„*/</span>
<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> DEFAULTCAPACITY_EMPTY_ELEMENTDATA <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p><strong>æ— å‚æ„é€ æ–¹æ³•</strong></p> <p><strong>ä»¥æ— å‚æ•°æ„é€ æ–¹æ³•åˆ›å»º ArrayList æ—¶ï¼Œå®é™…ä¸Šåˆå§‹åŒ–èµ‹å€¼çš„æ˜¯ä¸€ä¸ªç©ºæ•°ç»„ã€‚å½“çœŸæ­£å¯¹æ•°ç»„è¿›è¡Œæ·»åŠ å…ƒç´ æ“ä½œæ—¶ï¼Œæ‰çœŸæ­£åˆ†é…å®¹é‡ã€‚å³å‘æ•°ç»„ä¸­æ·»åŠ ç¬¬ä¸€ä¸ªå…ƒç´ æ—¶ï¼Œæ•°ç»„å®¹é‡æ‰©ä¸º10ã€‚</strong></p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">/**
     * Shared empty array instance used for default sized empty instances. We
     * distinguish this from EMPTY_ELEMENTDATA to know how much to inflate when
     * first element is added.
     */</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> DEFAULTCAPACITY_EMPTY_ELEMENTDATA <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token comment">/**
     * Constructs an empty list with an initial capacity of ten.
     */</span>
    <span class="token keyword">public</span> <span class="token class-name">ArrayList</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>elementData <span class="token operator">=</span> DEFAULTCAPACITY_EMPTY_ELEMENTDATA<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p><strong>æœ‰å‚æŒ‡å®šå¤§å°æ„é€ æ–¹æ³•</strong></p> <ul><li>å½“æŒ‡å®šçš„åˆå§‹å®¹é‡å¤§äº0ï¼Œåˆå§‹åŒ–æŒ‡å®šå¤§å°çš„æ•°ç»„</li> <li>å½“æŒ‡å®šçš„åˆå§‹å®¹é‡ç­‰äº0ï¼Œåˆå§‹åŒ–ç©ºæ•°ç»„</li> <li>å½“æŒ‡å®šçš„åˆå§‹å®¹é‡å°äº0ï¼ŒæŠ›å‡ºIllegalArgumentExceptionå¼‚å¸¸</li></ul> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">/**
     * Shared empty array instance used for empty instances.
     */</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> EMPTY_ELEMENTDATA <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token comment">/**
     * Constructs an empty list with the specified initial capacity.
     *
     * @param  initialCapacity  the initial capacity of the list
     * @throws IllegalArgumentException if the specified initial capacity
     *         is negative
     */</span>


    <span class="token keyword">public</span> <span class="token class-name">ArrayList</span><span class="token punctuation">(</span><span class="token keyword">int</span> initialCapacity<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>initialCapacity <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>elementData <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">[</span>initialCapacity<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>initialCapacity <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>elementData <span class="token operator">=</span> EMPTY_ELEMENTDATA<span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">IllegalArgumentException</span><span class="token punctuation">(</span><span class="token string">&quot;Illegal Capacity: &quot;</span><span class="token operator">+</span>
                                               initialCapacity<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><p><strong>æŒ‡å®šé›†åˆ</strong></p> <p>å½“æŒ‡å®šé›†åˆä¸ä¸ºç©ºå³é•¿åº¦ä¸ä¸º0ï¼Œåˆ™å¤åˆ¶è¯¥é›†åˆï¼Œå¦åˆ™åˆå§‹åŒ–ä¸€ä¸ªç©ºæ•°ç»„</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">/**
     * Constructs a list containing the elements of the specified
     * collection, in the order they are returned by the collection's
     * iterator.
     *
     * @param c the collection whose elements are to be placed into this list
     * @throws NullPointerException if the specified collection is null
     */</span>
    <span class="token keyword">public</span> <span class="token class-name">ArrayList</span><span class="token punctuation">(</span><span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> c<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        elementData <span class="token operator">=</span> c<span class="token punctuation">.</span><span class="token function">toArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>size <span class="token operator">=</span> elementData<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// c.toArray might (incorrectly) not return Object[] (see 6260652)</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>elementData<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
                elementData <span class="token operator">=</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">copyOf</span><span class="token punctuation">(</span>elementData<span class="token punctuation">,</span> size<span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token comment">// replace with empty array.</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>elementData <span class="token operator">=</span> EMPTY_ELEMENTDATA<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h3 id="e-get-int-index-è·å–indexä½ç½®çš„å…ƒç´ "><a href="#e-get-int-index-è·å–indexä½ç½®çš„å…ƒç´ " class="header-anchor">#</a> E get(int index) ï¼šè·å–indexä½ç½®çš„å…ƒç´ </h3> <p>é¦–å…ˆåˆ¤æ–­indexæ˜¯å¦è¶Šç•Œï¼Œè¿™é‡Œå¹¶æ²¡æœ‰åˆ¤æ–­æ˜¯å¦å°äº0ï¼Œå› ä¸ºä¸‹æ ‡å°äº0æ—¶æ•°ç»„ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚è¶Šç•Œåˆ™æŠ›å‡ºIndexOutOfBoundsExceptionå¼‚å¸¸ï¼Œåä¹‹è¿”å›æ•°ç»„å¯¹åº”indexä½ç½®çš„å…ƒç´ </p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// Positional Access Operations</span>
    <span class="token comment">// è¿”å›indexä¸‹æ ‡çš„å…ƒç´ ä¸”å¼ºåˆ¶è½¬åŒ–ä¸ºEï¼ˆList&lt;E&gt;ä¸­çš„Eï¼‰ç±»å‹</span>
    <span class="token annotation punctuation">@SuppressWarnings</span><span class="token punctuation">(</span><span class="token string">&quot;unchecked&quot;</span><span class="token punctuation">)</span>
    <span class="token class-name">E</span> <span class="token function">elementData</span><span class="token punctuation">(</span><span class="token keyword">int</span> index<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token class-name">E</span><span class="token punctuation">)</span> elementData<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * Returns the element at the specified position in this list.
     *
     * @param  index index of the element to return
     * @return the element at the specified position in this list
     * @throws IndexOutOfBoundsException {@inheritDoc}
     */</span>
    <span class="token keyword">public</span> <span class="token class-name">E</span> <span class="token function">get</span><span class="token punctuation">(</span><span class="token keyword">int</span> index<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// æ£€æŸ¥indexæ˜¯å¦è¶Šç•Œ</span>
        <span class="token function">rangeCheck</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// è¿”å›indexä¸‹æ ‡çš„å…ƒç´ </span>
        <span class="token keyword">return</span> <span class="token function">elementData</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * Checks if the given index is in range.  If not, throws an appropriate
     * runtime exception.  This method does *not* check if the index is
     * negative: It is always used immediately prior to an array access,
     * which throws an ArrayIndexOutOfBoundsException if index is negative.
     */</span>
    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">rangeCheck</span><span class="token punctuation">(</span><span class="token keyword">int</span> index<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// æ£€æŸ¥indexæ˜¯å¦å¤§äºç­‰äºsizeï¼ˆæ•°ç»„çš„å…ƒç´ æ•°é‡ï¼‰ï¼Œå› ä¸ºæ•°ç»„ä¸‹æ ‡ä»0å¼€å§‹è®¡ç®—ï¼Œæ‰€ä»¥ä¹Ÿä¸èƒ½ç­‰äºå…ƒç´ æ•°é‡</span>
        <span class="token comment">// è¿™é‡Œæ²¡æœ‰æ£€æŸ¥index &lt; 0çš„æƒ…å†µï¼Œå› ä¸ºindex &lt; 0æ—¶æ•°ç»„ä¼šè‡ªåŠ¨æŠ›å‡ºå¼‚å¸¸ï¼Œæ‰€ä»¥å¹¶æœªæ£€æŸ¥index&lt;0çš„æƒ…å†µ</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">&gt;=</span> size<span class="token punctuation">)</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">IndexOutOfBoundsException</span><span class="token punctuation">(</span><span class="token function">outOfBoundsMsg</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * Constructs an IndexOutOfBoundsException detail message.
     * Of the many possible refactorings of the error handling code,
     * this &quot;outlining&quot; performs best with both server and client VMs.
     */</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> <span class="token function">outOfBoundsMsg</span><span class="token punctuation">(</span><span class="token keyword">int</span> index<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;Index: &quot;</span><span class="token operator">+</span>index<span class="token operator">+</span><span class="token string">&quot;, Size: &quot;</span><span class="token operator">+</span>size<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br></div></div><h3 id="e-set-int-index-e-element-è®¾ç½®-è¦†ç›–-indexä½ç½®çš„å…ƒç´ "><a href="#e-set-int-index-e-element-è®¾ç½®-è¦†ç›–-indexä½ç½®çš„å…ƒç´ " class="header-anchor">#</a> E set(int index, E element)  ï¼šè®¾ç½®ï¼ˆè¦†ç›–ï¼‰indexä½ç½®çš„å…ƒç´ </h3> <p>å’Œgetä¸€æ ·å…ˆåˆ¤æ–­indexï¼ˆä¸‹æ ‡ï¼‰æ˜¯å¦è¶Šç•Œï¼Œä¸è¶Šç•Œåˆ™å…ˆè·å–åŸæ¥indexä½ç½®ä¸Šçš„å…ƒç´ ï¼Œæ¥ç€è®¾ç½®ï¼ˆè¦†ç›–ï¼‰indexä½ç½®ä¸Šçš„å…ƒç´ ï¼Œç„¶åè¿”å›åŸæ¥çš„å…ƒç´ ï¼Œåä¹‹æŠ›å‡ºIndexOutOfBoundsExceptionå¼‚å¸¸</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">/**
     * Replaces the element at the specified position in this list with
     * the specified element.
     *
     * @param index index of the element to replace
     * @param element element to be stored at the specified position
     * @return the element previously at the specified position
     * @throws IndexOutOfBoundsException {@inheritDoc}
     */</span>
    <span class="token keyword">public</span> <span class="token class-name">E</span> <span class="token function">set</span><span class="token punctuation">(</span><span class="token keyword">int</span> index<span class="token punctuation">,</span> <span class="token class-name">E</span> element<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">rangeCheck</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">E</span> oldValue <span class="token operator">=</span> <span class="token function">elementData</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span>
        elementData<span class="token punctuation">[</span>index<span class="token punctuation">]</span> <span class="token operator">=</span> element<span class="token punctuation">;</span>
        <span class="token keyword">return</span> oldValue<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h3 id="boolean-add-e-e-æ·»åŠ ä¸€ä¸ªå…ƒç´ åˆ°åˆ—è¡¨å°¾-æ‰©å®¹æœºåˆ¶"><a href="#boolean-add-e-e-æ·»åŠ ä¸€ä¸ªå…ƒç´ åˆ°åˆ—è¡¨å°¾-æ‰©å®¹æœºåˆ¶" class="header-anchor">#</a> boolean add(E e)  ï¼šæ·»åŠ ä¸€ä¸ªå…ƒç´ åˆ°åˆ—è¡¨å°¾/æ‰©å®¹æœºåˆ¶</h3> <p><strong>å‚è€ƒ</strong></p> <blockquote><ul><li>https://www.cnblogs.com/dengrongzhang/p/9371551.html</li> <li>https://blog.csdn.net/zymx14/article/details/78324464</li> <li>https://github.com/Snailclimb/JavaGuide/blob/master/docs/java/collection/ArrayList-Grow.md</li></ul></blockquote> <p>æ·»åŠ ä¸€ä¸ªå…ƒç´ åˆ°åˆ—è¡¨å°¾ï¼Œå½“åˆ—è¡¨å®¹é‡ä¸è¶³æ—¶è‡ªåŠ¨æ‰©å®¹ï¼ˆé€šå¸¸æ˜¯æ‰©å®¹è‡³åŸæ¥çš„1.5å€ï¼‰ï¼Œæ·»åŠ æˆåŠŸè¿”å›true ã€‚å¦‚æœæ˜¯æ–°åˆ›å»ºçš„å¯¹è±¡ä¸”è°ƒç”¨çš„æ— å‚æ„é€ æ–¹æ³•ï¼Œåˆå§‹åŒ–æ—¶æ˜¯å°†ç©ºæ•°ç»„<code>DEFAULTCAPACITY_EMPTY_ELEMENTDATA</code>èµ‹ç»™elementDataï¼Œåœ¨ç¬¬ä¸€æ¬¡è°ƒç”¨addæ–¹æ³•æ—¶æ‰ä¼šæ‰©å®¹ï¼Œä¸€èˆ¬æ˜¯é»˜è®¤å€¼<code>DEFAULT_CAPACITY = 10</code></p> <h4 id="æµç¨‹"><a href="#æµç¨‹" class="header-anchor">#</a> æµç¨‹</h4> <ul><li>ç¬¬ä¸€æ­¥ï¼šè°ƒç”¨<code>ensureCapacityInternal(size + 1)</code>æ–¹æ³•</li> <li>ç¬¬äºŒæ­¥ï¼šè°ƒç”¨ <code>calculateCapacity(elementData, minCapacity)</code> æ–¹æ³•è®¡ç®—è¿”å›éœ€è¦æ‰©å®¹çš„æœ€å°å€¼</li> <li>ç¬¬ä¸‰æ­¥ï¼šè°ƒç”¨<code>ensureExplicitCapacity()</code>æ–¹æ³•åˆ¤æ–­æ‰©å®¹çš„æœ€å°å€¼æ˜¯å¦å¤§äºæ•°ç»„çš„é•¿åº¦ï¼Œæ­¤æ—¶<code>minCapacity</code>ä¸ºè°ƒç”¨<code>calculateCapacity</code>ä¼ è¿‡æ¥çš„æœ€åè®¡ç®—å¾—å‡ºçš„æœ€å°å®¹é‡ã€‚å¤§äºåˆ™ç»§ç»­è°ƒç”¨**grow(minCapacity)**æ–¹æ³•ï¼Œå¦åˆ™ç›´æ¥ <code>elementData[size++] = e</code>;</li> <li>ç¬¬å››æ­¥ï¼šè°ƒç”¨<code>grow()</code>æ–¹æ³•è¿›è¡Œæ‰©å®¹ã€‚å…ˆ<code>newCapacity = oldCapacity + (oldCapacity &gt;&gt; 1)</code>;è®¡ç®—æ‰©å®¹<code>1.5å€</code>åå†ä¸<code>minCapacity</code>å¯¹æ¯”ï¼Œå¦‚æœè¿˜æ˜¯æ¯”<code>minCapacity</code>å°å°±ç›´æ¥<code>newCapacity = minCapacity</code>; ä¹‹åå†å°†<code>newCapacity</code>ä¸<code>MAX_ARRAY_SIZE</code>å¯¹æ¯”ï¼Œå¦‚æœæ¯”<code>MAX_ARRAY_SIZE</code>å¤§é‚£å°±è°ƒç”¨<code>hugeCapacity(minCapacity)</code>;é‡æ–°è®¡ç®—å¤§å°ï¼Œæœ€å<code>elementData = Arrays.copyOf(elementData, newCapacity)</code>;å®Œæˆæ‰©å®¹ï¼Œæœ€åå†å°†åŠ çš„å¯¹è±¡èµ‹å€¼ç»™<code>elementData[size] , size++</code></li></ul> <h4 id="ç¬¬ä¸€æ­¥-è°ƒç”¨ensurecapacityinternal-size-1-æ–¹æ³•"><a href="#ç¬¬ä¸€æ­¥-è°ƒç”¨ensurecapacityinternal-size-1-æ–¹æ³•" class="header-anchor">#</a> ç¬¬ä¸€æ­¥ï¼šè°ƒç”¨<code>ensureCapacityInternal(size + 1)</code>æ–¹æ³•</h4> <p><code>minCapacity = size + 1</code>å³ä¸ºæ‰€éœ€æœ€å°å®¹é‡ï¼Œè°ƒç”¨æ­¤æ–¹æ³•æ—¶ä¼šå…ˆè°ƒç”¨<code>calculateCapacity(elementData, minCapacity)</code>å»è®¡ç®—æ‰€éœ€æœ€å°å®¹é‡ï¼Œä¹‹åä½œä¸ºå‚æ•°å»è°ƒç”¨<code>ensureExplicitCapacity</code>å»ä¸å½“å‰elementdataæ•°ç»„çš„é•¿åº¦<code>elementdata.length</code>æ¯”è¾ƒçœ‹æ˜¯å¦éœ€è¦è°ƒç”¨<code>grow()</code>å»æ‰©å®¹ã€‚</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">/**
     * Appends the specified element to the end of this list.
     *
     * @param e element to be appended to this list
     * @return &lt;tt&gt;true&lt;/tt&gt; (as specified by {@link Collection#add})
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">E</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// æ£€æŸ¥å½“å‰å®¹é‡æ˜¯å¦è¿˜å¯ä»¥å®¹çº³ä¸€ä¸ªå…ƒç´ ï¼Œä¸å¤Ÿåˆ™æ‰©å®¹</span>
        <span class="token function">ensureCapacityInternal</span><span class="token punctuation">(</span>size <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// Increments modCount!!</span>
        <span class="token comment">// æ·»åŠ åˆ°æ•°ç»„æœ«å°¾</span>
        <span class="token comment">// è¿™ä¸ªè¯­å¥å¯ä»¥åˆ†è§£ä¸º</span>
        <span class="token comment">// elementData[size] = e;</span>
        <span class="token comment">// size += 1;</span>
        elementData<span class="token punctuation">[</span>size<span class="token operator">++</span><span class="token punctuation">]</span> <span class="token operator">=</span> e<span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

		<span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">ensureCapacityInternal</span><span class="token punctuation">(</span><span class="token keyword">int</span> minCapacity<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">ensureExplicitCapacity</span><span class="token punctuation">(</span><span class="token function">calculateCapacity</span><span class="token punctuation">(</span>elementData<span class="token punctuation">,</span> minCapacity<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><blockquote><p><strong>æ³¨æ„</strong> ï¼šJDK11 ç§»é™¤äº† <code>ensureCapacityInternal()</code> å’Œ <code>ensureExplicitCapacity()</code> æ–¹æ³•</p></blockquote> <h4 id="ç¬¬äºŒæ­¥-è°ƒç”¨-calculatecapacity-elementdata-mincapacity-æ–¹æ³•"><a href="#ç¬¬äºŒæ­¥-è°ƒç”¨-calculatecapacity-elementdata-mincapacity-æ–¹æ³•" class="header-anchor">#</a> ç¬¬äºŒæ­¥ï¼šè°ƒç”¨ <code>calculateCapacity(elementData, minCapacity)</code> æ–¹æ³•</h4> <p>è®¡ç®—é»˜è®¤å®¹é‡<code>DEFAULT_CAPACITY = 10</code>å’Œå½“å‰<code>minCapacity = size + 1</code>çš„æœ€å¤§å€¼ã€‚å½“ è¦ add è¿›ç¬¬1ä¸ªå…ƒç´ æ—¶ï¼ŒminCapacityä¸º1ï¼Œåœ¨Math.max()æ–¹æ³•æ¯”è¾ƒåï¼ŒminCapacity ä¸º10ã€‚</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>

    <span class="token comment">/**
     * Default initial capacity.
     */</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> DEFAULT_CAPACITY <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>  <span class="token comment">// é»˜è®¤å®¹é‡ä¸º10</span>

 <span class="token comment">// å¦‚æœæ•°æ®ç­‰äºé»˜è®¤æ•°æ®ï¼Œè¿”å›é»˜è®¤å®¹é‡å’ŒminCapacityï¼ˆæ‰€éœ€å®¹é‡æœ€å°å€¼ï¼‰çš„æœ€å¤§å€¼ï¼Œåä¹‹è¿”å›æ‰€éœ€å®¹é‡æœ€å°å€¼</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">calculateCapacity</span><span class="token punctuation">(</span><span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> elementData<span class="token punctuation">,</span> <span class="token keyword">int</span> minCapacity<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>elementData <span class="token operator">==</span> DEFAULTCAPACITY_EMPTY_ELEMENTDATA<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>DEFAULT_CAPACITY<span class="token punctuation">,</span> minCapacity<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> minCapacity<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>


    <span class="token comment">/**
     * The maximum size of array to allocate.
     * Some VMs reserve some header words in an array.
     * Attempts to allocate larger arrays may result in
     * OutOfMemoryError: Requested array size exceeds VM limit
     */</span>
   

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><h4 id="ç¬¬ä¸‰æ­¥-è°ƒç”¨ensureexplicitcapacity-æ–¹æ³•çœ‹æ˜¯å¦éœ€è¦æ‰©å®¹"><a href="#ç¬¬ä¸‰æ­¥-è°ƒç”¨ensureexplicitcapacity-æ–¹æ³•çœ‹æ˜¯å¦éœ€è¦æ‰©å®¹" class="header-anchor">#</a> ç¬¬ä¸‰æ­¥ï¼šè°ƒç”¨<code>ensureExplicitCapacity()</code>æ–¹æ³•çœ‹æ˜¯å¦éœ€è¦æ‰©å®¹</h4> <ul><li>å½“æˆ‘ä»¬è¦ add è¿›ç¬¬1ä¸ªå…ƒç´ åˆ° ArrayList æ—¶ï¼Œ<code>elementData.length</code> ä¸º0 ï¼ˆå› ä¸ºè¿˜æ˜¯ä¸€ä¸ªç©ºçš„ listï¼‰ï¼Œå› ä¸ºæ‰§è¡Œäº† <code>ensureCapacityInternal()</code> æ–¹æ³• ï¼Œæ‰€ä»¥ minCapacity æ­¤æ—¶ä¸º10ã€‚æ­¤æ—¶ï¼Œ<code>minCapacity - elementData.length &gt; 0</code>æˆç«‹ï¼Œæ‰€ä»¥ä¼šè¿›å…¥ <code>grow(minCapacityä¸º10)</code> æ–¹æ³•ã€‚</li> <li>å½“addç¬¬2ä¸ªå…ƒç´ æ—¶ï¼Œ<code>minCapacity</code> ä¸º2ï¼Œæ­¤æ—¶<code>elementData.length</code>(å®¹é‡)åœ¨æ·»åŠ ç¬¬ä¸€ä¸ªå…ƒç´ åæ‰©å®¹æˆ 10 äº†ã€‚æ­¤æ—¶ï¼Œ<code>minCapacity - elementData.length &gt; 0</code>ä¸æˆç«‹ï¼Œæ‰€ä»¥ä¸ä¼šè¿›å…¥ ï¼ˆæ‰§è¡Œï¼‰<code>grow(minCapacity)</code> æ–¹æ³•ã€‚</li> <li>æ·»åŠ ç¬¬3ã€4Â·Â·Â·åˆ°ç¬¬10ä¸ªå…ƒç´ æ—¶ï¼Œä¾ç„¶ä¸ä¼šæ‰§è¡Œgrowæ–¹æ³•ï¼Œæ•°ç»„å®¹é‡éƒ½ä¸º10ã€‚ç›´åˆ°æ·»åŠ ç¬¬11ä¸ªå…ƒç´ ï¼Œ<code>minCapacity(ä¸º11)</code>æ¯”<code>elementData.lengthï¼ˆä¸º10ï¼‰</code>è¦å¤§ã€‚è¿›å…¥<code>grow(minCapacityä¸º11)</code>æ–¹æ³•è¿›è¡Œæ‰©å®¹</li></ul> <div class="language-java line-numbers-mode"><pre class="language-java"><code>    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">ensureExplicitCapacity</span><span class="token punctuation">(</span><span class="token keyword">int</span> minCapacity<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        modCount<span class="token operator">++</span><span class="token punctuation">;</span>  <span class="token comment">// æ“ä½œæ•°+1</span>

        <span class="token comment">// overflow-conscious code</span>
        <span class="token comment">// å¦‚æœæ‰€éœ€å®¹é‡æœ€å°å€¼å¤§äºå®é™…æ•°ç»„çš„é•¿åº¦å°±æ‰©å¤§å®é™…æ•°ç»„å®¹é‡</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>minCapacity <span class="token operator">-</span> elementData<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
            <span class="token function">grow</span><span class="token punctuation">(</span>minCapacity<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h4 id="ç¬¬å››æ­¥-è°ƒç”¨grow-æ–¹æ³•è¿›è¡Œæ‰©å®¹"><a href="#ç¬¬å››æ­¥-è°ƒç”¨grow-æ–¹æ³•è¿›è¡Œæ‰©å®¹" class="header-anchor">#</a> ç¬¬å››æ­¥ï¼šè°ƒç”¨<code>grow()</code>æ–¹æ³•è¿›è¡Œæ‰©å®¹</h4> <ul><li>å½“addç¬¬1ä¸ªå…ƒç´ æ—¶ï¼ŒoldCapacity ä¸º0ï¼Œç»æ¯”è¾ƒåç¬¬ä¸€ä¸ªifåˆ¤æ–­æˆç«‹ï¼ŒnewCapacity = minCapacity(ä¸º10)ã€‚ä½†æ˜¯ç¬¬äºŒä¸ªifåˆ¤æ–­ä¸ä¼šæˆç«‹ï¼Œå³newCapacity ä¸æ¯” MAX_ARRAY_SIZEå¤§ï¼Œåˆ™ä¸ä¼šè¿›å…¥ <code>hugeCapacity</code> æ–¹æ³•ã€‚æ•°ç»„å®¹é‡ä¸º10ï¼Œaddæ–¹æ³•ä¸­ return true,sizeå¢ä¸º1ã€‚</li> <li>å½“addç¬¬11ä¸ªå…ƒç´ è¿›å…¥growæ–¹æ³•æ—¶ï¼ŒnewCapacityä¸º15ï¼Œæ¯”minCapacityï¼ˆä¸º11ï¼‰å¤§ï¼Œç¬¬ä¸€ä¸ªifåˆ¤æ–­ä¸æˆç«‹ã€‚æ–°å®¹é‡æ²¡æœ‰å¤§äºæ•°ç»„æœ€å¤§sizeï¼Œä¸ä¼šè¿›å…¥hugeCapacityæ–¹æ³•ã€‚æ•°ç»„å®¹é‡æ‰©ä¸º15ï¼Œaddæ–¹æ³•ä¸­return true,sizeå¢ä¸º11ã€‚</li> <li>ä»¥æ­¤ç±»æ¨Â·Â·Â·Â·Â·Â·</li></ul> <p>ä¹‹æ‰€ä»¥æ¯æ¬¡æ‰©å®¹åŸæ¥çš„<code>1.5å€</code>ï¼Œæ˜¯ä¸ºäº†ä¸è®©æ¯æ¬¡è°ƒç”¨<code>add()</code>æ–¹æ³•éƒ½å»æ‰©å®¹ç„¶åå¤åˆ¶æ•°ç»„</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>
    <span class="token comment">/**
     * Increases the capacity to ensure that it can hold at least the
     * number of elements specified by the minimum capacity argument.
     *
     * @param minCapacity the desired minimum capacity
     */</span>
    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">grow</span><span class="token punctuation">(</span><span class="token keyword">int</span> minCapacity<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// overflow-conscious code</span>
        <span class="token keyword">int</span> oldCapacity <span class="token operator">=</span> elementData<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
        <span class="token comment">// æ–°çš„å®¹é‡ä¸ºæ—§çš„å®¹é‡çš„1.5å€</span>
        <span class="token keyword">int</span> newCapacity <span class="token operator">=</span> oldCapacity <span class="token operator">+</span> <span class="token punctuation">(</span>oldCapacity <span class="token operator">&gt;&gt;</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// å¦‚æœæ‰©å……å®¹é‡åè¿˜æ˜¯ä¸å¤Ÿï¼Œåˆ™æ–°çš„å®¹é‡ç­‰äºæ‰€éœ€å®¹é‡æœ€å°å€¼ï¼ˆä¸€èˆ¬å°±æ˜¯æ•°ç»„å®é™…å…ƒç´ ä¸ªæ•°ï¼‰</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>newCapacity <span class="token operator">-</span> minCapacity <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
            newCapacity <span class="token operator">=</span> minCapacity<span class="token punctuation">;</span>
        <span class="token comment">// å¦‚æœæ–°çš„å®¹é‡å¤§äºæ•°ç»„æœ€å¤§å®¹é‡ï¼Œå†è°ƒç”¨hugeCapacityè®¡ç®—æ–°çš„å®¹é‡</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>newCapacity <span class="token operator">-</span> MAX_ARRAY_SIZE <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
            newCapacity <span class="token operator">=</span> <span class="token function">hugeCapacity</span><span class="token punctuation">(</span>minCapacity<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// minCapacity is usually close to size, so this is a win:</span>
        <span class="token comment">// å¤åˆ¶åŸæ¥çš„æ•°æ®åˆ°æ–°çš„æ•°ç»„ï¼Œæ•°ç»„å®¹é‡ä¸ºæ–°çš„å®¹é‡</span>
        elementData <span class="token operator">=</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">copyOf</span><span class="token punctuation">(</span>elementData<span class="token punctuation">,</span> newCapacity<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">hugeCapacity</span><span class="token punctuation">(</span><span class="token keyword">int</span> minCapacity<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>minCapacity <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token comment">// overflow</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">OutOfMemoryError</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// å¤§äºæ•°ç»„æœ€å¤§å®¹é‡è¿”å›Integeræœ€å¤§å€¼ï¼Œåä¹‹è¿”å›æ•°ç»„æœ€å¤§å®¹é‡</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>minCapacity <span class="token operator">&gt;</span> MAX_ARRAY_SIZE<span class="token punctuation">)</span> <span class="token operator">?</span>
                <span class="token class-name">Integer</span><span class="token punctuation">.</span>MAX_VALUE <span class="token operator">:</span>
                MAX_ARRAY_SIZE<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

 <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> MAX_ARRAY_SIZE <span class="token operator">=</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span>MAX_VALUE <span class="token operator">-</span> <span class="token number">8</span><span class="token punctuation">;</span>  <span class="token comment">// æ•°ç»„æœ€å¤§å®¹é‡ä¸ºIntegeræœ€å¤§å€¼å†å‡8</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br></div></div><h3 id="void-add-int-index-e-element-åœ¨indexå¤„æ”¾ç½®å…ƒç´ "><a href="#void-add-int-index-e-element-åœ¨indexå¤„æ”¾ç½®å…ƒç´ " class="header-anchor">#</a> void add(int index, E element) ï¼šåœ¨indexå¤„æ”¾ç½®å…ƒç´ </h3> <p>å°†elementDataæ•°ç»„ä»indexå¼€å§‹åé¢çš„å…ƒç´ å¾€åç§»ä¸€ä½ï¼Œæ¥ç€åœ¨indexå¤„æ”¾ç½®å…ƒç´ </p> <p><strong>æ¨¡æ‹Ÿæ·»åŠ æ•°æ®(lierabbit)åˆ°index=4è¿‡ç¨‹å¦‚ä¸‹ï¼š</strong></p> <p><img src="/assets/img/ArrayList_simulates_adding_data_based_on_index.e1402f55.jpg" alt="ArrayListæ ¹æ®ç´¢å¼•æ¨¡æ‹Ÿæ·»åŠ æ•°æ®"></p> <ul><li>åœ¨æ­¤åˆ—è¡¨ä¸­çš„æŒ‡å®šä½ç½®æ’å…¥æŒ‡å®šçš„å…ƒç´ ã€‚</li> <li>å…ˆè°ƒç”¨ <code>rangeCheckForAdd</code> å¯¹indexè¿›è¡Œç•Œé™æ£€æŸ¥ï¼›ç„¶åè°ƒç”¨ <code>ensureCapacityInternal</code> æ–¹æ³•ä¿è¯<code>capacity</code>è¶³å¤Ÿå¤§ï¼›</li> <li>å†å°†ä»indexå¼€å§‹ä¹‹åçš„æ‰€æœ‰æˆå‘˜åç§»ä¸€ä¸ªä½ç½®ï¼›å°†elementæ’å…¥indexä½ç½®ï¼›æœ€åsizeåŠ 1ã€‚</li></ul> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">/**
     * Inserts the specified element at the specified position in this
     * list. Shifts the element currently at that position (if any) and
     * any subsequent elements to the right (adds one to their indices).
     *
     * @param index index at which the specified element is to be inserted
     * @param element element to be inserted
     * @throws IndexOutOfBoundsException {@inheritDoc}
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">int</span> index<span class="token punctuation">,</span> <span class="token class-name">E</span> element<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// æ£€æŸ¥ä¸‹æ ‡æ˜¯å¦è¶Šç•Œ</span>
        <span class="token function">rangeCheckForAdd</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// æ£€æŸ¥å½“å‰å®¹é‡æ˜¯å¦è¿˜å¯ä»¥åœ¨å®¹çº³ä¸€ä¸ªå…ƒç´ ï¼Œä¸å¤Ÿåˆ™æ‰©å®¹</span>
        <span class="token function">ensureCapacityInternal</span><span class="token punctuation">(</span>size <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// Increments modCount!!</span>
        <span class="token comment">// å°†elementDataä»indexå¼€å§‹åé¢çš„å…ƒç´ å¾€åç§»ä¸€ä½</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">arraycopy</span><span class="token punctuation">(</span>elementData<span class="token punctuation">,</span> index<span class="token punctuation">,</span> elementData<span class="token punctuation">,</span> index <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span>
                size <span class="token operator">-</span> index<span class="token punctuation">)</span><span class="token punctuation">;</span>
        elementData<span class="token punctuation">[</span>index<span class="token punctuation">]</span> <span class="token operator">=</span> element<span class="token punctuation">;</span>
        size<span class="token operator">++</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * A version of rangeCheck used by add and addAll.
     */</span>
    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">rangeCheckForAdd</span><span class="token punctuation">(</span><span class="token keyword">int</span> index<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// å½“indexç­‰äºsizeæ—¶ç›¸å½“äºæ·»åŠ å…ƒç´ åˆ°åˆ—è¡¨å°¾</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">&gt;</span> size <span class="token operator">||</span> index <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">IndexOutOfBoundsException</span><span class="token punctuation">(</span><span class="token function">outOfBoundsMsg</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><h3 id="ensurecapacity-int-mincapacity-è‡ªä¸»æ‰©å¢å®¹é‡"><a href="#ensurecapacity-int-mincapacity-è‡ªä¸»æ‰©å¢å®¹é‡" class="header-anchor">#</a> ensureCapacity(int minCapacity)ï¼šè‡ªä¸»æ‰©å¢å®¹é‡</h3> <p>åœ¨ä½¿ç”¨add()æ–¹æ³•å¢åŠ æ–°çš„å…ƒç´ æ—¶ï¼Œå¦‚æœè¦å¢åŠ çš„æ•°æ®é‡å¾ˆå¤§ï¼Œåº”è¯¥ä½¿ç”¨<code>ensureCapacity()</code>æ–¹æ³•ï¼Œè¯¥æ–¹æ³•çš„ä½œç”¨æ˜¯é¢„å…ˆè®¾ç½®Arraylistçš„å¤§å°ï¼Œè¿™æ ·å¯ä»¥å¤§å¤§æé«˜åˆå§‹åŒ–é€Ÿåº¦ã€‚</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">/**
    å¦‚æœ‰å¿…è¦ï¼Œå¢åŠ æ­¤ ArrayList å®ä¾‹çš„å®¹é‡ï¼Œä»¥ç¡®ä¿å®ƒè‡³å°‘å¯ä»¥å®¹çº³ç”±minimum capacityå‚æ•°æŒ‡å®šçš„å…ƒç´ æ•°ã€‚
     *
     * @param   minCapacity   æ‰€éœ€çš„æœ€å°å®¹é‡
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">ensureCapacity</span><span class="token punctuation">(</span><span class="token keyword">int</span> minCapacity<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">int</span> minExpand <span class="token operator">=</span> <span class="token punctuation">(</span>elementData <span class="token operator">!=</span> DEFAULTCAPACITY_EMPTY_ELEMENTDATA<span class="token punctuation">)</span><span class="token operator">?</span> <span class="token number">0</span><span class="token operator">:</span> DEFAULT_CAPACITY<span class="token punctuation">;</span>
            <span class="token comment">// any size if not default element table            </span>
            <span class="token comment">// larger than default for default empty table. It's already</span>
            <span class="token comment">// supposed to be at default size.</span>
            
        <span class="token keyword">if</span> <span class="token punctuation">(</span>minCapacity <span class="token operator">&gt;</span> minExpand<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">ensureExplicitCapacity</span><span class="token punctuation">(</span>minCapacity<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>æœ€å¥½åœ¨ add å¤§é‡å…ƒç´ ä¹‹å‰ç”¨ <code>ensureCapacity</code> æ–¹æ³•ï¼Œä»¥å‡å°‘å¢é‡é‡æ–°åˆ†é…çš„æ¬¡æ•°ã€‚ä¾‹å¦‚ï¼š</p> <p>æœªæå‰ä½¿ç”¨ <code>ensureCapacity</code> å‰</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">EnsureCapacityTest</span> <span class="token punctuation">{</span>
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">final</span> <span class="token keyword">int</span> <span class="token class-name">N</span> <span class="token operator">=</span> <span class="token number">10000000</span><span class="token punctuation">;</span>
		<span class="token keyword">long</span> startTime <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token class-name">N</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">long</span> endTime <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;ä½¿ç”¨ensureCapacityæ–¹æ³•å‰ï¼š&quot;</span><span class="token operator">+</span><span class="token punctuation">(</span>endTime <span class="token operator">-</span> startTime<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>ç»“æœï¼šä½¿ç”¨<code>ensureCapacity</code>æ–¹æ³•å‰ï¼š2158</p> <p>ä½¿ç”¨ <code>ensureCapacity</code> å</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">EnsureCapacityTest</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">final</span> <span class="token keyword">int</span> <span class="token class-name">N</span> <span class="token operator">=</span> <span class="token number">10000000</span><span class="token punctuation">;</span>
        list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">long</span> startTime1 <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        list<span class="token punctuation">.</span><span class="token function">ensureCapacity</span><span class="token punctuation">(</span><span class="token class-name">N</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//æ­¤å¤„è°ƒç”¨å</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token class-name">N</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">long</span> endTime1 <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;ä½¿ç”¨ensureCapacityæ–¹æ³•åï¼š&quot;</span><span class="token operator">+</span><span class="token punctuation">(</span>endTime1 <span class="token operator">-</span> startTime1<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>ç»“æœï¼šä½¿ç”¨<code>ensureCapacity</code>æ–¹æ³•åï¼š1773</p> <h3 id="æ•°ç»„å¤åˆ¶-æ‰©å®¹çš„ä¸¤ä¸ªæ–¹æ³•"><a href="#æ•°ç»„å¤åˆ¶-æ‰©å®¹çš„ä¸¤ä¸ªæ–¹æ³•" class="header-anchor">#</a> æ•°ç»„å¤åˆ¶/æ‰©å®¹çš„ä¸¤ä¸ªæ–¹æ³•</h3> <h4 id="system-arraycopy-object-src-int-srcpos-object-dest-int-destpos-int-length"><a href="#system-arraycopy-object-src-int-srcpos-object-dest-int-destpos-int-length" class="header-anchor">#</a> System.arraycopy(Object src, int srcPos, Object dest, int destPos, int length)</h4> <p>å°†æ•°ç»„<code>src</code>ä»<code>srcPos</code>åçš„å…ƒç´ å¤åˆ¶åˆ°ç›®æ ‡æ•°ç»„<code>dest</code>çš„<code>destPos</code>èµ·ç‚¹å¼€å§‹ï¼Œå¤åˆ¶<code>length</code>ä¸ª</p> <blockquote><ul><li><code>src</code> -è¿™æ˜¯æºæ•°ç»„.</li> <li><code>srcPos</code> -è¿™æ˜¯æºæ•°ç»„ä¸­çš„èµ·å§‹ä½ç½®ã€‚</li> <li><code>dest</code> -è¿™æ˜¯ç›®æ ‡æ•°ç»„ã€‚</li> <li><code>destPos</code> -è¿™æ˜¯ç›®æ ‡æ•°æ®ä¸­çš„èµ·å§‹ä½ç½®ã€‚</li> <li><code>length</code> -- è¿™æ˜¯ä¸€ä¸ªè¦å¤åˆ¶çš„æ•°ç»„å…ƒç´ çš„æ•°ç›®ã€‚</li></ul></blockquote> <h4 id="arrays-copyof"><a href="#arrays-copyof" class="header-anchor">#</a> Arrays.copyOf()</h4> <div class="language-java line-numbers-mode"><pre class="language-java"><code>elementData <span class="token operator">=</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">copyOf</span><span class="token punctuation">(</span>elementData<span class="token punctuation">,</span> newCapacity<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="åŒºåˆ«"><a href="#åŒºåˆ«" class="header-anchor">#</a> åŒºåˆ«</h4> <p>çœ‹ä¸¤è€…æºä»£ç å¯ä»¥å‘ç° copyOf() å†…éƒ¨å®é™…è°ƒç”¨äº† <code>System.arraycopy()</code> æ–¹æ³•</p> <p><code>arraycopy()</code> éœ€è¦ç›®æ ‡æ•°ç»„ï¼Œå°†åŸæ•°ç»„æ‹·è´åˆ°ä½ è‡ªå·±å®šä¹‰çš„æ•°ç»„é‡Œæˆ–è€…åŸæ•°ç»„ï¼Œè€Œä¸”å¯ä»¥é€‰æ‹©æ‹·è´çš„èµ·ç‚¹å’Œé•¿åº¦ä»¥åŠæ”¾å…¥æ–°æ•°ç»„ä¸­çš„ä½ç½® <code>copyOf()</code> æ˜¯ç³»ç»Ÿè‡ªåŠ¨åœ¨å†…éƒ¨æ–°å»ºä¸€ä¸ªæ•°ç»„ï¼Œå¹¶è¿”å›è¯¥æ•°ç»„ã€‚</p> <h3 id="boolean-addall-collection-extends-e-c-æ·»åŠ ä¸€ä¸ªé›†åˆé‡Œçš„æ‰€æœ‰å…ƒç´ åˆ°åˆ—è¡¨å°¾"><a href="#boolean-addall-collection-extends-e-c-æ·»åŠ ä¸€ä¸ªé›†åˆé‡Œçš„æ‰€æœ‰å…ƒç´ åˆ°åˆ—è¡¨å°¾" class="header-anchor">#</a> boolean addAll(Collection&lt;? extends E&gt; c) : æ·»åŠ ä¸€ä¸ªé›†åˆé‡Œçš„æ‰€æœ‰å…ƒç´ åˆ°åˆ—è¡¨å°¾</h3> <p>å°†è¦æ·»åŠ çš„é›†åˆå˜ä¸ºæ•°ç»„ï¼Œç„¶åå°†å…¶å¤åˆ¶åˆ°elementDataæ•°ç»„æœ«å°¾</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">/**
     * Appends all of the elements in the specified collection to the end of
     * this list, in the order that they are returned by the
     * specified collection's Iterator.  The behavior of this operation is
     * undefined if the specified collection is modified while the operation
     * is in progress.  (This implies that the behavior of this call is
     * undefined if the specified collection is this list, and this
     * list is nonempty.)
     *
     * @param c collection containing elements to be added to this list
     * @return &lt;tt&gt;true&lt;/tt&gt; if this list changed as a result of the call
     * @throws NullPointerException if the specified collection is null
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">addAll</span><span class="token punctuation">(</span><span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> c<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> a <span class="token operator">=</span> c<span class="token punctuation">.</span><span class="token function">toArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> numNew <span class="token operator">=</span> a<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
        <span class="token comment">// æ£€æŸ¥å½“å‰å®¹é‡æ˜¯å¦è¿˜å¯ä»¥åœ¨å®¹çº³aæ•°ç»„çš„å…ƒç´ ï¼Œä¸å¤Ÿåˆ™æ‰©å®¹</span>
        <span class="token function">ensureCapacityInternal</span><span class="token punctuation">(</span>size <span class="token operator">+</span> numNew<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// Increments modCount</span>
        <span class="token comment">// å°†aæ•°ç»„é‡Œçš„å…ƒç´ æ·»åŠ åˆ°elementDataæœ«å°¾</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">arraycopy</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> elementData<span class="token punctuation">,</span> size<span class="token punctuation">,</span> numNew<span class="token punctuation">)</span><span class="token punctuation">;</span>
        size <span class="token operator">+=</span> numNew<span class="token punctuation">;</span>
        <span class="token comment">// aæ•°ç»„ä¸ä¸ºç©ºï¼ˆé•¿åº¦ä¸ä¸º0ï¼‰æ—¶è¿”å›trueï¼Œåä¹‹false</span>
        <span class="token keyword">return</span> numNew <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><h3 id="int-indexof-object-o-æŸ¥æ‰¾oå…ƒç´ åœ¨åˆ—è¡¨ç¬¬ä¸€æ¬¡å‡ºç°çš„ä½ç½®"><a href="#int-indexof-object-o-æŸ¥æ‰¾oå…ƒç´ åœ¨åˆ—è¡¨ç¬¬ä¸€æ¬¡å‡ºç°çš„ä½ç½®" class="header-anchor">#</a> int indexOf(Object o)  ï¼šæŸ¥æ‰¾oå…ƒç´ åœ¨åˆ—è¡¨ç¬¬ä¸€æ¬¡å‡ºç°çš„ä½ç½®</h3> <p>ArrayListä¸­å¯ä»¥å­˜æ”¾nullå…ƒç´ ï¼Œindexofæ˜¯è¿”å›elementDataæ•°ç»„ä¸­å€¼ç›¸åŒçš„é¦–ä¸ªå…ƒç´ çš„ä¸‹æ ‡ï¼Œindexofä¸­æ¯”è¾ƒæ–¹æ³•æ˜¯equalsè€Œequalsæ˜¯æ¯”è¾ƒå…ƒç´ çš„å€¼ï¼Œå¦‚æœä½¿ç”¨**null.equals(Object o)**ä¼šæŠ¥é”™ç©ºæŒ‡é’ˆï¼Œå› æ­¤å¿…é¡»å¯¹nullå•ç‹¬æŸ¥æ‰¾ã€‚å¦‚æœæœªæ‰¾åˆ°è¯¥å…ƒç´ åˆ™è¿”å›-1</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">/**
     * Returns the index of the first occurrence of the specified element
     * in this list, or -1 if this list does not contain the element.
     * More formally, returns the lowest index &lt;tt&gt;i&lt;/tt&gt; such that
     * &lt;tt&gt;(o==null ? get(i)==null : o.equals(get(i)))&lt;/tt&gt;,
     * or -1 if there is no such index.
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token class-name">Object</span> o<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//å…ƒç´ å¯ä»¥ä¸ºnullï¼Œå¦‚æœä¸ºnullè¿”å›nullçš„ä¸‹æ ‡</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>o <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> size<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>elementData<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">==</span><span class="token keyword">null</span><span class="token punctuation">)</span>
                    <span class="token keyword">return</span> i<span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> size<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>o<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>elementData<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                    <span class="token keyword">return</span> i<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">// æ²¡æœ‰æ‰¾åˆ°å¯¹åº”çš„å…ƒç´ è¿”å›-1</span>
        <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><h3 id="e-remove-int-index-åˆ é™¤indexä½ç½®ä¸Šçš„å…ƒç´ "><a href="#e-remove-int-index-åˆ é™¤indexä½ç½®ä¸Šçš„å…ƒç´ " class="header-anchor">#</a> E remove(int index)  ï¼šåˆ é™¤indexä½ç½®ä¸Šçš„å…ƒç´ </h3> <p>æ¨¡æ‹Ÿåˆ é™¤index=4ï¼ˆå€¼ä¸ºlierabbitï¼‰è¿‡ç¨‹å¦‚ä¸‹</p> <p><img src="/assets/img/ArrayList_deletes_elements_based_on_index.b8cd0d46.jpg" alt="ArrayListæ ¹æ®ç´¢å¼•åˆ é™¤å…ƒç´ "></p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">/**
     * Removes the element at the specified position in this list.
     * Shifts any subsequent elements to the left (subtracts one from their
     * indices).
     *
     * @param index the index of the element to be removed
     * @return the element that was removed from the list
     * @throws IndexOutOfBoundsException {@inheritDoc}
     */</span>
    <span class="token keyword">public</span> <span class="token class-name">E</span> <span class="token function">remove</span><span class="token punctuation">(</span><span class="token keyword">int</span> index<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// æ£€æŸ¥ä¸‹æ ‡æ˜¯å¦è¶Šç•Œ</span>
        <span class="token function">rangeCheck</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span>

        modCount<span class="token operator">++</span><span class="token punctuation">;</span>  <span class="token comment">// æ“ä½œæ•°+1</span>
        <span class="token class-name">E</span> oldValue <span class="token operator">=</span> <span class="token function">elementData</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// è·å–indexä½ç½®ä¸Šçš„å…ƒç´ </span>

        <span class="token keyword">int</span> numMoved <span class="token operator">=</span> size <span class="token operator">-</span> index <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>  <span class="token comment">// éœ€è¦å¾€å‰ç§»åŠ¨å‡ ä¸ªä½ç½®</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>numMoved <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
            <span class="token comment">// ä»index + 1å¼€å§‹ï¼Œå¾€åçš„å…ƒç´ å‘å‰ç§»åŠ¨1ä¸ªä½ç½®</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">arraycopy</span><span class="token punctuation">(</span>elementData<span class="token punctuation">,</span> index<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span> elementData<span class="token punctuation">,</span> index<span class="token punctuation">,</span>
                    numMoved<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// å°†æ•°ç»„æœ«å°¾å…ƒç´ ç½®ç©º</span>
        elementData<span class="token punctuation">[</span><span class="token operator">--</span>size<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token comment">// clear to let GC do its work</span>

        <span class="token keyword">return</span> oldValue<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><h3 id="boolean-remove-object-o-åˆ é™¤oå…ƒç´ "><a href="#boolean-remove-object-o-åˆ é™¤oå…ƒç´ " class="header-anchor">#</a> boolean remove(Object o)  ï¼šåˆ é™¤oå…ƒç´ </h3> <p>é€šè¿‡å¯»æ‰¾oå…ƒç´ ï¼Œå¯ä»¥è·å¾—å…¶ä¸‹æ ‡ï¼Œå†æ ¹æ®ä¸‹æ ‡åˆ é™¤oå…ƒç´ </p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">/**
     * Removes the first occurrence of the specified element from this list,
     * if it is present.  If the list does not contain the element, it is
     * unchanged.  More formally, removes the element with the lowest index
     * &lt;tt&gt;i&lt;/tt&gt; such that
     * &lt;tt&gt;(o==null ? get(i)==null : o.equals(get(i)))&lt;/tt&gt;
     * (if such an element exists).  Returns &lt;tt&gt;true&lt;/tt&gt; if this list
     * contained the specified element (or equivalently, if this list
     * changed as a result of the call).
     *
     * @param o element to be removed from this list, if present
     * @return &lt;tt&gt;true&lt;/tt&gt; if this list contained the specified element
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">remove</span><span class="token punctuation">(</span><span class="token class-name">Object</span> o<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// å…ƒç´ å¯ä»¥ä¸ºnullï¼Œåˆ†å¼€æœç´¢o</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>o <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> index <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> index <span class="token operator">&lt;</span> size<span class="token punctuation">;</span> index<span class="token operator">++</span><span class="token punctuation">)</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>elementData<span class="token punctuation">[</span>index<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token function">fastRemove</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> index <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> index <span class="token operator">&lt;</span> size<span class="token punctuation">;</span> index<span class="token operator">++</span><span class="token punctuation">)</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>o<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>elementData<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token function">fastRemove</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token comment">// æ²¡æœ‰æ‰¾åˆ°è¿”å›false</span>
        <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/*
     * Private remove method that skips bounds checking and does not
     * return the value removed.
     */</span>
    <span class="token comment">// ç”±äºå·²ç»æ‰¾åˆ°å…ƒç´ ï¼Œåˆ™å…ƒç´ å¿…å®šå­˜åœ¨ï¼Œåˆ™indexå¿…å®šåˆç†ï¼Œæ‰€ä»¥ä¸éœ€è¦åœ¨æ£€æŸ¥indexæ˜¯å¦è¶Šç•Œ</span>
    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">fastRemove</span><span class="token punctuation">(</span><span class="token keyword">int</span> index<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        modCount<span class="token operator">++</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> numMoved <span class="token operator">=</span> size <span class="token operator">-</span> index <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>numMoved <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">arraycopy</span><span class="token punctuation">(</span>elementData<span class="token punctuation">,</span> index<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span> elementData<span class="token punctuation">,</span> index<span class="token punctuation">,</span>
                    numMoved<span class="token punctuation">)</span><span class="token punctuation">;</span>
        elementData<span class="token punctuation">[</span><span class="token operator">--</span>size<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token comment">// clear to let GC do its work</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br></div></div><h3 id="foreach-consumer-super-e-action-éå†åˆ—è¡¨"><a href="#foreach-consumer-super-e-action-éå†åˆ—è¡¨" class="header-anchor">#</a> forEach(Consumer&lt;? super E&gt; action) ï¼šéå†åˆ—è¡¨</h3> <p>è¿™é‡Œå¯ä»¥çœ‹åˆ°<strong>modCount</strong>çš„ç”¨å¤„ï¼Œå½“<strong>modCount</strong>å‘ç”Ÿæ”¹å˜åï¼Œç«‹åˆ»æŠ›å‡º<strong>ConcurrentModificationException</strong>å¼‚å¸¸ã€‚é€šè¿‡ä¹‹å‰çš„åˆ†æå¯ä»¥çŸ¥é“å½“åˆ—è¡¨å†…å®¹è¢«ä¿®æ”¹æ—¶<strong>modCount</strong>ä¼šå¢åŠ ã€‚ä¹Ÿå°±æ˜¯è¯´å¦‚æœåœ¨éå†<strong>ArrayList</strong>çš„è¿‡ç¨‹ä¸­æœ‰å…¶ä»–çº¿ç¨‹ä¿®æ”¹äº†<strong>ArrayList</strong>ï¼Œé‚£ä¹ˆå°†æŠ›å‡º<strong>ConcurrentModificationException</strong>å¼‚å¸¸</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>
    <span class="token keyword">protected</span> <span class="token keyword">transient</span> <span class="token keyword">int</span> modCount <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token comment">//æ“ä½œæ•°</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">forEach</span><span class="token punctuation">(</span><span class="token class-name">Consumer</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">super</span> <span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> action<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// ç¡®ä¿ä¸ä¸ºç©º</span>
        <span class="token class-name">Objects</span><span class="token punctuation">.</span><span class="token function">requireNonNull</span><span class="token punctuation">(</span>action<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">final</span> <span class="token keyword">int</span> expectedModCount <span class="token operator">=</span> modCount<span class="token punctuation">;</span>
        <span class="token annotation punctuation">@SuppressWarnings</span><span class="token punctuation">(</span><span class="token string">&quot;unchecked&quot;</span><span class="token punctuation">)</span>
        <span class="token keyword">final</span> <span class="token class-name">E</span><span class="token punctuation">[</span><span class="token punctuation">]</span> elementData <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">E</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">this</span><span class="token punctuation">.</span>elementData<span class="token punctuation">;</span>
        <span class="token keyword">final</span> <span class="token keyword">int</span> size <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>size<span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> modCount <span class="token operator">==</span> expectedModCount <span class="token operator">&amp;&amp;</span> i <span class="token operator">&lt;</span> size<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            action<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span>elementData<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>modCount <span class="token operator">!=</span> expectedModCount<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">ConcurrentModificationException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>


    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">T</span> <span class="token function">requireNonNull</span><span class="token punctuation">(</span><span class="token class-name">T</span> obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>obj <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">NullPointerException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> obj<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><h2 id="_2-list-linkedlist"><a href="#_2-list-linkedlist" class="header-anchor">#</a> 2. List | LinkedList</h2> <h2 id="_3-list-åŒºåˆ«"><a href="#_3-list-åŒºåˆ«" class="header-anchor">#</a> 3. List | åŒºåˆ«</h2> <h3 id="arraylistä¸listçš„åŒºåˆ«"><a href="#arraylistä¸listçš„åŒºåˆ«" class="header-anchor">#</a> ArrayListä¸Listçš„åŒºåˆ«</h3> <p>å‚è€ƒ</p> <blockquote><ul><li>https://www.cnblogs.com/zcscnn/p/7743507.html</li></ul></blockquote> <p>Listæ˜¯ä¸€ä¸ªæ¥å£ï¼Œè€ŒListArrayæ˜¯ä¸€ä¸ªç±»ã€‚ArrayListç»§æ‰¿å¹¶å®ç°äº†Listã€‚</p> <p>å› æ­¤ï¼ŒListæ¥å£ä¸èƒ½è¢«æ„é€ ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬è¯´çš„ä¸èƒ½åˆ›å»ºå®ä¾‹å¯¹è±¡ï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥åƒä¸‹é¢é‚£æ ·ä¸ºListæ¥å£åˆ›å»ºä¸€ä¸ªæŒ‡å‘è‡ªå·±çš„å¯¹è±¡å¼•ç”¨ï¼Œè€ŒArrayListå®ç°ç±»çš„å®ä¾‹å¯¹è±¡å°±åœ¨è¿™å……å½“äº†è¿™ä¸ªæŒ‡å‘Listæ¥å£çš„å¯¹è±¡å¼•ç”¨ã€‚</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">List</span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">List</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//æ˜¯é”™è¯¯çš„ç”¨æ³•</span>
<span class="token class-name">List</span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//æ­£ç¡®</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>è¿™å¥åˆ›å»ºäº†ä¸€ä¸ªArrayListå®ç°ç±»çš„å¯¹è±¡åæŠŠå®ƒä¸Šæº¯åˆ°äº†Listæ¥å£ã€‚æ­¤æ—¶å®ƒå°±æ˜¯ä¸€ä¸ªListå¯¹è±¡äº†ï¼Œå®ƒæœ‰äº›ArrayListç±»å…·æœ‰çš„ï¼Œä½†æ˜¯Listæ¥å£æ²¡æœ‰çš„å±æ€§å’Œæ–¹æ³•ï¼Œå®ƒå°±ä¸èƒ½å†ç”¨äº†ã€‚ è€ŒArrayList list=newArrayList();</p> <p>åˆ›å»ºä¸€å¯¹è±¡åˆ™ä¿ç•™äº†ArrayListçš„æ‰€æœ‰å±æ€§å’Œæ–¹æ³•ã€‚</p> <h3 id="arraylist-ä¸-linkedlist-åŒºåˆ«"><a href="#arraylist-ä¸-linkedlist-åŒºåˆ«" class="header-anchor">#</a> Arraylist ä¸ LinkedList åŒºåˆ«?</h3> <p><img src="/assets/img/difference_between_Arraylist_and_LinkedList.b237bf36.png" alt="ArrayListä¸LinkedListåŒºåˆ«"></p> <h3 id="arraylist-ä¸-vector-åŒºåˆ«å‘¢-ä¸ºä»€ä¹ˆè¦ç”¨arraylistå–ä»£vectorå‘¢"><a href="#arraylist-ä¸-vector-åŒºåˆ«å‘¢-ä¸ºä»€ä¹ˆè¦ç”¨arraylistå–ä»£vectorå‘¢" class="header-anchor">#</a> ArrayList ä¸ Vector åŒºåˆ«å‘¢?ä¸ºä»€ä¹ˆè¦â½¤Arraylistå–ä»£Vectorå‘¢ï¼Ÿ</h3> <p><img src="/assets/img/difference_between_ArrayList_and_Vector.f19f62d4.png" alt="ArrayListä¸VectoråŒºåˆ«"></p> <h2 id="_4-set-hashset"><a href="#_4-set-hashset" class="header-anchor">#</a> 4. Set | HashSet</h2> <p><strong>HashSet</strong>å®ç°<strong>Set</strong>æ¥å£ï¼Œç”±å“ˆå¸Œè¡¨ï¼ˆå®é™…ä¸Šæ˜¯ä¸€ä¸ª<strong>HashMap</strong>å®ä¾‹ï¼‰æ”¯æŒã€‚å®ƒä¸ä¿è¯set çš„è¿­ä»£é¡ºåºï¼›ç‰¹åˆ«æ˜¯å®ƒä¸ä¿è¯è¯¥é¡ºåºæ’ä¹…ä¸å˜ã€‚æ­¤ç±»å…è®¸ä½¿ç”¨nullå…ƒç´ ã€‚å¯¹äº<strong>HashSet</strong>è€Œè¨€ï¼Œå®ƒæ˜¯åŸºäº<strong>HashMap</strong>å®ç°çš„ï¼ŒHashSetåº•å±‚ä½¿ç”¨<strong>HashMap</strong>æ¥ä¿å­˜æ‰€æœ‰å…ƒç´ ï¼Œå› æ­¤<strong>HashSet</strong> çš„å®ç°æ¯”è¾ƒç®€å•ï¼Œç›¸å…³<strong>HashSet</strong>çš„æ“ä½œï¼ŒåŸºæœ¬ä¸Šéƒ½æ˜¯ç›´æ¥è°ƒç”¨åº•å±‚<strong>HashMap</strong>çš„ç›¸å…³æ–¹æ³•æ¥å®Œæˆï¼Œ <strong>HashSet</strong>çš„æºä»£ç å¦‚ä¸‹ï¼š</p> <h3 id="hashsetä¸hashmapåŒºåˆ«"><a href="#hashsetä¸hashmapåŒºåˆ«" class="header-anchor">#</a> HashSetä¸HashMapåŒºåˆ«</h3> <p><img src="/assets/img/difference_between_HashMap_and_HashSet.959a8a5a.png" alt="HashMap å’Œ HashSetåŒºåˆ«"></p> <h3 id="æ„é€ å™¨"><a href="#æ„é€ å™¨" class="header-anchor">#</a> æ„é€ å™¨</h3> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HashSet</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span>  
    <span class="token keyword">extends</span> <span class="token class-name">AbstractSet</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span>  
    <span class="token keyword">implements</span> <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">,</span> <span class="token class-name">Cloneable</span><span class="token punctuation">,</span> java<span class="token punctuation">.</span>io<span class="token punctuation">.</span><span class="token class-name">Serializable</span>  
<span class="token punctuation">{</span>  
    <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">long</span> serialVersionUID <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">5024744406713321676L</span><span class="token punctuation">;</span>  
  
    <span class="token comment">// åº•å±‚ä½¿ç”¨HashMapæ¥ä¿å­˜HashSetä¸­æ‰€æœ‰å…ƒç´ ã€‚  </span>
    <span class="token keyword">private</span> <span class="token keyword">transient</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">,</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> map<span class="token punctuation">;</span>  
      
    <span class="token comment">// å®šä¹‰ä¸€ä¸ªè™šæ‹Ÿçš„Objectå¯¹è±¡ä½œä¸ºHashMapçš„valueï¼Œå°†æ­¤å¯¹è±¡å®šä¹‰ä¸ºstatic finalã€‚  </span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Object</span> PRESENT <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
  
    <span class="token comment">/** 
     * é»˜è®¤çš„æ— å‚æ„é€ å™¨ï¼Œæ„é€ ä¸€ä¸ªç©ºçš„HashSetã€‚ 
     *  
     * å®é™…åº•å±‚ä¼šåˆå§‹åŒ–ä¸€ä¸ªç©ºçš„HashMapï¼Œå¹¶ä½¿ç”¨é»˜è®¤åˆå§‹å®¹é‡ä¸º16å’ŒåŠ è½½å› å­0.75ã€‚ 
     */</span>  
    <span class="token keyword">public</span> <span class="token class-name">HashSet</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  
    map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">,</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
    <span class="token punctuation">}</span>  
  
    <span class="token comment">/** 
     * æ„é€ ä¸€ä¸ªåŒ…å«æŒ‡å®šcollectionä¸­çš„å…ƒç´ çš„æ–°setã€‚ 
     * 
     * å®é™…åº•å±‚ä½¿ç”¨é»˜è®¤çš„åŠ è½½å› å­0.75å’Œè¶³ä»¥åŒ…å«æŒ‡å®š 
     * collectionä¸­æ‰€æœ‰å…ƒç´ çš„åˆå§‹å®¹é‡æ¥åˆ›å»ºä¸€ä¸ªHashMapã€‚ 
     * @param c å…¶ä¸­çš„å…ƒç´ å°†å­˜æ”¾åœ¨æ­¤setä¸­çš„collectionã€‚ 
     */</span>  
    <span class="token keyword">public</span> <span class="token class-name">HashSet</span><span class="token punctuation">(</span><span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> c<span class="token punctuation">)</span> <span class="token punctuation">{</span>  
    map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">,</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>c<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">/</span><span class="token number">.75f</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
    <span class="token function">addAll</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span>  
    <span class="token punctuation">}</span>  
  
    <span class="token comment">/** 
     * ä»¥æŒ‡å®šçš„initialCapacityå’ŒloadFactoræ„é€ ä¸€ä¸ªç©ºçš„HashSetã€‚ 
     * 
     * å®é™…åº•å±‚ä»¥ç›¸åº”çš„å‚æ•°æ„é€ ä¸€ä¸ªç©ºçš„HashMapã€‚ 
     * @param initialCapacity åˆå§‹å®¹é‡ã€‚ 
     * @param loadFactor åŠ è½½å› å­ã€‚ 
     */</span>  
    <span class="token keyword">public</span> <span class="token class-name">HashSet</span><span class="token punctuation">(</span><span class="token keyword">int</span> initialCapacity<span class="token punctuation">,</span> <span class="token keyword">float</span> loadFactor<span class="token punctuation">)</span> <span class="token punctuation">{</span>  
    map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">,</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>initialCapacity<span class="token punctuation">,</span> loadFactor<span class="token punctuation">)</span><span class="token punctuation">;</span>  
    <span class="token punctuation">}</span>  
  
    <span class="token comment">/** 
     * ä»¥æŒ‡å®šçš„initialCapacityæ„é€ ä¸€ä¸ªç©ºçš„HashSetã€‚ 
     * 
     * å®é™…åº•å±‚ä»¥ç›¸åº”çš„å‚æ•°åŠåŠ è½½å› å­loadFactorä¸º0.75æ„é€ ä¸€ä¸ªç©ºçš„HashMapã€‚ 
     * @param initialCapacity åˆå§‹å®¹é‡ã€‚ 
     */</span>  
    <span class="token keyword">public</span> <span class="token class-name">HashSet</span><span class="token punctuation">(</span><span class="token keyword">int</span> initialCapacity<span class="token punctuation">)</span> <span class="token punctuation">{</span>  
    map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">,</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>initialCapacity<span class="token punctuation">)</span><span class="token punctuation">;</span>  
    <span class="token punctuation">}</span>  
  
    <span class="token comment">/** 
     * ä»¥æŒ‡å®šçš„initialCapacityå’ŒloadFactoræ„é€ ä¸€ä¸ªæ–°çš„ç©ºé“¾æ¥å“ˆå¸Œé›†åˆã€‚ 
     * æ­¤æ„é€ å‡½æ•°ä¸ºåŒ…è®¿é—®æƒé™ï¼Œä¸å¯¹å¤–å…¬å¼€ï¼Œå®é™…åªæ˜¯æ˜¯å¯¹LinkedHashSetçš„æ”¯æŒã€‚ 
     * 
     * å®é™…åº•å±‚ä¼šä»¥æŒ‡å®šçš„å‚æ•°æ„é€ ä¸€ä¸ªç©ºLinkedHashMapå®ä¾‹æ¥å®ç°ã€‚ 
     * @param initialCapacity åˆå§‹å®¹é‡ã€‚ 
     * @param loadFactor åŠ è½½å› å­ã€‚ 
     * @param dummy æ ‡è®°ã€‚ 
     */</span>  
    <span class="token class-name">HashSet</span><span class="token punctuation">(</span><span class="token keyword">int</span> initialCapacity<span class="token punctuation">,</span> <span class="token keyword">float</span> loadFactor<span class="token punctuation">,</span> <span class="token keyword">boolean</span> dummy<span class="token punctuation">)</span> <span class="token punctuation">{</span>  
    map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LinkedHashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">,</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>initialCapacity<span class="token punctuation">,</span> loadFactor<span class="token punctuation">)</span><span class="token punctuation">;</span>  
    <span class="token punctuation">}</span>  
  

  
    <span class="token comment">/** 
     * è¿”å›æ­¤HashSetå®ä¾‹çš„æµ…è¡¨å‰¯æœ¬ï¼šå¹¶æ²¡æœ‰å¤åˆ¶è¿™äº›å…ƒç´ æœ¬èº«ã€‚ 
     * 
     * åº•å±‚å®é™…è°ƒç”¨HashMapçš„clone()æ–¹æ³•ï¼Œè·å–HashMapçš„æµ…è¡¨å‰¯æœ¬ï¼Œå¹¶è®¾ç½®åˆ°HashSetä¸­ã€‚ 
     */</span>  
    <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  
        <span class="token keyword">try</span> <span class="token punctuation">{</span>  
            <span class="token class-name">HashSet</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> newSet <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">HashSet</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">)</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
            newSet<span class="token punctuation">.</span>map <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">)</span> map<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
            <span class="token keyword">return</span> newSet<span class="token punctuation">;</span>  
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">CloneNotSupportedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>  
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">InternalError</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
        <span class="token punctuation">}</span>  
    <span class="token punctuation">}</span>  
<span class="token punctuation">}</span>  
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br></div></div><h3 id="è°ƒç”¨addæ–¹æ³•-å¦‚ä½•å»é‡"><a href="#è°ƒç”¨addæ–¹æ³•-å¦‚ä½•å»é‡" class="header-anchor">#</a> è°ƒç”¨addæ–¹æ³•/å¦‚ä½•å»é‡</h3> <p>å½“ä½ æŠŠå¯¹è±¡åŠ â¼Š HashSet æ—¶ï¼ŒHashSetä¼šå…ˆè®¡ç®—å¯¹è±¡çš„ hashcode å€¼æ¥åˆ¤æ–­å¯¹è±¡åŠ â¼Šçš„ä½ç½®ï¼ŒåŒæ—¶ä¹Ÿä¼š ä¸å…¶ä»–åŠ â¼Šçš„å¯¹è±¡çš„hashcodeå€¼ä½œâ½á«¾ï¼Œå¦‚æœæ²¡æœ‰ç›¸ç¬¦çš„hashcodeï¼ŒHashSetä¼šå‡è®¾å¯¹è±¡æ²¡æœ‰é‡å¤å‡º ç°ã€‚ä½†æ˜¯å¦‚æœå‘ç°æœ‰ç›¸åŒhashcodeå€¼çš„å¯¹è±¡ï¼Œè¿™æ—¶ä¼šè°ƒâ½¤ equalsï¼ˆï¼‰ â½…æ³•æ¥æ£€æŸ¥hashcodeç›¸ç­‰çš„å¯¹ è±¡æ˜¯å¦çœŸçš„ç›¸åŒã€‚å¦‚æœä¸¤è€…ç›¸åŒï¼ŒHashSetå°±ä¸ä¼šè®©åŠ â¼Šæ“ä½œæˆåŠŸã€‚ï¼ˆæ‘˜â¾ƒæˆ‘çš„Javaå¯è’™ä¹¦ã€ŠHead fist javaã€‹ç¬¬â¼†ç‰ˆï¼‰</p> <ul><li>å¦‚æœæ­¤setä¸­å°šæœªåŒ…å«æŒ‡å®šå…ƒç´ ï¼Œåˆ™æ·»åŠ æŒ‡å®šå…ƒç´ ã€‚</li> <li>æ›´ç¡®åˆ‡åœ°è®²ï¼Œå¦‚æœæ­¤ set æ²¡æœ‰åŒ…å«æ»¡è¶³(e==null ? e2==null : e.equals(e2)) çš„å…ƒç´ e2ï¼Œåˆ™å‘æ­¤set æ·»åŠ æŒ‡å®šçš„å…ƒç´ eã€‚</li> <li>å¦‚æœæ­¤setå·²åŒ…å«è¯¥å…ƒç´ ï¼Œåˆ™è¯¥è°ƒç”¨ä¸æ›´æ”¹setå¹¶è¿”å›falseã€‚</li> <li>åº•å±‚å®é™…å°†å°†è¯¥å…ƒç´ ä½œä¸ºkeyæ”¾å…¥HashMapã€‚</li> <li>ç”±äºHashMapçš„put()æ–¹æ³•æ·»åŠ key-valueå¯¹æ—¶ï¼Œå½“æ–°æ”¾å…¥HashMapçš„Entryä¸­key ä¸é›†åˆä¸­åŸæœ‰Entryçš„keyç›¸åŒï¼ˆhashCode()è¿”å›å€¼ç›¸ç­‰ï¼Œé€šè¿‡equalsæ¯”è¾ƒä¹Ÿè¿”å›trueï¼‰ã€‚æ–°æ·»åŠ çš„Entryçš„valueä¼šå°†è¦†ç›–åŸæ¥Entryçš„valueï¼Œä½†keyä¸ä¼šæœ‰ä»»ä½•æ”¹å˜ï¼Œ</li> <li>å› æ­¤å¦‚æœå‘HashSetä¸­æ·»åŠ ä¸€ä¸ªå·²ç»å­˜åœ¨çš„å…ƒç´ æ—¶ï¼Œæ–°æ·»åŠ çš„é›†åˆå…ƒç´ å°†ä¸ä¼šè¢«æ”¾å…¥HashMapä¸­ï¼Œ</li> <li>åŸæ¥çš„å…ƒç´ ä¹Ÿä¸ä¼šæœ‰ä»»ä½•æ”¹å˜ï¼Œè¿™ä¹Ÿå°±æ»¡è¶³äº†Setä¸­å…ƒç´ ä¸é‡å¤çš„ç‰¹æ€§ã€‚</li></ul> <div class="language-java line-numbers-mode"><pre class="language-java"><code>    <span class="token comment">/**  
     * @param e å°†æ·»åŠ åˆ°æ­¤setä¸­çš„å…ƒç´ ã€‚ 
     * @return å¦‚æœæ­¤setå°šæœªåŒ…å«æŒ‡å®šå…ƒç´ ï¼Œåˆ™è¿”å›trueã€‚ 
     */</span>  
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">E</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>  
    <span class="token keyword">return</span> map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span> PRESENT<span class="token punctuation">)</span><span class="token operator">==</span><span class="token keyword">null</span><span class="token punctuation">;</span>  
    <span class="token punctuation">}</span>  
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="è°ƒç”¨removeæ–¹æ³•"><a href="#è°ƒç”¨removeæ–¹æ³•" class="header-anchor">#</a> è°ƒç”¨removeæ–¹æ³•</h3> <div class="language-java line-numbers-mode"><pre class="language-java"><code> <span class="token comment">/** 
     * å¦‚æœæŒ‡å®šå…ƒç´ å­˜åœ¨äºæ­¤setä¸­ï¼Œåˆ™å°†å…¶ç§»é™¤ã€‚ 
     * æ›´ç¡®åˆ‡åœ°è®²ï¼Œå¦‚æœæ­¤setåŒ…å«ä¸€ä¸ªæ»¡è¶³(o==null ? e==null : o.equals(e))çš„å…ƒç´ eï¼Œ 
     * åˆ™å°†å…¶ç§»é™¤ã€‚å¦‚æœæ­¤setå·²åŒ…å«è¯¥å…ƒç´ ï¼Œåˆ™è¿”å›true 
     * ï¼ˆæˆ–è€…ï¼šå¦‚æœæ­¤setå› è°ƒç”¨è€Œå‘ç”Ÿæ›´æ”¹ï¼Œåˆ™è¿”å›trueï¼‰ã€‚ï¼ˆä¸€æ—¦è°ƒç”¨è¿”å›ï¼Œåˆ™æ­¤setä¸å†åŒ…å«è¯¥å…ƒç´ ï¼‰ã€‚ 
     * 
     * åº•å±‚å®é™…è°ƒç”¨HashMapçš„removeæ–¹æ³•åˆ é™¤æŒ‡å®šEntryã€‚ 
     * @param o å¦‚æœå­˜åœ¨äºæ­¤setä¸­åˆ™éœ€è¦å°†å…¶ç§»é™¤çš„å¯¹è±¡ã€‚ 
     * @return å¦‚æœsetåŒ…å«æŒ‡å®šå…ƒç´ ï¼Œåˆ™è¿”å›trueã€‚ 
     */</span>  
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">remove</span><span class="token punctuation">(</span><span class="token class-name">Object</span> o<span class="token punctuation">)</span> <span class="token punctuation">{</span>  
    <span class="token keyword">return</span> map<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token operator">==</span>PRESENT<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>  
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h3 id="è°ƒç”¨clearæ–¹æ³•"><a href="#è°ƒç”¨clearæ–¹æ³•" class="header-anchor">#</a> è°ƒç”¨clearæ–¹æ³•</h3> <div class="language-java line-numbers-mode"><pre class="language-java"><code>    <span class="token comment">/** 
     * ä»æ­¤setä¸­ç§»é™¤æ‰€æœ‰å…ƒç´ ã€‚æ­¤è°ƒç”¨è¿”å›åï¼Œè¯¥setå°†ä¸ºç©ºã€‚ 
     * 
     * åº•å±‚å®é™…è°ƒç”¨HashMapçš„clearæ–¹æ³•æ¸…ç©ºEntryä¸­æ‰€æœ‰å…ƒç´ ã€‚ 
     */</span>  
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  
    map<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
    <span class="token punctuation">}</span>  
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="è¿­ä»£å™¨éå†"><a href="#è¿­ä»£å™¨éå†" class="header-anchor">#</a> è¿­ä»£å™¨éå†</h3> <p>åº•å±‚å®é™…è°ƒç”¨åº•å±‚<strong>HashMap</strong>çš„<strong>keySet</strong>æ¥è¿”å›æ‰€æœ‰çš„keyã€‚</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">/** 
     * è¿”å›å¯¹æ­¤setä¸­å…ƒç´ è¿›è¡Œè¿­ä»£çš„è¿­ä»£å™¨ã€‚è¿”å›å…ƒç´ çš„é¡ºåºå¹¶ä¸æ˜¯ç‰¹å®šçš„ã€‚ 
     *  
     * åº•å±‚å®é™…è°ƒç”¨åº•å±‚HashMapçš„keySetæ¥è¿”å›æ‰€æœ‰çš„keyã€‚ 
     * å¯è§HashSetä¸­çš„å…ƒç´ ï¼Œåªæ˜¯å­˜æ”¾åœ¨äº†åº•å±‚HashMapçš„keyä¸Šï¼Œ 
     * valueä½¿ç”¨ä¸€ä¸ªstatic finalçš„Objectå¯¹è±¡æ ‡è¯†ã€‚ 
     * @return å¯¹æ­¤setä¸­å…ƒç´ è¿›è¡Œè¿­ä»£çš„Iteratorã€‚ 
     */</span>  
    <span class="token keyword">public</span> <span class="token class-name">Iterator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> <span class="token function">iterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  
    <span class="token keyword">return</span> map<span class="token punctuation">.</span><span class="token function">keySet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">iterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
    <span class="token punctuation">}</span>  
  
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>ä¹Ÿå¯ä»¥ä½¿ç”¨<code>for(Object obj : set)</code>çš„æ–¹å¼è¿›è¡Œéå†</p> <h3 id="sizeå¤§å°"><a href="#sizeå¤§å°" class="header-anchor">#</a> sizeå¤§å°</h3> <p>åº•å±‚å®é™…è°ƒç”¨<strong>HashMap</strong>çš„**size()**æ–¹æ³•è¿”å›Entryçš„æ•°é‡ï¼Œå°±å¾—åˆ°è¯¥Setä¸­å…ƒç´ çš„ä¸ªæ•°</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">/** 
     * è¿”å›æ­¤setä¸­çš„å…ƒç´ çš„æ•°é‡ï¼ˆsetçš„å®¹é‡ï¼‰ã€‚ 
     * 
     * åº•å±‚å®é™…è°ƒç”¨HashMapçš„size()æ–¹æ³•è¿”å›Entryçš„æ•°é‡ï¼Œå°±å¾—åˆ°è¯¥Setä¸­å…ƒç´ çš„ä¸ªæ•°ã€‚ 
     * @return æ­¤setä¸­çš„å…ƒç´ çš„æ•°é‡ï¼ˆsetçš„å®¹é‡ï¼‰ã€‚ 
     */</span>  
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> map<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
    <span class="token punctuation">}</span>  
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="åˆ¤æ–­ç©º"><a href="#åˆ¤æ–­ç©º" class="header-anchor">#</a> åˆ¤æ–­ç©º</h3> <div class="language-java line-numbers-mode"><pre class="language-java"><code>    <span class="token comment">/** 
     * å¦‚æœæ­¤setä¸åŒ…å«ä»»ä½•å…ƒç´ ï¼Œåˆ™è¿”å›trueã€‚ 
     * 
     * åº•å±‚å®é™…è°ƒç”¨HashMapçš„isEmpty()åˆ¤æ–­è¯¥HashSetæ˜¯å¦ä¸ºç©ºã€‚ 
     * @return å¦‚æœæ­¤setä¸åŒ…å«ä»»ä½•å…ƒç´ ï¼Œåˆ™è¿”å›trueã€‚ 
     */</span>  
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  
    <span class="token keyword">return</span> map<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
    <span class="token punctuation">}</span>  
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="åˆ¤æ–­æ˜¯å¦å­˜åœ¨æŸä¸ªå¯¹è±¡"><a href="#åˆ¤æ–­æ˜¯å¦å­˜åœ¨æŸä¸ªå¯¹è±¡" class="header-anchor">#</a> åˆ¤æ–­æ˜¯å¦å­˜åœ¨æŸä¸ªå¯¹è±¡</h3> <div class="language-java line-numbers-mode"><pre class="language-java"><code>
    <span class="token comment">/** 
     * å¦‚æœæ­¤setåŒ…å«æŒ‡å®šå…ƒç´ ï¼Œåˆ™è¿”å›trueã€‚ 
     * æ›´ç¡®åˆ‡åœ°è®²ï¼Œå½“ä¸”ä»…å½“æ­¤setåŒ…å«ä¸€ä¸ªæ»¡è¶³(o==null ? e==null : o.equals(e)) 
     * çš„eå…ƒç´ æ—¶ï¼Œè¿”å›trueã€‚ 
     * 
     * åº•å±‚å®é™…è°ƒç”¨HashMapçš„containsKeyåˆ¤æ–­æ˜¯å¦åŒ…å«æŒ‡å®škeyã€‚ 
     * @param o åœ¨æ­¤setä¸­çš„å­˜åœ¨å·²å¾—åˆ°æµ‹è¯•çš„å…ƒç´ ã€‚ 
     * @return å¦‚æœæ­¤setåŒ…å«æŒ‡å®šå…ƒç´ ï¼Œåˆ™è¿”å›trueã€‚ 
     */</span>  
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">contains</span><span class="token punctuation">(</span><span class="token class-name">Object</span> o<span class="token punctuation">)</span> <span class="token punctuation">{</span>  
    <span class="token keyword">return</span> map<span class="token punctuation">.</span><span class="token function">containsKey</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token punctuation">;</span>  
    <span class="token punctuation">}</span>  
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h2 id="_5-map-hashmap"><a href="#_5-map-hashmap" class="header-anchor">#</a> 5. Map | HashMap</h2> <p><img src="/assets/img/Map_Collections_diagram.957b04f7.png" alt="Mapé›†åˆå›¾"></p> <h3 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="header-anchor">#</a> å‚è€ƒ</h3> <blockquote><ul><li>https://www.cnblogs.com/chentang/p/12670462.html</li> <li>https://www.cnblogs.com/wytiger/p/10731082.html</li> <li>https://www.cnblogs.com/yuanblog/p/4441017.html</li> <li><a href="https://blog.csdn.net/v123411739/article/details/78996181?utm_medium=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-2.channel_param&amp;depth_1-utm_source=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-2.channel_param" target="_blank" rel="noopener noreferrer">æœ€å…¨æºç è§£æ<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></blockquote> <h3 id="å“ˆå¸Œè¡¨-å“ˆå¸Œå†²çª"><a href="#å“ˆå¸Œè¡¨-å“ˆå¸Œå†²çª" class="header-anchor">#</a> å“ˆå¸Œè¡¨&amp;å“ˆå¸Œå†²çª</h3> <p>â€‹	åœ¨æ•°ç»„ä¸­æ ¹æ®ä¸‹æ ‡æŸ¥æ‰¾æŸä¸ªå…ƒç´ ï¼Œä¸€æ¬¡å®šä½å°±å¯ä»¥è¾¾åˆ°ï¼Œå“ˆå¸Œè¡¨åˆ©ç”¨äº†è¿™ç§ç‰¹æ€§ï¼Œ<strong>å“ˆå¸Œè¡¨çš„ä¸»å¹²å°±æ˜¯æ•°ç»„</strong>ã€‚æ¯”å¦‚æˆ‘ä»¬è¦æ–°å¢æˆ–æŸ¥æ‰¾æŸä¸ªå…ƒç´ ï¼Œæˆ‘ä»¬é€šè¿‡æŠŠå½“å‰å…ƒç´ çš„å…³é”®å­— é€šè¿‡æŸä¸ªå‡½æ•°æ˜ å°„åˆ°æ•°ç»„ä¸­çš„æŸä¸ªä½ç½®ï¼Œé€šè¿‡æ•°ç»„ä¸‹æ ‡ä¸€æ¬¡å®šä½å°±å¯å®Œæˆæ“ä½œã€‚</p> <blockquote><p><strong>å­˜å‚¨ä½ç½® = f(å…³é”®å­—)</strong></p></blockquote> <p>å…¶ä¸­ï¼Œè¿™ä¸ªå‡½æ•°fä¸€èˆ¬ç§°ä¸º<strong>å“ˆå¸Œå‡½æ•°</strong>ï¼Œè¿™ä¸ªå‡½æ•°çš„è®¾è®¡å¥½åä¼šç›´æ¥å½±å“åˆ°å“ˆå¸Œè¡¨çš„ä¼˜åŠ£ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œæ¯”å¦‚æˆ‘ä»¬è¦åœ¨å“ˆå¸Œè¡¨ä¸­æ‰§è¡Œæ’å…¥æ“ä½œï¼š</p> <p><img src="/assets/img/Hash_table_diagram.14a250fc.jpg" alt="å“ˆå¸Œè¡¨å›¾è§£"></p> <p>æŸ¥æ‰¾æ“ä½œåŒç†ï¼Œå…ˆé€šè¿‡å“ˆå¸Œå‡½æ•°è®¡ç®—å‡ºå®é™…å­˜å‚¨åœ°å€ï¼Œç„¶åä»æ•°ç»„ä¸­å¯¹åº”åœ°å€å–å‡ºå³å¯ã€‚</p> <p>ç„¶è€Œä¸‡äº‹æ— å®Œç¾ï¼Œå¦‚æœä¸¤ä¸ªä¸åŒçš„å…ƒç´ ï¼Œé€šè¿‡å“ˆå¸Œå‡½æ•°å¾—å‡ºçš„å®é™…å­˜å‚¨åœ°å€ç›¸åŒæ€ä¹ˆåŠï¼Ÿä¹Ÿå°±æ˜¯è¯´ï¼Œå½“æˆ‘ä»¬å¯¹æŸä¸ªå…ƒç´ è¿›è¡Œå“ˆå¸Œè¿ç®—ï¼Œå¾—åˆ°ä¸€ä¸ªå­˜å‚¨åœ°å€ï¼Œç„¶åè¦è¿›è¡Œæ’å…¥çš„æ—¶å€™ï¼Œå‘ç°å·²ç»è¢«å…¶ä»–å…ƒç´ å ç”¨äº†ï¼Œå…¶å®è¿™å°±æ˜¯æ‰€è°“çš„<strong>å“ˆå¸Œå†²çª</strong>ï¼Œä¹Ÿå«å“ˆå¸Œç¢°æ’ã€‚å‰é¢æˆ‘ä»¬æåˆ°è¿‡ï¼Œå“ˆå¸Œå‡½æ•°çš„è®¾è®¡è‡³å…³é‡è¦ï¼Œå¥½çš„å“ˆå¸Œå‡½æ•°ä¼šå°½å¯èƒ½åœ°ä¿è¯ <strong>è®¡ç®—ç®€å•</strong>å’Œ**æ•£åˆ—åœ°å€åˆ†å¸ƒå‡åŒ€,**ä½†æ˜¯ï¼Œæˆ‘ä»¬éœ€è¦æ¸…æ¥šçš„æ˜¯ï¼Œæ•°ç»„æ˜¯ä¸€å—è¿ç»­çš„å›ºå®šé•¿åº¦çš„å†…å­˜ç©ºé—´ï¼Œå†å¥½çš„å“ˆå¸Œå‡½æ•°ä¹Ÿä¸èƒ½ä¿è¯å¾—åˆ°çš„å­˜å‚¨åœ°å€ç»å¯¹ä¸å‘ç”Ÿå†²çªã€‚é‚£ä¹ˆå“ˆå¸Œå†²çªå¦‚ä½•è§£å†³å‘¢ï¼Ÿ</p> <ul><li>**é“¾åœ°å€æ³•ï¼š**å°†å“ˆå¸Œè¡¨çš„æ¯ä¸ªå•å…ƒä½œä¸ºé“¾è¡¨çš„å¤´ç»“ç‚¹ï¼Œæ‰€æœ‰å“ˆå¸Œåœ°å€ä¸º i çš„å…ƒç´ æ„æˆä¸€ä¸ªåŒä¹‰è¯é“¾è¡¨ã€‚å³å‘ç”Ÿå†²çªæ—¶å°±æŠŠè¯¥å…³é”®å­—é“¾åœ¨ä»¥è¯¥å•å…ƒä¸ºå¤´ç»“ç‚¹çš„é“¾è¡¨çš„å°¾éƒ¨ã€‚</li></ul> <h3 id="hashmapæ•°æ®ç»“æ„"><a href="#hashmapæ•°æ®ç»“æ„" class="header-anchor">#</a> HashMapæ•°æ®ç»“æ„</h3> <p><strong>HashMap</strong>çš„ä¸»å¹²æ˜¯ä¸€ä¸ªå˜é‡åä¸º<strong>table</strong>çš„<strong>Entry/Nodeæ•°ç»„</strong>ã€‚<strong>Entry/Node</strong>æ˜¯<strong>HashMap</strong>çš„åŸºæœ¬ç»„æˆå•å…ƒï¼Œæ¯ä¸€ä¸ª<strong>Entry/Node</strong>åŒ…å«ä¸€ä¸ª<strong>key-value</strong>é”®å€¼å¯¹ã€‚</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">//HashMapçš„ä¸»å¹²æ•°ç»„ï¼Œå¯ä»¥çœ‹åˆ°å°±æ˜¯ä¸€ä¸ªEntryæ•°ç»„ï¼Œåˆå§‹å€¼ä¸ºç©ºæ•°ç»„{}ï¼Œä¸»å¹²æ•°ç»„çš„é•¿åº¦ä¸€å®šæ˜¯2çš„æ¬¡å¹‚</span>
<span class="token keyword">transient</span> <span class="token class-name">Entry</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">[</span><span class="token punctuation">]</span> table <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Entry</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> EMPTY_TABLE<span class="token punctuation">;</span>

    <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">implements</span> <span class="token class-name">Map</span><span class="token punctuation">.</span><span class="token class-name">Entry</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
        <span class="token keyword">final</span> <span class="token keyword">int</span> hash<span class="token punctuation">;</span>
        <span class="token keyword">final</span> <span class="token class-name">K</span> key<span class="token punctuation">;</span>
        <span class="token class-name">V</span> value<span class="token punctuation">;</span>
        <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> next<span class="token punctuation">;</span>

        <span class="token class-name">Node</span><span class="token punctuation">(</span><span class="token keyword">int</span> hash<span class="token punctuation">,</span> <span class="token class-name">K</span> key<span class="token punctuation">,</span> <span class="token class-name">V</span> value<span class="token punctuation">,</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> next<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>hash <span class="token operator">=</span> hash<span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>key <span class="token operator">=</span> key<span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">=</span> value<span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>next <span class="token operator">=</span> next<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><ul><li><strong>ç®€å•æ¥è¯´ï¼ŒHashMapç”±æ•°ç»„+é“¾è¡¨ç»„æˆçš„ï¼Œæ•°ç»„æ˜¯HashMapçš„ä¸»ä½“ï¼Œé“¾è¡¨åˆ™æ˜¯ä¸»è¦ä¸ºäº†è§£å†³å“ˆå¸Œå†²çªè€Œå­˜åœ¨çš„ã€‚</strong></li> <li><strong>å¦‚æœå®šä½åˆ°çš„æ•°ç»„ä½ç½®ä¸å«é“¾è¡¨ï¼ˆå½“å‰entryçš„nextæŒ‡å‘nullï¼‰ï¼šé‚£ä¹ˆå¯¹äºæŸ¥æ‰¾ï¼Œæ·»åŠ ç­‰æ“ä½œå¾ˆå¿«ï¼Œä»…éœ€ä¸€æ¬¡å¯»å€å³å¯ï¼›</strong></li> <li><strong>å¦‚æœå®šä½åˆ°çš„æ•°ç»„åŒ…å«é“¾è¡¨ï¼šå¯¹äºæ·»åŠ æ“ä½œï¼Œå…¶æ—¶é—´å¤æ‚åº¦ä¸ºO(n)ï¼Œé¦–å…ˆéå†é“¾è¡¨ï¼Œå­˜åœ¨å³è¦†ç›–ï¼Œå¦åˆ™æ–°å¢ï¼›å¯¹äºæŸ¥æ‰¾æ“ä½œæ¥è®²ï¼Œä»éœ€éå†é“¾è¡¨ï¼Œç„¶åé€šè¿‡keyå¯¹è±¡çš„equalsæ–¹æ³•é€ä¸€æ¯”å¯¹æŸ¥æ‰¾ã€‚</strong></li></ul> <p><img src="/assets/img/HashMap_data_structure_1.ee184274.png" alt="HashMapæ•°æ®ç»“æ„"></p> <p><img src="/assets/img/HashMap_data_structure_2.8896a62f.png" alt="HashMapæ•°æ®ç»“æ„2"></p> <h3 id="hashmapå±æ€§"><a href="#hashmapå±æ€§" class="header-anchor">#</a> HashMapå±æ€§</h3> <ul><li>**initialCapacityï¼š**åˆå§‹å®¹é‡ã€‚æŒ‡çš„æ˜¯ HashMap é›†åˆåˆå§‹åŒ–çš„æ—¶å€™è‡ªèº«çš„å®¹é‡ã€‚å¯ä»¥åœ¨æ„é€ æ–¹æ³•ä¸­æŒ‡å®šï¼›å¦‚æœä¸æŒ‡å®šçš„è¯ï¼Œæ€»å®¹é‡é»˜è®¤å€¼æ˜¯ <strong>16</strong> ã€‚éœ€è¦æ³¨æ„çš„æ˜¯åˆå§‹å®¹é‡å¿…é¡»æ˜¯ 2 çš„å¹‚æ¬¡æ–¹ã€‚</li> <li>**sizeï¼š**å½“å‰ HashMap ä¸­å·²ç»å­˜å‚¨ç€çš„é”®å€¼å¯¹æ•°é‡ï¼Œå³ HashMap.size()</li> <li>**loadFactorï¼š**åŠ è½½å› å­ã€‚æ‰€è°“çš„åŠ è½½å› å­å°±æ˜¯ HashMap (å½“å‰çš„å®¹é‡/æ€»å®¹é‡) åˆ°è¾¾ä¸€å®šå€¼çš„æ—¶å€™ï¼ŒHashMap ä¼šå®æ–½æ‰©å®¹ã€‚åŠ è½½å› å­ä¹Ÿå¯ä»¥é€šè¿‡æ„é€ æ–¹æ³•ä¸­æŒ‡å®šï¼Œé»˜è®¤çš„å€¼æ˜¯ 0.75 ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œå‡è®¾æœ‰ä¸€ä¸ª HashMap çš„åˆå§‹å®¹é‡ä¸º 16 ï¼Œé‚£ä¹ˆæ‰©å®¹çš„é˜€å€¼å°±æ˜¯ 0.75 * 16 = 12 ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨ä½ æ‰“ç®—å­˜å…¥ç¬¬ 13 ä¸ªå€¼çš„æ—¶å€™ï¼ŒHashMap ä¼šå…ˆæ‰§è¡Œæ‰©å®¹ã€‚</li> <li>**thresholdï¼š**æ‰©å®¹é˜€å€¼ã€‚å³ æ‰©å®¹é˜€å€¼ = HashMap æ€»å®¹é‡ * åŠ è½½å› å­ã€‚å½“å‰ HashMap çš„å®¹é‡å¤§äºæˆ–ç­‰äºæ‰©å®¹é˜€å€¼çš„æ—¶å€™å°±ä¼šå»æ‰§è¡Œæ‰©å®¹ã€‚æ‰©å®¹çš„å®¹é‡ä¸ºå½“å‰ HashMap æ€»å®¹é‡çš„ä¸¤å€ã€‚æ¯”å¦‚ï¼Œå½“å‰ HashMap çš„æ€»å®¹é‡ä¸º 16 ï¼Œé‚£ä¹ˆæ‰©å®¹ä¹‹åä¸º 32 ã€‚</li> <li>**tableï¼š**1.8ä¹‹å‰ä¸ºEntry æ•°ç»„ï¼Œ1.8ä¹‹åä¸ºNodeæ•°ç»„ã€‚æˆ‘ä»¬éƒ½çŸ¥é“ HashMap å†…éƒ¨å­˜å‚¨ key/value æ˜¯é€šè¿‡ Entry/Node è¿™ä¸ªä»‹è´¨æ¥å®ç°çš„ã€‚</li></ul> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">implements</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">,</span> <span class="token class-name">Cloneable</span><span class="token punctuation">,</span> <span class="token class-name">Serializable</span> <span class="token punctuation">{</span>
    <span class="token comment">//åºåˆ—å·ï¼Œåºåˆ—åŒ–çš„æ—¶å€™ä½¿ç”¨ã€‚</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">long</span> serialVersionUID <span class="token operator">=</span> <span class="token number">362498820763181265L</span><span class="token punctuation">;</span>
    <span class="token comment">/**é»˜è®¤å®¹é‡ï¼Œ1å‘å·¦ç§»ä½4ä¸ªï¼Œ00000001å˜æˆ00010000ï¼Œä¹Ÿå°±æ˜¯2çš„4æ¬¡æ–¹ä¸º16ï¼Œä½¿ç”¨ç§»ä½æ˜¯å› ä¸ºç§»ä½æ˜¯è®¡ç®—æœºåŸºç¡€è¿ç®—ï¼Œæ•ˆç‡æ¯”åŠ å‡ä¹˜é™¤å¿«ã€‚**/</span>
    <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> DEFAULT_INITIAL_CAPACITY <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">&lt;&lt;</span> <span class="token number">4</span><span class="token punctuation">;</span>
    <span class="token comment">//æœ€å¤§å®¹é‡ï¼Œ2çš„30æ¬¡æ–¹ã€‚</span>
    <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> MAXIMUM_CAPACITY <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">&lt;&lt;</span> <span class="token number">30</span><span class="token punctuation">;</span>
    <span class="token comment">//åŠ è½½å› å­ï¼Œç”¨äºæ‰©å®¹ä½¿ç”¨ã€‚</span>
    <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">float</span> DEFAULT_LOAD_FACTOR <span class="token operator">=</span> <span class="token number">0.75f</span><span class="token punctuation">;</span>
    <span class="token comment">//å½“æŸä¸ªæ¡¶èŠ‚ç‚¹æ•°é‡å¤§äº8æ—¶ï¼Œä¼šè½¬æ¢ä¸ºçº¢é»‘æ ‘ã€‚</span>
    <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> TREEIFY_THRESHOLD <span class="token operator">=</span> <span class="token number">8</span><span class="token punctuation">;</span>
    <span class="token comment">//å½“æŸä¸ªæ¡¶èŠ‚ç‚¹æ•°é‡å°äº6æ—¶ï¼Œä¼šè½¬æ¢ä¸ºé“¾è¡¨ï¼Œå‰ææ˜¯å®ƒå½“å‰æ˜¯çº¢é»‘æ ‘ç»“æ„ã€‚</span>
    <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> UNTREEIFY_THRESHOLD <span class="token operator">=</span> <span class="token number">6</span><span class="token punctuation">;</span>
    <span class="token comment">//å½“æ•´ä¸ªhashMapä¸­å…ƒç´ æ•°é‡å¤§äº64æ—¶ï¼Œä¹Ÿä¼šè¿›è¡Œè½¬ä¸ºçº¢é»‘æ ‘ç»“æ„ã€‚</span>
    <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> MIN_TREEIFY_CAPACITY <span class="token operator">=</span> <span class="token number">64</span><span class="token punctuation">;</span>
    <span class="token comment">//å­˜å‚¨å…ƒç´ çš„æ•°ç»„ï¼Œtransientå…³é”®å­—è¡¨ç¤ºè¯¥å±æ€§ä¸èƒ½è¢«åºåˆ—åŒ–</span>
    <span class="token keyword">transient</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">[</span><span class="token punctuation">]</span> table<span class="token punctuation">;</span>
    <span class="token comment">//å°†æ•°æ®è½¬æ¢æˆsetçš„å¦ä¸€ç§å­˜å‚¨å½¢å¼ï¼Œè¿™ä¸ªå˜é‡ä¸»è¦ç”¨äºè¿­ä»£åŠŸèƒ½ã€‚</span>
    <span class="token keyword">transient</span> <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Map</span><span class="token punctuation">.</span><span class="token class-name">Entry</span><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> entrySet<span class="token punctuation">;</span>
    <span class="token comment">//å…ƒç´ æ•°é‡</span>
    <span class="token keyword">transient</span> <span class="token keyword">int</span> size<span class="token punctuation">;</span>
    <span class="token comment">//ç»Ÿè®¡è¯¥mapä¿®æ”¹çš„æ¬¡æ•°</span>
    <span class="token keyword">transient</span> <span class="token keyword">int</span> modCount<span class="token punctuation">;</span>
    <span class="token comment">//ä¸´ç•Œå€¼ï¼Œä¹Ÿå°±æ˜¯å…ƒç´ æ•°é‡è¾¾åˆ°ä¸´ç•Œå€¼æ—¶ï¼Œä¼šè¿›è¡Œæ‰©å®¹ã€‚</span>
    <span class="token keyword">int</span> threshold<span class="token punctuation">;</span>
    <span class="token comment">//ä¹Ÿæ˜¯åŠ è½½å› å­ï¼Œåªä¸è¿‡è¿™ä¸ªæ˜¯å˜é‡ã€‚</span>
    <span class="token keyword">final</span> <span class="token keyword">float</span> loadFactor<span class="token punctuation">;</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><h3 id="hashmapå¸¸ç”¨å†…éƒ¨ç±»"><a href="#hashmapå¸¸ç”¨å†…éƒ¨ç±»" class="header-anchor">#</a> HashMapå¸¸ç”¨å†…éƒ¨ç±»</h3> <p><strong>çº¢é»‘æ ‘ç»“æ„</strong></p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">class</span> <span class="token class-name">TreeNode</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">extends</span> <span class="token class-name">LinkedHashMap</span><span class="token punctuation">.</span><span class="token class-name">Entry</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
        <span class="token class-name">TreeNode</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> parent<span class="token punctuation">;</span>  
        <span class="token class-name">TreeNode</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> left<span class="token punctuation">;</span>
        <span class="token class-name">TreeNode</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> right<span class="token punctuation">;</span>
        <span class="token class-name">TreeNode</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> prev<span class="token punctuation">;</span>    
        <span class="token keyword">boolean</span> red<span class="token punctuation">;</span>
        <span class="token class-name">TreeNode</span><span class="token punctuation">(</span><span class="token keyword">int</span> hash<span class="token punctuation">,</span> <span class="token class-name">K</span> key<span class="token punctuation">,</span> <span class="token class-name">V</span> val<span class="token punctuation">,</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> next<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">super</span><span class="token punctuation">(</span>hash<span class="token punctuation">,</span> key<span class="token punctuation">,</span> val<span class="token punctuation">,</span> next<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p><strong>ç»“ç‚¹ç±»</strong></p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">implements</span> <span class="token class-name">Map</span><span class="token punctuation">.</span><span class="token class-name">Entry</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
        <span class="token keyword">final</span> <span class="token keyword">int</span> hash<span class="token punctuation">;</span>
        <span class="token keyword">final</span> <span class="token class-name">K</span> key<span class="token punctuation">;</span>
        <span class="token class-name">V</span> value<span class="token punctuation">;</span>
        <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> next<span class="token punctuation">;</span>
 
        <span class="token class-name">Node</span><span class="token punctuation">(</span><span class="token keyword">int</span> hash<span class="token punctuation">,</span> <span class="token class-name">K</span> key<span class="token punctuation">,</span> <span class="token class-name">V</span> value<span class="token punctuation">,</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> next<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>hash <span class="token operator">=</span> hash<span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>key <span class="token operator">=</span> key<span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">=</span> value<span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>next <span class="token operator">=</span> next<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h3 id="æ„é€ æ–¹æ³•-2"><a href="#æ„é€ æ–¹æ³•-2" class="header-anchor">#</a> æ„é€ æ–¹æ³•</h3> <ul><li>æ— å‚æ„é€ æ–¹æ³•ï¼Œé»˜è®¤å®¹é‡<strong>16</strong>ï¼Œé»˜è®¤çš„åŠ è½½å› å­<strong>0.75</strong></li> <li>è®¾ç½®åˆå§‹å®¹é‡ï¼Œå¹¶ä½¿ç”¨é»˜è®¤çš„åŠ è½½å› å­<strong>0.75</strong>ï¼Œè°ƒç”¨çš„æ–¹æ³•æ˜¯ç¬¬ä¸‰ä¸ªæ„é€ æ–¹æ³•ï¼Œå°†é»˜è®¤<strong>DEFAULT_LOAD_FACTOR</strong>ä½œä¸ºå½¢å‚ä¼ å…¥ç¬¬ä¸‰ä¸ªæ„é€ å‡½æ•°</li> <li>è®¾ç½®åˆå§‹å®¹é‡å’ŒåŠ è½½å› å­</li> <li>ä¼ å…¥ä¸€ä¸ªMapï¼Œç„¶åæŠŠè¯¥Mapè½¬ä¸ºhashMap</li></ul> <p><strong>æ— å‚æ„é€ æ–¹æ³•</strong></p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token class-name">HashMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>loadFactor <span class="token operator">=</span> DEFAULT_LOAD_FACTOR<span class="token punctuation">;</span> 
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><strong>è®¾ç½®åˆå§‹å®¹é‡ï¼Œå¹¶ä½¿ç”¨é»˜è®¤çš„åŠ è½½å› å­0.75</strong></p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token class-name">HashMap</span><span class="token punctuation">(</span><span class="token keyword">int</span> initialCapacity<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">(</span>initialCapacity<span class="token punctuation">,</span> DEFAULT_LOAD_FACTOR<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><strong>è®¾ç½®åˆå§‹å®¹é‡å’ŒåŠ è½½å› å­</strong></p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token class-name">HashMap</span><span class="token punctuation">(</span><span class="token keyword">int</span> initialCapacity<span class="token punctuation">,</span> <span class="token keyword">float</span> loadFactor<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>initialCapacity <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">IllegalArgumentException</span><span class="token punctuation">(</span><span class="token string">&quot;Illegal initial capacity: &quot;</span> <span class="token operator">+</span>
                                               initialCapacity<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>initialCapacity <span class="token operator">&gt;</span> MAXIMUM_CAPACITY<span class="token punctuation">)</span>
            initialCapacity <span class="token operator">=</span> MAXIMUM_CAPACITY<span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>loadFactor <span class="token operator">&lt;=</span> <span class="token number">0</span> <span class="token operator">||</span> <span class="token class-name">Float</span><span class="token punctuation">.</span><span class="token function">isNaN</span><span class="token punctuation">(</span>loadFactor<span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">IllegalArgumentException</span><span class="token punctuation">(</span><span class="token string">&quot;Illegal load factor: &quot;</span> <span class="token operator">+</span>
                                               loadFactor<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>loadFactor <span class="token operator">=</span> loadFactor<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>threshold <span class="token operator">=</span> <span class="token function">tableSizeFor</span><span class="token punctuation">(</span>initialCapacity<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p><strong>ä¼ å…¥ä¸€ä¸ªMapï¼Œç„¶åæŠŠè¯¥Mapè½¬ä¸ºhashMap</strong></p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token class-name">HashMap</span><span class="token punctuation">(</span><span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">K</span><span class="token punctuation">,</span> <span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> m<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>loadFactor <span class="token operator">=</span> DEFAULT_LOAD_FACTOR<span class="token punctuation">;</span>
        <span class="token function">putMapEntries</span><span class="token punctuation">(</span>m<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
 
 
    <span class="token keyword">final</span> <span class="token keyword">void</span> <span class="token function">putMapEntries</span><span class="token punctuation">(</span><span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">K</span><span class="token punctuation">,</span> <span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> m<span class="token punctuation">,</span> <span class="token keyword">boolean</span> evict<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//è·å–è¯¥mapçš„å®é™…é•¿åº¦</span>
        <span class="token keyword">int</span> s <span class="token operator">=</span> m<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>s <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">//åˆ¤æ–­tableæ˜¯å¦åˆå§‹åŒ–ï¼Œå¦‚æœæ²¡æœ‰åˆå§‹åŒ–</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>table <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// pre-size</span>
                <span class="token comment">/**æ±‚å‡ºéœ€è¦çš„å®¹é‡ï¼Œå› ä¸ºå®é™…ä½¿ç”¨çš„é•¿åº¦=å®¹é‡*0.75å¾—æ¥çš„ï¼Œ+1æ˜¯å› ä¸ºå°æ•°ç›¸é™¤ï¼ŒåŸºæœ¬éƒ½ä¸ä¼šæ˜¯æ•´æ•°ï¼Œå®¹é‡å¤§å°ä¸èƒ½ä¸ºå°æ•°çš„ï¼Œåé¢è½¬æ¢ä¸ºintï¼Œå¤šä½™çš„å°æ•°å°±è¦è¢«ä¸¢æ‰ï¼Œæ‰€ä»¥+1ï¼Œä¾‹å¦‚ï¼Œmapå®é™…é•¿åº¦22ï¼Œ22/0.75=29.3,æ‰€éœ€è¦çš„å®¹é‡è‚¯å®šä¸º30ï¼Œæœ‰äººä¼šé—®å¦‚æœåˆšåˆšå¥½é™¤å¾—æ•´æ•°å‘¢ï¼Œé™¤å¾—æ•´æ•°çš„è¯ï¼Œå®¹é‡å¤§å°å¤š1ä¹Ÿæ²¡ä»€ä¹ˆå½±å“**/</span>
                <span class="token keyword">float</span> ft <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">float</span><span class="token punctuation">)</span>s <span class="token operator">/</span> loadFactor<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1.0F</span><span class="token punctuation">;</span>
                <span class="token comment">//åˆ¤æ–­è¯¥å®¹é‡å¤§å°æ˜¯å¦è¶…å‡ºä¸Šé™ã€‚</span>
                <span class="token keyword">int</span> t <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>ft <span class="token operator">&lt;</span> <span class="token punctuation">(</span><span class="token keyword">float</span><span class="token punctuation">)</span>MAXIMUM_CAPACITY<span class="token punctuation">)</span> <span class="token operator">?</span>
                         <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span>ft <span class="token operator">:</span> MAXIMUM_CAPACITY<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token comment">/**å¯¹ä¸´ç•Œå€¼è¿›è¡Œåˆå§‹åŒ–ï¼ŒtableSizeFor(t)è¿™ä¸ªæ–¹æ³•ä¼šè¿”å›å¤§äºtå€¼çš„ï¼Œä¸”ç¦»å…¶æœ€è¿‘çš„2æ¬¡å¹‚ï¼Œä¾‹å¦‚tä¸º29ï¼Œåˆ™è¿”å›çš„å€¼æ˜¯32**/</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>t <span class="token operator">&gt;</span> threshold<span class="token punctuation">)</span>
                    threshold <span class="token operator">=</span> <span class="token function">tableSizeFor</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token comment">//å¦‚æœtableå·²ç»åˆå§‹åŒ–ï¼Œåˆ™è¿›è¡Œæ‰©å®¹æ“ä½œï¼Œresize()å°±æ˜¯æ‰©å®¹ã€‚</span>
            <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>s <span class="token operator">&gt;</span> threshold<span class="token punctuation">)</span>
                <span class="token function">resize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//éå†ï¼ŒæŠŠmapä¸­çš„æ•°æ®è½¬åˆ°hashMapä¸­ã€‚</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Map</span><span class="token punctuation">.</span><span class="token class-name">Entry</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">K</span><span class="token punctuation">,</span> <span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> e <span class="token operator">:</span> m<span class="token punctuation">.</span><span class="token function">entrySet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">K</span> key <span class="token operator">=</span> e<span class="token punctuation">.</span><span class="token function">getKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">V</span> value <span class="token operator">=</span> e<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token function">putVal</span><span class="token punctuation">(</span><span class="token function">hash</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">,</span> key<span class="token punctuation">,</span> value<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> evict<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br></div></div><h3 id="put-æ·»åŠ ä¸€ä¸ªé”®å€¼å¯¹-æ‰©å®¹æœºåˆ¶"><a href="#put-æ·»åŠ ä¸€ä¸ªé”®å€¼å¯¹-æ‰©å®¹æœºåˆ¶" class="header-anchor">#</a> put()ï¼šæ·»åŠ ä¸€ä¸ªé”®å€¼å¯¹/æ‰©å®¹æœºåˆ¶</h3> <p>å‘mapä¸­æ·»åŠ å€¼(è¿”å›è¿™ä¸ªkeyä»¥å‰çš„å€¼,å¦‚æœæ²¡æœ‰è¿”å›null)</p> <p><img src="/assets/img/principle_diagram_of_HashMap_put.323f0968.png" alt="HashMapçš„putåŸç†å›¾"></p> <p><strong>è®¡ç®—hashå€¼</strong></p> <p>å…ˆè·å–åˆ°keyçš„hashCodeï¼Œç„¶åè¿›è¡Œç§»ä½å†è¿›è¡Œå¼‚æˆ–è¿ç®—ç®—å‡ºè¦æ’å…¥çš„ç´¢å¼•ï¼Œä¸ºä»€ä¹ˆè¿™ä¹ˆå¤æ‚ï¼Œä¸ç”¨æƒ³è‚¯å®šæ˜¯ä¸ºäº†å‡å°‘hashå†²çªã€‚å¦‚æœkeyä¸ºç©ºå°±è¿”å›ç´¢å¼•0ï¼Œä¹Ÿå°±æ˜¯è¯´æ’å…¥åˆ°ç¬¬ä¸€ä¸ªç»“ç‚¹ã€‚</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>    <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> <span class="token function">hash</span><span class="token punctuation">(</span><span class="token class-name">Object</span> key<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">int</span> h<span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>key <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token number">0</span> <span class="token operator">:</span> <span class="token punctuation">(</span>h <span class="token operator">=</span> key<span class="token punctuation">.</span><span class="token function">hashCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">^</span> <span class="token punctuation">(</span>h <span class="token operator">&gt;&gt;&gt;</span> <span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><strong>æ–¹æ³•æºç </strong></p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token class-name">V</span> <span class="token function">put</span><span class="token punctuation">(</span><span class="token class-name">K</span> key<span class="token punctuation">,</span> <span class="token class-name">V</span> value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">/**å››ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªhashå€¼ï¼Œç¬¬å››ä¸ªå‚æ•°è¡¨ç¤ºå¦‚æœè¯¥keyå­˜åœ¨å€¼ï¼Œå¦‚æœä¸ºnullçš„è¯ï¼Œåˆ™æ’å…¥æ–°çš„valueï¼Œæœ€åä¸€ä¸ªå‚æ•°ï¼Œåœ¨hashMapä¸­æ²¡æœ‰ç”¨ï¼Œå¯ä»¥ä¸ç”¨ç®¡ï¼Œä½¿ç”¨é»˜è®¤çš„å³å¯**/</span>
        <span class="token keyword">return</span> <span class="token function">putVal</span><span class="token punctuation">(</span><span class="token function">hash</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">,</span> key<span class="token punctuation">,</span> value<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
 
    <span class="token keyword">final</span> <span class="token class-name">V</span> <span class="token function">putVal</span><span class="token punctuation">(</span><span class="token keyword">int</span> hash<span class="token punctuation">,</span> <span class="token class-name">K</span> key<span class="token punctuation">,</span> <span class="token class-name">V</span> value<span class="token punctuation">,</span> <span class="token keyword">boolean</span> onlyIfAbsent<span class="token punctuation">,</span>
                   <span class="token keyword">boolean</span> evict<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//tab å“ˆå¸Œæ•°ç»„ï¼Œp è¯¥å“ˆå¸Œæ¡¶çš„é¦–èŠ‚ç‚¹ï¼Œn hashMapçš„é•¿åº¦ï¼Œi è®¡ç®—å‡ºçš„æ•°ç»„ä¸‹æ ‡</span>
        <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">[</span><span class="token punctuation">]</span> tab<span class="token punctuation">;</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> p<span class="token punctuation">;</span> <span class="token keyword">int</span> n<span class="token punctuation">,</span> i<span class="token punctuation">;</span>
        <span class="token comment">//è·å–é•¿åº¦å¹¶è¿›è¡Œæ‰©å®¹ï¼Œä½¿ç”¨çš„æ˜¯æ‡’åŠ è½½ï¼Œtableä¸€å¼€å§‹æ˜¯æ²¡æœ‰åŠ è½½çš„ï¼Œç­‰putåæ‰å¼€å§‹åŠ è½½</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>tab <span class="token operator">=</span> table<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> <span class="token punctuation">(</span>n <span class="token operator">=</span> tab<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>
            n <span class="token operator">=</span> <span class="token punctuation">(</span>tab <span class="token operator">=</span> <span class="token function">resize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span>
        <span class="token comment">/**å¦‚æœè®¡ç®—å‡ºçš„è¯¥å“ˆå¸Œæ¡¶çš„ä½ç½®æ²¡æœ‰å€¼ï¼Œåˆ™æŠŠæ–°æ’å…¥çš„key-valueæ”¾åˆ°æ­¤å¤„ï¼Œæ­¤å¤„å°±ç®—æ²¡æœ‰æ’å…¥æˆåŠŸï¼Œä¹Ÿå°±æ˜¯å‘ç”Ÿå“ˆå¸Œå†²çªæ—¶ä¹Ÿä¼šæŠŠå“ˆå¸Œæ¡¶çš„é¦–èŠ‚ç‚¹èµ‹äºˆp**/</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>p <span class="token operator">=</span> tab<span class="token punctuation">[</span>i <span class="token operator">=</span> <span class="token punctuation">(</span>n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span> hash<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
            tab<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">newNode</span><span class="token punctuation">(</span>hash<span class="token punctuation">,</span> key<span class="token punctuation">,</span> value<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//å‘ç”Ÿå“ˆå¸Œå†²çªçš„å‡ ç§æƒ…å†µ</span>
        <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token comment">// e ä¸´æ—¶èŠ‚ç‚¹çš„ä½œç”¨ï¼Œ k å­˜æ”¾è¯¥å½“å‰èŠ‚ç‚¹çš„key </span>
            <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> e<span class="token punctuation">;</span> <span class="token class-name">K</span> k<span class="token punctuation">;</span>
            <span class="token comment">//ç¬¬ä¸€ç§ï¼Œæ’å…¥çš„key-valueçš„hashå€¼ï¼Œkeyéƒ½ä¸å½“å‰èŠ‚ç‚¹çš„ç›¸ç­‰ï¼Œe = pï¼Œåˆ™è¡¨ç¤ºä¸ºé¦–èŠ‚ç‚¹</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>p<span class="token punctuation">.</span>hash <span class="token operator">==</span> hash <span class="token operator">&amp;&amp;</span>
                <span class="token punctuation">(</span><span class="token punctuation">(</span>k <span class="token operator">=</span> p<span class="token punctuation">.</span>key<span class="token punctuation">)</span> <span class="token operator">==</span> key <span class="token operator">||</span> <span class="token punctuation">(</span>key <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> key<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>k<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                e <span class="token operator">=</span> p<span class="token punctuation">;</span>
            <span class="token comment">//ç¬¬äºŒç§ï¼Œhashå€¼ä¸ç­‰äºé¦–èŠ‚ç‚¹ï¼Œåˆ¤æ–­è¯¥pæ˜¯å¦å±äºçº¢é»‘æ ‘çš„èŠ‚ç‚¹</span>
            <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>p <span class="token keyword">instanceof</span> <span class="token class-name">TreeNode</span><span class="token punctuation">)</span>
                <span class="token comment">/**ä¸ºçº¢é»‘æ ‘çš„èŠ‚ç‚¹ï¼Œåˆ™åœ¨çº¢é»‘æ ‘ä¸­è¿›è¡Œæ·»åŠ ï¼Œå¦‚æœè¯¥èŠ‚ç‚¹å·²ç»å­˜åœ¨ï¼Œåˆ™è¿”å›è¯¥èŠ‚ç‚¹ï¼ˆä¸ä¸ºnullï¼‰ï¼Œè¯¥å€¼å¾ˆé‡è¦ï¼Œç”¨æ¥åˆ¤æ–­putæ“ä½œæ˜¯å¦æˆåŠŸï¼Œå¦‚æœæ·»åŠ æˆåŠŸè¿”å›null**/</span>
                e <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">TreeNode</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">)</span>p<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">putTreeVal</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> tab<span class="token punctuation">,</span> hash<span class="token punctuation">,</span> key<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//ç¬¬ä¸‰ç§ï¼Œhashå€¼ä¸ç­‰äºé¦–èŠ‚ç‚¹ï¼Œä¸ä¸ºçº¢é»‘æ ‘çš„èŠ‚ç‚¹ï¼Œåˆ™ä¸ºé“¾è¡¨çš„èŠ‚ç‚¹</span>
            <span class="token keyword">else</span> <span class="token punctuation">{</span>
                <span class="token comment">//éå†è¯¥é“¾è¡¨</span>
                <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> binCount <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token punctuation">;</span> <span class="token operator">++</span>binCount<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token comment">//å¦‚æœæ‰¾åˆ°å°¾éƒ¨ï¼Œåˆ™è¡¨æ˜æ·»åŠ çš„key-valueæ²¡æœ‰é‡å¤ï¼Œåœ¨å°¾éƒ¨è¿›è¡Œæ·»åŠ </span>
                    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>e <span class="token operator">=</span> p<span class="token punctuation">.</span>next<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        p<span class="token punctuation">.</span>next <span class="token operator">=</span> <span class="token function">newNode</span><span class="token punctuation">(</span>hash<span class="token punctuation">,</span> key<span class="token punctuation">,</span> value<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token comment">//åˆ¤æ–­æ˜¯å¦è¦è½¬æ¢ä¸ºçº¢é»‘æ ‘ç»“æ„</span>
                        <span class="token keyword">if</span> <span class="token punctuation">(</span>binCount <span class="token operator">&gt;=</span> TREEIFY_THRESHOLD <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> 
                            <span class="token function">treeifyBin</span><span class="token punctuation">(</span>tab<span class="token punctuation">,</span> hash<span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token keyword">break</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                    <span class="token comment">//å¦‚æœé“¾è¡¨ä¸­æœ‰é‡å¤çš„keyï¼Œeåˆ™ä¸ºå½“å‰é‡å¤çš„èŠ‚ç‚¹ï¼Œç»“æŸå¾ªç¯</span>
                    <span class="token keyword">if</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>hash <span class="token operator">==</span> hash <span class="token operator">&amp;&amp;</span>
                        <span class="token punctuation">(</span><span class="token punctuation">(</span>k <span class="token operator">=</span> e<span class="token punctuation">.</span>key<span class="token punctuation">)</span> <span class="token operator">==</span> key <span class="token operator">||</span> <span class="token punctuation">(</span>key <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> key<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>k<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                        <span class="token keyword">break</span><span class="token punctuation">;</span>
                    p <span class="token operator">=</span> e<span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
            <span class="token comment">//æœ‰é‡å¤çš„keyï¼Œåˆ™ç”¨å¾…æ’å…¥å€¼è¿›è¡Œè¦†ç›–ï¼Œè¿”å›æ—§å€¼ã€‚</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>e <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
                <span class="token class-name">V</span> oldValue <span class="token operator">=</span> e<span class="token punctuation">.</span>value<span class="token punctuation">;</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>onlyIfAbsent <span class="token operator">||</span> oldValue <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
                    e<span class="token punctuation">.</span>value <span class="token operator">=</span> value<span class="token punctuation">;</span>
                <span class="token function">afterNodeAccess</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">return</span> oldValue<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token comment">//åˆ°äº†æ­¤æ­¥éª¤ï¼Œåˆ™è¡¨æ˜å¾…æ’å…¥çš„key-valueæ˜¯æ²¡æœ‰keyçš„é‡å¤ï¼Œå› ä¸ºæ’å…¥æˆåŠŸeèŠ‚ç‚¹çš„å€¼ä¸ºnull</span>
        <span class="token comment">//ä¿®æ”¹æ¬¡æ•°+1</span>
        <span class="token operator">++</span>modCount<span class="token punctuation">;</span>
        <span class="token comment">//å®é™…é•¿åº¦+1ï¼Œåˆ¤æ–­æ˜¯å¦å¤§äºä¸´ç•Œå€¼ï¼Œå¤§äºåˆ™æ‰©å®¹</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">++</span>size <span class="token operator">&gt;</span> threshold<span class="token punctuation">)</span>
            <span class="token function">resize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">afterNodeInsertion</span><span class="token punctuation">(</span>evict<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//æ·»åŠ æˆåŠŸ</span>
        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br></div></div><h3 id="resize-æ‰©å®¹æ“ä½œ"><a href="#resize-æ‰©å®¹æ“ä½œ" class="header-anchor">#</a> resize()æ‰©å®¹æ“ä½œ</h3> <p>å‚è€ƒ</p> <blockquote><ul><li><a href="https://blog.csdn.net/weixin_43689776/article/details/95335330?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522159897939119724836748682%2522%252C%2522scm%2522%253A%252220140713.130102334.pc%255Fblog.%2522%257D&amp;request_id=159897939119724836748682&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~blog~first_rank_v2~rank_blog_default-1-95335330.pc_v2_rank_blog_default&amp;utm_term=%E6%89%A9%E5%AE%B9&amp;spm=1018.2118.3001.4187" target="_blank" rel="noopener noreferrer">HashMapçš„åº•å±‚å®ç°åŸç†å’Œä¸ºä½•æ‰©å®¹ä¸º2çš„æ¬¡æ•°å¹‚åŠä¸HashTableçš„åŒºåˆ«ã€‚<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://zhuanlan.zhihu.com/p/114363420" target="_blank" rel="noopener noreferrer">HashMapçš„æ‰©å®¹æœºåˆ¶<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></blockquote> <p>â€‹	å½“hashmapä¸­çš„å…ƒç´ è¶Šæ¥è¶Šå¤šçš„æ—¶å€™ï¼Œç¢°æ’çš„å‡ ç‡ä¹Ÿå°±è¶Šæ¥è¶Šé«˜ï¼ˆå› ä¸ºæ•°ç»„çš„é•¿åº¦æ˜¯å›ºå®šçš„ï¼‰ï¼Œæ‰€ä»¥ä¸ºäº†æé«˜æŸ¥è¯¢çš„æ•ˆç‡ï¼Œå°±è¦å¯¹hashmapçš„æ•°ç»„è¿›è¡Œæ‰©å®¹ï¼Œæ•°ç»„æ‰©å®¹è¿™ä¸ªæ“ä½œä¹Ÿä¼šå‡ºç°åœ¨ArrayListä¸­ï¼Œæ‰€ä»¥è¿™æ˜¯ä¸€ä¸ªé€šç”¨çš„æ“ä½œï¼Œå¾ˆå¤šäººå¯¹å®ƒçš„æ€§èƒ½è¡¨ç¤ºè¿‡æ€€ç–‘ï¼Œä¸è¿‡æƒ³æƒ³æˆ‘ä»¬çš„â€œå‡æ‘Šâ€åŸç†ï¼Œå°±é‡Šç„¶äº†ï¼Œè€Œåœ¨hashmapæ•°ç»„æ‰©å®¹ä¹‹åï¼Œæœ€æ¶ˆè€—æ€§èƒ½çš„ç‚¹å°±å‡ºç°äº†ï¼šåŸæ•°ç»„ä¸­çš„æ•°æ®å¿…é¡»é‡æ–°è®¡ç®—å…¶åœ¨æ–°æ•°ç»„ä¸­çš„ä½ç½®ï¼Œå¹¶æ”¾è¿›å»ï¼Œè¿™å°±æ˜¯resizeã€‚</p> <p>â€‹    é‚£ä¹ˆhashmapä»€ä¹ˆæ—¶å€™è¿›è¡Œæ‰©å®¹å‘¢ï¼Ÿ<strong>å½“hashmapä¸­çš„å…ƒç´ ä¸ªæ•°è¶…è¿‡é˜ˆå€¼å¤§å°threshold</strong>æ—¶ï¼Œå°±ä¼šè¿›è¡Œæ•°ç»„æ‰©å®¹**ï¼ŒloadFactorçš„é»˜è®¤å€¼ä¸º0.75ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œæ•°ç»„å¤§å°ä¸º16ï¼Œé‚£ä¹ˆå½“hashmapä¸­å…ƒç´ ä¸ªæ•°è¶…è¿‡<strong>16 Ã— 0.75 = 12</strong>çš„æ—¶å€™ï¼Œå°±æŠŠæ•°ç»„çš„å¤§å°æ‰©å±•ä¸º<strong>2 Ã— 16=32</strong>ï¼Œ<strong>å³æ‰©å¤§ä¸€å€ï¼Œç„¶åé‡æ–°è®¡ç®—æ¯ä¸ªå…ƒç´ åœ¨æ•°ç»„ä¸­çš„ä½ç½®ï¼Œè€Œè¿™æ˜¯ä¸€ä¸ªéå¸¸æ¶ˆè€—æ€§èƒ½çš„æ“ä½œ</strong>ï¼Œæ‰€ä»¥å¦‚æœæˆ‘ä»¬å·²ç»é¢„çŸ¥hashmapä¸­å…ƒç´ çš„ä¸ªæ•°ï¼Œé‚£ä¹ˆé¢„è®¾å…ƒç´ çš„ä¸ªæ•°èƒ½å¤Ÿæœ‰æ•ˆçš„æé«˜hashmapçš„æ€§èƒ½ã€‚æ¯”å¦‚è¯´ï¼Œæˆ‘ä»¬æœ‰1000ä¸ªå…ƒç´ new HashMap(1000), ä½†æ˜¯ç†è®ºä¸Šæ¥è®²new HashMap(1024)æ›´åˆé€‚ï¼Œä¸è¿‡ä¸Šé¢anneguå·²ç»è¯´è¿‡ï¼Œå³ä½¿æ˜¯1000ï¼Œhashmapä¹Ÿè‡ªåŠ¨ä¼šå°†å…¶è®¾ç½®ä¸º1024ã€‚ ä½†æ˜¯new HashMap(1024)è¿˜ä¸æ˜¯æ›´åˆé€‚çš„ï¼Œå› ä¸º0**.75 Ã— 1000 &lt; 1000**, ä¹Ÿå°±æ˜¯è¯´ä¸ºäº†è®©<strong>0.75 Ã— size &gt; 1000</strong>, æˆ‘ä»¬å¿…é¡»è¿™æ ·new HashMap(2048)æ‰æœ€åˆé€‚ï¼Œæ—¢è€ƒè™‘äº†&amp;çš„é—®é¢˜ï¼Œä¹Ÿé¿å…äº†resizeçš„é—®é¢˜ã€‚</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>    <span class="token keyword">final</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">resize</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//æŠŠæ²¡æ’å…¥ä¹‹å‰çš„å“ˆå¸Œæ•°ç»„åšæˆ‘è¯¶oldTal</span>
        <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">[</span><span class="token punctuation">]</span> oldTab <span class="token operator">=</span> table<span class="token punctuation">;</span>
        <span class="token comment">//oldçš„é•¿åº¦</span>
        <span class="token keyword">int</span> oldCap <span class="token operator">=</span> <span class="token punctuation">(</span>oldTab <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token number">0</span> <span class="token operator">:</span> oldTab<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
        <span class="token comment">//oldçš„ä¸´ç•Œå€¼</span>
        <span class="token keyword">int</span> oldThr <span class="token operator">=</span> threshold<span class="token punctuation">;</span>
        <span class="token comment">//åˆå§‹åŒ–newçš„é•¿åº¦å’Œä¸´ç•Œå€¼</span>
        <span class="token keyword">int</span> newCap<span class="token punctuation">,</span> newThr <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token comment">//oldCap &gt; 0ä¹Ÿå°±æ˜¯è¯´ä¸æ˜¯é¦–æ¬¡åˆå§‹åŒ–ï¼Œå› ä¸ºhashMapç”¨çš„æ˜¯æ‡’åŠ è½½</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>oldCap <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">//å¤§äºæœ€å¤§å€¼</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>oldCap <span class="token operator">&gt;=</span> MAXIMUM_CAPACITY<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">//ä¸´ç•Œå€¼ä¸ºæ•´æ•°çš„æœ€å¤§å€¼</span>
                threshold <span class="token operator">=</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span>MAX_VALUE<span class="token punctuation">;</span>
                <span class="token keyword">return</span> oldTab<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token comment">//æ ‡è®°##ï¼Œå…¶å®ƒæƒ…å†µï¼Œæ‰©å®¹ä¸¤å€ï¼Œå¹¶ä¸”æ‰©å®¹åçš„é•¿åº¦è¦å°äºæœ€å¤§å€¼ï¼Œoldé•¿åº¦ä¹Ÿè¦å¤§äº16</span>
            <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>newCap <span class="token operator">=</span> oldCap <span class="token operator">&lt;&lt;</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token generics"><span class="token punctuation">&lt;</span> MAXIMUM_CAPACITY <span class="token operator">&amp;</span><span class="token operator">&amp;</span>
                     oldCap <span class="token punctuation">&gt;</span></span><span class="token operator">=</span> DEFAULT_INITIAL_CAPACITY<span class="token punctuation">)</span>
                <span class="token comment">//ä¸´ç•Œå€¼ä¹Ÿæ‰©å®¹ä¸ºoldçš„ä¸´ç•Œå€¼2å€</span>
                newThr <span class="token operator">=</span> oldThr <span class="token operator">&lt;&lt;</span> <span class="token number">1</span><span class="token punctuation">;</span> 
        <span class="token punctuation">}</span>
        <span class="token comment">/**å¦‚æœoldCap&lt;0ï¼Œä½†æ˜¯å·²ç»åˆå§‹åŒ–äº†ï¼ŒåƒæŠŠå…ƒç´ åˆ é™¤å®Œä¹‹åçš„æƒ…å†µï¼Œé‚£ä¹ˆå®ƒçš„ä¸´ç•Œå€¼è‚¯å®šè¿˜å­˜åœ¨ï¼Œ        
           å¦‚æœæ˜¯é¦–æ¬¡åˆå§‹åŒ–ï¼Œå®ƒçš„ä¸´ç•Œå€¼åˆ™ä¸º0
        **/</span>
        <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>oldThr <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> 
            newCap <span class="token operator">=</span> oldThr<span class="token punctuation">;</span>
        <span class="token comment">//é¦–æ¬¡åˆå§‹åŒ–ï¼Œç»™ä¸é»˜è®¤çš„å€¼</span>
        <span class="token keyword">else</span> <span class="token punctuation">{</span>               
            newCap <span class="token operator">=</span> DEFAULT_INITIAL_CAPACITY<span class="token punctuation">;</span>
            <span class="token comment">//ä¸´ç•Œå€¼ç­‰äºå®¹é‡*åŠ è½½å› å­</span>
            newThr <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">(</span>DEFAULT_LOAD_FACTOR <span class="token operator">*</span> DEFAULT_INITIAL_CAPACITY<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">//æ­¤å¤„çš„ifä¸ºä¸Šé¢æ ‡è®°##çš„è¡¥å……ï¼Œä¹Ÿå°±æ˜¯åˆå§‹åŒ–æ—¶å®¹é‡å°äºé»˜è®¤å€¼16çš„ï¼Œæ­¤æ—¶newThræ²¡æœ‰èµ‹å€¼</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>newThr <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">//newçš„ä¸´ç•Œå€¼</span>
            <span class="token keyword">float</span> ft <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">float</span><span class="token punctuation">)</span>newCap <span class="token operator">*</span> loadFactor<span class="token punctuation">;</span>
            <span class="token comment">//åˆ¤æ–­æ˜¯å¦newå®¹é‡æ˜¯å¦å¤§äºæœ€å¤§å€¼ï¼Œä¸´ç•Œå€¼æ˜¯å¦å¤§äºæœ€å¤§å€¼</span>
            newThr <span class="token operator">=</span> <span class="token punctuation">(</span>newCap <span class="token operator">&lt;</span> MAXIMUM_CAPACITY <span class="token operator">&amp;&amp;</span> ft <span class="token operator">&lt;</span> <span class="token punctuation">(</span><span class="token keyword">float</span><span class="token punctuation">)</span>MAXIMUM_CAPACITY <span class="token operator">?</span>
                      <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span>ft <span class="token operator">:</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span>MAX_VALUE<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">//æŠŠä¸Šé¢å„ç§æƒ…å†µåˆ†æå‡ºçš„ä¸´ç•Œå€¼ï¼Œåœ¨æ­¤å¤„çœŸæ­£è¿›è¡Œæ”¹å˜ï¼Œä¹Ÿå°±æ˜¯å®¹é‡å’Œä¸´ç•Œå€¼éƒ½æ”¹å˜äº†ã€‚</span>
        threshold <span class="token operator">=</span> newThr<span class="token punctuation">;</span>
        <span class="token comment">//è¡¨ç¤ºå¿½ç•¥è¯¥è­¦å‘Š</span>
        <span class="token annotation punctuation">@SuppressWarnings</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&quot;rawtypes&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;unchecked&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token comment">//åˆå§‹åŒ–</span>
            <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">[</span><span class="token punctuation">]</span> newTab <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token keyword">new</span> <span class="token class-name">Node</span><span class="token punctuation">[</span>newCap<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token comment">//èµ‹äºˆå½“å‰çš„table</span>
        table <span class="token operator">=</span> newTab<span class="token punctuation">;</span>
        <span class="token comment">//æ­¤å¤„è‡ªç„¶æ˜¯æŠŠoldä¸­çš„å…ƒç´ ï¼Œéå†åˆ°newä¸­</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>oldTab <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> oldCap<span class="token punctuation">;</span> <span class="token operator">++</span>j<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">//ä¸´æ—¶å˜é‡</span>
                <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> e<span class="token punctuation">;</span>
                <span class="token comment">//å½“å‰å“ˆå¸Œæ¡¶çš„ä½ç½®å€¼ä¸ä¸ºnullï¼Œä¹Ÿå°±æ˜¯æ•°ç»„ä¸‹æ ‡å¤„æœ‰å€¼ï¼Œå› ä¸ºæœ‰å€¼è¡¨ç¤ºå¯èƒ½ä¼šå‘ç”Ÿå†²çª</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>e <span class="token operator">=</span> oldTab<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token comment">//æŠŠå·²ç»èµ‹å€¼ä¹‹åçš„å˜é‡ç½®ä½nullï¼Œå½“ç„¶æ˜¯ä¸ºäº†å¥½å›æ”¶ï¼Œé‡Šæ”¾å†…å­˜</span>
                    oldTab<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
                    <span class="token comment">//å¦‚æœä¸‹æ ‡å¤„çš„èŠ‚ç‚¹æ²¡æœ‰ä¸‹ä¸€ä¸ªå…ƒç´ </span>
                    <span class="token keyword">if</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>next <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
                        <span class="token comment">//æŠŠè¯¥å˜é‡çš„å€¼å­˜å…¥newCapä¸­ï¼Œe.hash &amp; (newCap - 1)å¹¶ä¸ç­‰äºj</span>
                        newTab<span class="token punctuation">[</span>e<span class="token punctuation">.</span>hash <span class="token operator">&amp;</span> <span class="token punctuation">(</span>newCap <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">=</span> e<span class="token punctuation">;</span>
                    <span class="token comment">//è¯¥èŠ‚ç‚¹ä¸ºçº¢é»‘æ ‘ç»“æ„ï¼Œä¹Ÿå°±æ˜¯å­˜åœ¨å“ˆå¸Œå†²çªï¼Œè¯¥å“ˆå¸Œæ¡¶ä¸­æœ‰å¤šä¸ªå…ƒç´ </span>
                    <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>e <span class="token keyword">instanceof</span> <span class="token class-name">TreeNode</span><span class="token punctuation">)</span>
                        <span class="token comment">//æŠŠæ­¤æ ‘è¿›è¡Œè½¬ç§»åˆ°newCapä¸­</span>
                        <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">TreeNode</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">)</span>e<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> newTab<span class="token punctuation">,</span> j<span class="token punctuation">,</span> oldCap<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token keyword">else</span> <span class="token punctuation">{</span> <span class="token comment">/**æ­¤å¤„è¡¨ç¤ºä¸ºé“¾è¡¨ç»“æ„ï¼ŒåŒæ ·æŠŠé“¾è¡¨è½¬ç§»åˆ°newCapä¸­ï¼Œå°±æ˜¯æŠŠé“¾è¡¨éå†åï¼ŒæŠŠå€¼è½¬è¿‡å»ï¼Œåœ¨ç½®ä½null**/</span>
                        <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> loHead <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">,</span> loTail <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
                        <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> hiHead <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">,</span> hiTail <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
                        <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> next<span class="token punctuation">;</span>
                        <span class="token keyword">do</span> <span class="token punctuation">{</span>
                            next <span class="token operator">=</span> e<span class="token punctuation">.</span>next<span class="token punctuation">;</span>
                            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>hash <span class="token operator">&amp;</span> oldCap<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                                <span class="token keyword">if</span> <span class="token punctuation">(</span>loTail <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
                                    loHead <span class="token operator">=</span> e<span class="token punctuation">;</span>
                                <span class="token keyword">else</span>
                                    loTail<span class="token punctuation">.</span>next <span class="token operator">=</span> e<span class="token punctuation">;</span>
                                loTail <span class="token operator">=</span> e<span class="token punctuation">;</span>
                            <span class="token punctuation">}</span>
                            <span class="token keyword">else</span> <span class="token punctuation">{</span>
                                <span class="token keyword">if</span> <span class="token punctuation">(</span>hiTail <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
                                    hiHead <span class="token operator">=</span> e<span class="token punctuation">;</span>
                                <span class="token keyword">else</span>
                                    hiTail<span class="token punctuation">.</span>next <span class="token operator">=</span> e<span class="token punctuation">;</span>
                                hiTail <span class="token operator">=</span> e<span class="token punctuation">;</span>
                            <span class="token punctuation">}</span>
                        <span class="token punctuation">}</span> <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>e <span class="token operator">=</span> next<span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token keyword">if</span> <span class="token punctuation">(</span>loTail <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                            loTail<span class="token punctuation">.</span>next <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
                            newTab<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> loHead<span class="token punctuation">;</span>
                        <span class="token punctuation">}</span>
                        <span class="token keyword">if</span> <span class="token punctuation">(</span>hiTail <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                            hiTail<span class="token punctuation">.</span>next <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
                            newTab<span class="token punctuation">[</span>j <span class="token operator">+</span> oldCap<span class="token punctuation">]</span> <span class="token operator">=</span> hiHead<span class="token punctuation">;</span>
                        <span class="token punctuation">}</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token comment">//è¿”å›æ‰©å®¹åçš„hashMap</span>
        <span class="token keyword">return</span> newTab<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br></div></div><h3 id="hashmap-çš„â»“åº¦ä¸ºä»€ä¹ˆæ˜¯2çš„å¹‚æ¬¡æ–¹"><a href="#hashmap-çš„â»“åº¦ä¸ºä»€ä¹ˆæ˜¯2çš„å¹‚æ¬¡æ–¹" class="header-anchor">#</a> HashMap çš„â»“åº¦ä¸ºä»€ä¹ˆæ˜¯2çš„å¹‚æ¬¡â½…</h3> <p>ä¸ºäº†èƒ½è®© HashMap å­˜å–â¾¼æ•ˆï¼Œå°½é‡å‡å°‘ç¢°æ’ï¼Œä¹Ÿå°±æ˜¯è¦å°½é‡æŠŠæ•°æ®åˆ†é…å‡åŒ€ã€‚æˆ‘ä»¬ä¸Šâ¾¯ä¹Ÿè®²åˆ°äº†è¿‡ äº†ï¼ŒHash å€¼çš„èŒƒå›´å€¼-2147483648åˆ°2147483647ï¼Œå‰ååŠ èµ·æ¥â¼¤æ¦‚40äº¿çš„æ˜ å°„ç©ºé—´ï¼Œåªè¦å“ˆå¸Œå‡½æ•°æ˜ å°„ å¾—â½è¾ƒå‡åŒ€æ¾æ•£ï¼Œâ¼€èˆ¬åº”â½¤æ˜¯å¾ˆéš¾å‡ºç°ç¢°æ’çš„ã€‚ä½†é—®é¢˜æ˜¯â¼€ä¸ª40äº¿â»“åº¦çš„æ•°ç»„ï¼Œå†…å­˜æ˜¯æ”¾ä¸ä¸‹çš„ã€‚æ‰€ä»¥ è¿™ä¸ªæ•£åˆ—å€¼æ˜¯ä¸èƒ½ç›´æ¥æ‹¿æ¥â½¤çš„ã€‚â½¤ä¹‹å‰è¿˜è¦å…ˆåšå¯¹æ•°ç»„çš„â»“åº¦å–æ¨¡è¿ç®—ï¼Œå¾—åˆ°çš„ä½™æ•°æ‰èƒ½â½¤æ¥è¦å­˜æ”¾ çš„ä½ç½®ä¹Ÿå°±æ˜¯å¯¹åº”çš„æ•°ç»„ä¸‹æ ‡ã€‚è¿™ä¸ªæ•°ç»„ä¸‹æ ‡çš„è®¡ç®—â½…æ³•æ˜¯â€œ <code>(n - 1) &amp; hash</code> â€ã€‚ï¼ˆnä»£è¡¨æ•°ç»„â»“ åº¦ï¼‰ã€‚è¿™ä¹Ÿå°±è§£é‡Šäº† HashMap çš„â»“åº¦ä¸ºä»€ä¹ˆæ˜¯2çš„å¹‚æ¬¡â½…ã€‚</p> <p>è¿™ä¸ªç®—æ³•åº”è¯¥å¦‚ä½•è®¾è®¡å‘¢ï¼Ÿ</p> <p>æˆ‘ä»¬â¾¸å…ˆå¯èƒ½ä¼šæƒ³åˆ°é‡‡â½¤%å–ä½™çš„æ“ä½œæ¥å®ç°ã€‚ä½†æ˜¯ï¼Œé‡ç‚¹æ¥äº†ï¼šâ€œå–ä½™(%)æ“ä½œä¸­å¦‚æœé™¤æ•°æ˜¯2çš„å¹‚æ¬¡åˆ™ ç­‰ä»·äºä¸å…¶é™¤æ•°å‡â¼€çš„ä¸(&amp;)æ“ä½œï¼ˆä¹Ÿå°±æ˜¯è¯´ hash%lengthdehash&amp;(length-1)çš„å‰ææ˜¯ length æ˜¯2çš„ n æ¬¡â½…ï¼›ï¼‰ã€‚â€ å¹¶ä¸” é‡‡â½¤â¼†è¿›åˆ¶ä½æ“ä½œ &amp;ï¼Œç›¸å¯¹äº%èƒ½å¤Ÿæâ¾¼è¿ç®—æ•ˆç‡ï¼Œè¿™å°±è§£é‡Šäº† HashMap çš„â»“åº¦ ä¸ºä»€ä¹ˆæ˜¯2çš„å¹‚æ¬¡â½…ã€‚</p> <h3 id="jdk1-8ä¸­hashmapå¦‚ä½•åº”å¯¹hashå†²çª"><a href="#jdk1-8ä¸­hashmapå¦‚ä½•åº”å¯¹hashå†²çª" class="header-anchor">#</a> JDK1.8ä¸­HashMapå¦‚ä½•åº”å¯¹hashå†²çªï¼Ÿ</h3> <p>å‚è€ƒ</p> <blockquote><ul><li><a href="https://blog.csdn.net/weixin_43689776/article/details/99999126?utm_medium=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-1.channel_param&amp;depth_1-utm_source=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-1.channel_param" target="_blank" rel="noopener noreferrer">JDK1.8ä¸­HashMapå¦‚ä½•åº”å¯¹hashå†²çª<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></blockquote> <h3 id="ä¸ºä»€ä¹ˆhashmapçº¿ç¨‹ä¸å®‰å…¨"><a href="#ä¸ºä»€ä¹ˆhashmapçº¿ç¨‹ä¸å®‰å…¨" class="header-anchor">#</a> ä¸ºä»€ä¹ˆHashMapçº¿ç¨‹ä¸å®‰å…¨</h3> <p>å‚è€ƒ</p> <blockquote><ul><li>https://blog.csdn.net/swpu_ocean/article/details/88917958</li></ul></blockquote> <p><strong>æ€»ç»“</strong></p> <blockquote><ul><li><strong>åœ¨JDK1.7ä¸­</strong>ï¼šå½“å¹¶å‘æ‰§è¡Œæ‰©å®¹æ“ä½œæ—¶ä¼šé€ æˆç¯å½¢é“¾å’Œæ•°æ®ä¸¢å¤±çš„æƒ…å†µã€‚</li> <li><strong>åœ¨JDK1.8ä¸­</strong>ï¼šåœ¨å¹¶å‘æ‰§è¡Œputæ“ä½œæ—¶ä¼šå‘ç”Ÿæ•°æ®è¦†ç›–çš„æƒ…å†µã€‚</li></ul></blockquote> <h3 id="ä¸ºä»€ä¹ˆç”¨çº¢é»‘æ ‘ä¸ç”¨avlæ ‘"><a href="#ä¸ºä»€ä¹ˆç”¨çº¢é»‘æ ‘ä¸ç”¨avlæ ‘" class="header-anchor">#</a> ä¸ºä»€ä¹ˆç”¨çº¢é»‘æ ‘ä¸ç”¨AVLæ ‘</h3> <p>å‚è€ƒ</p> <blockquote><ul><li>https://blog.csdn.net/21aspnet/article/details/88939297</li></ul></blockquote> <p>AVL</p> <blockquote><p>å®Œå…¨å¹³è¡¡äºŒå‰æ ‘</p></blockquote> <p>æœ€ä¸»è¦çš„ä¸€ç‚¹æ˜¯ï¼š</p> <p>åœ¨<code>CurrentHashMap</code>ä¸­æ˜¯åŠ é”äº†çš„ï¼Œå®é™…ä¸Šæ˜¯è¯»å†™é”ï¼Œå¦‚æœå†™å†²çªå°±ä¼šç­‰å¾…ï¼Œå¦‚æœæ’å…¥æ—¶é—´è¿‡é•¿å¿…ç„¶ç­‰å¾…æ—¶é—´æ›´é•¿ï¼Œè€Œçº¢é»‘æ ‘ç›¸å¯¹AVLæ ‘ä»–çš„æ’å…¥æ›´å¿«ï¼</p> <p>çº¢é»‘æ ‘å’ŒAVLæ ‘éƒ½æ˜¯<strong>æœ€å¸¸ç”¨çš„å¹³è¡¡äºŒå‰æœç´¢æ ‘</strong>ï¼Œå®ƒä»¬çš„æŸ¥æ‰¾ã€åˆ é™¤ã€ä¿®æ”¹éƒ½æ˜¯O(lgn) time</p> <p>AVLæ ‘å’Œçº¢é»‘æ ‘æœ‰å‡ ç‚¹æ¯”è¾ƒå’ŒåŒºåˆ«ï¼š</p> <blockquote><ul><li>AVLæ ‘æ˜¯æ›´åŠ ä¸¥æ ¼çš„å¹³è¡¡ï¼Œå› æ­¤å¯ä»¥æä¾›æ›´å¿«çš„æŸ¥æ‰¾é€Ÿåº¦ï¼Œä¸€èˆ¬è¯»å–æŸ¥æ‰¾å¯†é›†å‹ä»»åŠ¡ï¼Œé€‚ç”¨AVLæ ‘ã€‚</li> <li>çº¢é»‘æ ‘æ›´é€‚åˆäºæ’å…¥ä¿®æ”¹å¯†é›†å‹ä»»åŠ¡ã€‚</li> <li>é€šå¸¸ï¼ŒAVLæ ‘çš„æ—‹è½¬æ¯”çº¢é»‘æ ‘çš„æ—‹è½¬æ›´åŠ éš¾ä»¥å¹³è¡¡å’Œè°ƒè¯•ã€‚</li></ul></blockquote> <p><strong>æ€»ç»“ï¼š</strong></p> <blockquote><ul><li>AVLä»¥åŠçº¢é»‘æ ‘æ˜¯é«˜åº¦å¹³è¡¡çš„æ ‘æ•°æ®ç»“æ„ã€‚å®ƒä»¬éå¸¸ç›¸ä¼¼ï¼ŒçœŸæ­£çš„åŒºåˆ«åœ¨äºåœ¨ä»»ä½•æ·»åŠ /åˆ é™¤æ“ä½œæ—¶å®Œæˆçš„æ—‹è½¬æ“ä½œæ¬¡æ•°ã€‚</li> <li>ä¸¤ç§å®ç°éƒ½ç¼©æ”¾ä¸ºa O(lg N)ï¼Œå…¶ä¸­Næ˜¯å¶å­çš„æ•°é‡ï¼Œä½†å®é™…ä¸ŠAVLæ ‘åœ¨æŸ¥æ‰¾å¯†é›†å‹ä»»åŠ¡ä¸Šæ›´å¿«ï¼šåˆ©ç”¨æ›´å¥½çš„å¹³è¡¡ï¼Œæ ‘éå†å¹³å‡æ›´çŸ­ã€‚å¦ä¸€æ–¹é¢ï¼Œæ’å…¥å’Œåˆ é™¤æ–¹é¢ï¼ŒAVLæ ‘é€Ÿåº¦è¾ƒæ…¢ï¼šéœ€è¦æ›´é«˜çš„æ—‹è½¬æ¬¡æ•°æ‰èƒ½åœ¨ä¿®æ”¹æ—¶æ­£ç¡®åœ°é‡æ–°å¹³è¡¡æ•°æ®ç»“æ„ã€‚</li> <li>åœ¨AVLæ ‘ä¸­ï¼Œä»æ ¹åˆ°ä»»ä½•å¶å­çš„æœ€çŸ­è·¯å¾„å’Œæœ€é•¿è·¯å¾„ä¹‹é—´çš„å·®å¼‚æœ€å¤šä¸º1ã€‚åœ¨çº¢é»‘æ ‘ä¸­ï¼Œå·®å¼‚å¯ä»¥æ˜¯2å€ã€‚</li> <li>ä¸¤ä¸ªéƒ½ç»™Oï¼ˆlog nï¼‰æŸ¥æ‰¾ï¼Œä½†å¹³è¡¡AVLæ ‘å¯èƒ½éœ€è¦Oï¼ˆlog nï¼‰æ—‹è½¬ï¼Œè€Œçº¢é»‘æ ‘å°†éœ€è¦æœ€å¤šä¸¤æ¬¡æ—‹è½¬ä½¿å…¶è¾¾åˆ°å¹³è¡¡ï¼ˆå°½ç®¡å¯èƒ½éœ€è¦æ£€æŸ¥Oï¼ˆlog nï¼‰èŠ‚ç‚¹ä»¥ç¡®å®šæ—‹è½¬çš„ä½ç½®ï¼‰ã€‚æ—‹è½¬æœ¬èº«æ˜¯Oï¼ˆ1ï¼‰æ“ä½œï¼Œå› ä¸ºä½ åªæ˜¯ç§»åŠ¨æŒ‡é’ˆã€‚</li></ul></blockquote> <h2 id="_6-map-linkedhashmap"><a href="#_6-map-linkedhashmap" class="header-anchor">#</a> 6. Map | LinkedHashMap</h2> <p>å‚è€ƒ</p> <blockquote><ul><li>https://www.imooc.com/article/22931</li></ul></blockquote> <h2 id="_7-map-concurrenthashmap"><a href="#_7-map-concurrenthashmap" class="header-anchor">#</a> 7. Map | ConcurrentHashMap</h2> <p>å‚è€ƒ</p> <blockquote><ul><li>https://www.cnblogs.com/chengxiao/p/6842045.html</li> <li>https://www.jianshu.com/p/d0b37b927c48</li></ul></blockquote> <p>ConcurrentHashMapæ˜¯Javaå¹¶å‘åŒ…<code>java.util.concurrent</code>ä¸­æä¾›çš„ä¸€ä¸ªçº¿ç¨‹å®‰å…¨ä¸”é«˜æ•ˆçš„HashMapå®ç°ï¼ŒConcurrentHashMapåœ¨å¹¶å‘ç¼–ç¨‹çš„åœºæ™¯ä¸­ä½¿ç”¨é¢‘ç‡éå¸¸ä¹‹é«˜ï¼Œæœ¬æ–‡å°±æ¥åˆ†æä¸‹<code>ConcurrentHashMap</code>çš„å®ç°åŸç†ï¼Œå¹¶å¯¹å…¶å®ç°åŸç†è¿›è¡Œåˆ†æï¼ˆJDK1.7).</p> <p>ä¼—æ‰€å‘¨çŸ¥ï¼Œå“ˆå¸Œè¡¨æ˜¯ä¸­éå¸¸é«˜æ•ˆï¼Œå¤æ‚åº¦ä¸ºO(1)çš„æ•°æ®ç»“æ„ï¼Œåœ¨Javaå¼€å‘ä¸­ï¼Œæˆ‘ä»¬æœ€å¸¸è§åˆ°æœ€é¢‘ç¹ä½¿ç”¨çš„å°±æ˜¯HashMapå’ŒHashTableï¼Œä½†æ˜¯åœ¨çº¿ç¨‹ç«äº‰æ¿€çƒˆçš„å¹¶å‘åœºæ™¯ä¸­ä½¿ç”¨éƒ½ä¸å¤Ÿåˆç†ã€‚</p> <blockquote><ul><li><strong>HashMap</strong> ï¼šå…ˆè¯´HashMapï¼ŒHashMapæ˜¯<strong>çº¿ç¨‹ä¸å®‰å…¨</strong>çš„ï¼Œåœ¨å¹¶å‘ç¯å¢ƒä¸‹ï¼Œå¯èƒ½ä¼šå½¢æˆ<strong>ç¯çŠ¶é“¾è¡¨</strong>ï¼ˆæ‰©å®¹æ—¶å¯èƒ½é€ æˆï¼Œå…·ä½“åŸå› è‡ªè¡Œç™¾åº¦googleæˆ–æŸ¥çœ‹æºç åˆ†æï¼‰ï¼Œå¯¼è‡´getæ“ä½œæ—¶ï¼Œcpuç©ºè½¬ï¼Œæ‰€ä»¥ï¼Œåœ¨å¹¶å‘ç¯å¢ƒä¸­ä½¿ç”¨HashMapæ˜¯éå¸¸å±é™©çš„ã€‚</li> <li><strong>HashTable</strong> ï¼š HashTableå’ŒHashMapçš„å®ç°åŸç†å‡ ä¹ä¸€æ ·ï¼Œå·®åˆ«æ— éæ˜¯<strong>1.HashTableä¸å…è®¸keyå’Œvalueä¸ºnullï¼›2.HashTableæ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚<strong>ä½†æ˜¯HashTableçº¿ç¨‹å®‰å…¨çš„ç­–ç•¥å®ç°ä»£ä»·å´å¤ªå¤§äº†ï¼Œç®€å•ç²—æš´ï¼Œget/putæ‰€æœ‰ç›¸å…³æ“ä½œéƒ½æ˜¯synchronizedçš„ï¼Œè¿™ç›¸å½“äºç»™æ•´ä¸ªå“ˆå¸Œè¡¨åŠ äº†ä¸€æŠŠ</strong>å¤§é”</strong>ï¼Œå¤šçº¿ç¨‹è®¿é—®æ—¶å€™ï¼Œåªè¦æœ‰ä¸€ä¸ªçº¿ç¨‹è®¿é—®æˆ–æ“ä½œè¯¥å¯¹è±¡ï¼Œé‚£å…¶ä»–çº¿ç¨‹åªèƒ½é˜»å¡ï¼Œç›¸å½“äºå°†æ‰€æœ‰çš„æ“ä½œ<strong>ä¸²è¡ŒåŒ–</strong>ï¼Œåœ¨ç«äº‰æ¿€çƒˆçš„å¹¶å‘åœºæ™¯ä¸­æ€§èƒ½å°±ä¼šéå¸¸å·®ã€‚</li></ul></blockquote> <p>HashTableæ€§èƒ½å·®ä¸»è¦æ˜¯ç”±äºæ‰€æœ‰æ“ä½œéœ€è¦ç«äº‰åŒä¸€æŠŠé”ï¼Œè€Œå¦‚æœå®¹å™¨ä¸­æœ‰å¤šæŠŠé”ï¼Œæ¯ä¸€æŠŠé”é”ä¸€æ®µæ•°æ®ï¼Œè¿™æ ·åœ¨å¤šçº¿ç¨‹è®¿é—®æ—¶ä¸åŒæ®µçš„æ•°æ®æ—¶ï¼Œå°±ä¸ä¼šå­˜åœ¨é”ç«äº‰äº†ï¼Œè¿™æ ·ä¾¿å¯ä»¥æœ‰æ•ˆåœ°æé«˜å¹¶å‘æ•ˆç‡ã€‚è¿™å°±æ˜¯ConcurrentHashMapæ‰€é‡‡ç”¨çš„&quot;<strong>åˆ†æ®µé”</strong>&quot;æ€æƒ³ã€‚</p> <p><img src="/assets/img/ConcurrentHashMap_segment_lock.25539e1e.png" alt="ConcurrentHashMapåˆ†æ®µé”"></p> <p>å¦‚ä½•å®ç°çº¿ç¨‹å®‰å…¨</p> <p><img src="/assets/img/The_principle_of_ConcurrentHashMap_thread_safety.ec05e70f.png" alt="ConcurrentHashMapçº¿ç¨‹å®‰å…¨çš„åŸç†"></p> <h2 id="_8-map-åŒºåˆ«"><a href="#_8-map-åŒºåˆ«" class="header-anchor">#</a> 8. Map | åŒºåˆ«</h2> <h3 id="hashmapä¸hashtableåŒºåˆ«"><a href="#hashmapä¸hashtableåŒºåˆ«" class="header-anchor">#</a> HashMapä¸HashtableåŒºåˆ«</h3> <blockquote><ol><li><strong>çº¿ç¨‹æ˜¯å¦å®‰å…¨</strong>ï¼š HashMap æ˜¯â¾®çº¿ç¨‹å®‰å…¨çš„ï¼ŒHashTable æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼›HashTable å†…éƒ¨çš„â½…æ³• åŸºæœ¬éƒ½ç»è¿‡ synchronized ä¿®é¥°ã€‚ï¼ˆå¦‚æœä½ è¦ä¿è¯çº¿ç¨‹å®‰å…¨çš„è¯å°±ä½¿â½¤ ConcurrentHashMap å§ï¼ï¼‰ï¼›</li> <li><strong>æ•ˆç‡</strong>ï¼š å› ä¸ºçº¿ç¨‹å®‰å…¨çš„é—®é¢˜ï¼ŒHashMap è¦â½ HashTable æ•ˆç‡â¾¼â¼€ç‚¹ã€‚å¦å¤–ï¼ŒHashTable åŸºæœ¬è¢« æ·˜æ±°ï¼Œä¸è¦åœ¨ä»£ç ä¸­ä½¿â½¤å®ƒï¼›</li> <li><strong>å¯¹Null key å’ŒNull valueçš„â½€æŒ</strong>ï¼š HashMap ä¸­ï¼Œnull å¯ä»¥ä½œä¸ºé”®ï¼Œè¿™æ ·çš„é”®åªæœ‰â¼€ä¸ªï¼Œå¯ä»¥ æœ‰â¼€ä¸ªæˆ–å¤šä¸ªé”®æ‰€å¯¹åº”çš„å€¼ä¸º nullã€‚ã€‚ä½†æ˜¯åœ¨ HashTable ä¸­ put è¿›çš„é”®å€¼åªè¦æœ‰â¼€ä¸ª nullï¼Œ ç›´æ¥æŠ›å‡º NullPointerExceptionã€‚</li> <li><strong>åˆå§‹å®¹é‡â¼¤â¼©å’Œæ¯æ¬¡æ‰©å……å®¹é‡â¼¤â¼©çš„ä¸åŒ</strong> ï¼š â‘ åˆ›å»ºæ—¶å¦‚æœä¸æŒ‡å®šå®¹é‡åˆå§‹å€¼ï¼ŒHashtable é»˜è®¤ çš„åˆå§‹â¼¤â¼©ä¸º11ï¼Œä¹‹åæ¯æ¬¡æ‰©å……ï¼Œå®¹é‡å˜ä¸ºåŸæ¥çš„2n+1ã€‚HashMap é»˜è®¤çš„åˆå§‹åŒ–â¼¤â¼©ä¸º16ã€‚ä¹‹å æ¯æ¬¡æ‰©å……ï¼Œå®¹é‡å˜ä¸ºåŸæ¥çš„2å€ã€‚â‘¡åˆ›å»ºæ—¶å¦‚æœç»™å®šäº†å®¹é‡åˆå§‹å€¼ï¼Œé‚£ä¹ˆ Hashtable ä¼šç›´æ¥ä½¿â½¤ ä½ ç»™å®šçš„â¼¤â¼©ï¼Œâ½½ HashMap ä¼šå°†å…¶æ‰©å……ä¸º2çš„å¹‚æ¬¡â½…â¼¤â¼©ï¼ˆHashMap ä¸­çš„ tableSizeFor() â½… æ³•ä¿è¯ï¼Œä¸‹â¾¯ç»™å‡ºäº†æºä»£ç ï¼‰ã€‚ä¹Ÿå°±æ˜¯è¯´ HashMap æ€»æ˜¯ä½¿â½¤2çš„å¹‚ä½œä¸ºå“ˆå¸Œè¡¨çš„â¼¤â¼©,åâ¾¯ä¼šä»‹ ç»åˆ°ä¸ºä»€ä¹ˆæ˜¯2çš„å¹‚æ¬¡â½…ã€‚</li> <li>åº•å±‚æ•°æ®ç»“æ„ï¼š JDK1.8 ä»¥åçš„ HashMap åœ¨è§£å†³å“ˆå¸Œå†²çªæ—¶æœ‰äº†å·¨â¼¤çš„å˜åŒ–ï¼Œå½“é“¾è¡¨â»“åº¦â¼¤äº é˜ˆå€¼ï¼ˆé»˜è®¤ä¸º8ï¼‰æ—¶ï¼Œå°†é“¾è¡¨è½¬åŒ–ä¸ºçº¢â¿Šæ ‘ï¼Œä»¥å‡å°‘æœç´¢æ—¶é—´ã€‚Hashtable æ²¡æœ‰è¿™æ ·çš„æœºåˆ¶ã€‚</li></ol></blockquote> <h3 id="concurrenthashmap-å’Œ-hashtable-çš„åŒºåˆ«"><a href="#concurrenthashmap-å’Œ-hashtable-çš„åŒºåˆ«" class="header-anchor">#</a> ConcurrentHashMap å’Œ Hashtable çš„åŒºåˆ«</h3> <p>ConcurrentHashMap å’Œ Hashtable çš„åŒºåˆ«ä¸»è¦ä½“ç°åœ¨å®ç°çº¿ç¨‹å®‰å…¨çš„â½…å¼ä¸Šä¸åŒã€‚</p> <blockquote><ul><li>åº•å±‚æ•°æ®ç»“æ„ï¼š JDK1.7çš„ ConcurrentHashMap åº•å±‚é‡‡â½¤ åˆ†æ®µçš„æ•°ç»„+é“¾è¡¨ å®ç°ï¼ŒJDK1.8 é‡‡â½¤ çš„æ•°æ®ç»“æ„è·ŸHashMap1.8çš„ç»“æ„â¼€æ ·ï¼Œæ•°ç»„+é“¾è¡¨/çº¢â¿Šâ¼†å‰æ ‘ã€‚Hashtable å’Œ JDK1.8 ä¹‹å‰çš„ HashMap çš„åº•å±‚æ•°æ®ç»“æ„ç±»ä¼¼éƒ½æ˜¯é‡‡â½¤ æ•°ç»„+é“¾è¡¨ çš„å½¢å¼ï¼Œæ•°ç»„æ˜¯ HashMap çš„ä¸»ä½“ï¼Œé“¾è¡¨åˆ™æ˜¯ ä¸»è¦ä¸ºäº†è§£å†³å“ˆå¸Œå†²çªâ½½å­˜åœ¨çš„ï¼›</li> <li>å®ç°çº¿ç¨‹å®‰å…¨çš„â½…å¼ï¼ˆé‡è¦ï¼‰ï¼š â‘  åœ¨JDK1.7çš„æ—¶å€™ï¼ŒConcurrentHashMapï¼ˆåˆ†æ®µé”ï¼‰ å¯¹æ•´ä¸ªæ¡¶ æ•°ç»„è¿›â¾äº†åˆ†å‰²åˆ†æ®µ(Segment)ï¼Œæ¯â¼€æŠŠé”åªé”å®¹å™¨å…¶ä¸­â¼€éƒ¨åˆ†æ•°æ®ï¼Œå¤šçº¿ç¨‹è®¿é—®å®¹å™¨â¾¥ä¸åŒæ•° æ®æ®µçš„æ•°æ®ï¼Œå°±ä¸ä¼šå­˜åœ¨é”ç«äº‰ï¼Œæâ¾¼å¹¶å‘è®¿é—®ç‡ã€‚ åˆ°äº† JDK1.8 çš„æ—¶å€™å·²ç»æ‘’å¼ƒäº†Segmentçš„ æ¦‚å¿µï¼Œâ½½æ˜¯ç›´æ¥â½¤ Node æ•°ç»„+é“¾è¡¨+çº¢â¿Šæ ‘çš„æ•°æ®ç»“æ„æ¥å®ç°ï¼Œå¹¶å‘æ§åˆ¶ä½¿â½¤ synchronized å’Œ CAS æ¥æ“ä½œã€‚ï¼ˆJDK1.6ä»¥å å¯¹ synchronizedé”åšäº†å¾ˆå¤šä¼˜åŒ–ï¼‰ æ•´ä¸ªçœ‹èµ·æ¥å°±åƒæ˜¯ä¼˜åŒ–è¿‡ä¸”çº¿ ç¨‹å®‰å…¨çš„ HashMapï¼Œè™½ç„¶åœ¨JDK1.8ä¸­è¿˜èƒ½çœ‹åˆ° Segment çš„æ•°æ®ç»“æ„ï¼Œä½†æ˜¯å·²ç»ç®€åŒ–äº†å±æ€§ï¼Œåª æ˜¯ä¸ºäº†å…¼å®¹æ—§ç‰ˆæœ¬ï¼›â‘¡ Hashtable(åŒâ¼€æŠŠé”) :ä½¿â½¤ synchronized æ¥ä¿è¯çº¿ç¨‹å®‰å…¨ï¼Œæ•ˆç‡â¾®å¸¸ ä½ä¸‹ã€‚å½“â¼€ä¸ªçº¿ç¨‹è®¿é—®åŒæ­¥â½…æ³•æ—¶ï¼Œå…¶ä»–çº¿ç¨‹ä¹Ÿè®¿é—®åŒæ­¥â½…æ³•ï¼Œå¯èƒ½ä¼šè¿›â¼Šé˜»å¡æˆ–è½®è¯¢çŠ¶æ€ï¼Œå¦‚ ä½¿â½¤ put æ·»åŠ å…ƒç´ ï¼Œå¦â¼€ä¸ªçº¿ç¨‹ä¸èƒ½ä½¿â½¤ put æ·»åŠ å…ƒç´ ï¼Œä¹Ÿä¸èƒ½ä½¿â½¤ getï¼Œç«äº‰ä¼šè¶Šæ¥è¶Šæ¿€çƒˆ æ•ˆç‡è¶Šä½ã€‚</li></ul></blockquote></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/LifeAlsoIsGG/edit/master/Java/Java-Collections.md" target="_blank" rel="noopener noreferrer">åœ¨ GitHub ä¸Šç¼–è¾‘æ­¤é¡µ</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">ä¸Šæ¬¡ç¼–è¾‘äº:</span> <span class="time">2021å¹´3æœˆ1æ—¥ 16:06</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev"><a href="/Java/Java-Methods/" class="prev"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon prev-icon"><path d="M906.783 588.79c-.02 8.499-6.882 15.36-15.38 15.37l-443.7-.01 75.704 191.682c2.52 6.42.482 13.763-5.038 17.91-5.52 4.168-13.138 4.147-18.616-.092L123.228 524.175a15.362 15.362 0 01-6-12.165c0-4.782 2.222-9.277 6-12.185L499.753 210.35a15.388 15.388 0 019.38-3.195c3.236 0 6.502 1.034 9.236 3.103 5.52 4.147 7.578 11.49 5.038 17.91L447.683 419.84l443.72-.01c8.498.01 15.36 6.881 15.36 15.36l.02 153.6z" fill="currentColor"></path></svg>
        Java-å¸¸ç”¨æ–¹æ³•æ±‡æ€»
      </a></span> <span class="next"><a href="/Java/Java-Multithreading/">
        Java-å¤šçº¿ç¨‹å¹¶å‘
        <svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon next-icon"><path d="M906.772 512c0 4.772-2.211 9.267-5.99 12.175L524.257 813.66a15.37 15.37 0 01-18.616.092 15.368 15.368 0 01-5.038-17.91l75.714-191.672h-443.73c-8.488 0-15.36-6.881-15.36-15.36v-153.6c0-8.489 6.872-15.36 15.36-15.36h443.73l-75.714-191.682a15.358 15.358 0 015.048-17.91c5.51-4.158 13.128-4.137 18.606.092l376.525 289.485a15.323 15.323 0 015.99 12.165z" fill="currentColor"></path></svg></a></span></p></div> <div class="comments-wrapper"><div class="valine-wrapper"><div id="valine"></div></div></div> </main> <footer class="footer-wrapper"><div class="media-links-wrapper"><a href="https://github.com/LifeAlsoIsGG" rel="noopener noreferrer" target="_blank" aria-label="Github" data-balloon-pos="up" class="media-link"><span class="sr-only">Github</span> <svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon icon-github"><path d="M544.06 959.267h-64.95c-228.633 0-415.697-187.064-415.697-415.698V478.62c0-228.633 187.064-415.697 415.698-415.697h64.949c228.633 0 415.697 187.064 415.697 415.697v64.95c0 228.633-187.065 415.697-415.697 415.697z" fill="#171515"></path> <path d="M510.25 263.81c-136.001 0-246.287 110.273-246.287 246.317 0 108.81 70.566 201.128 168.45 233.701 12.315 2.259 16.81-5.345 16.81-11.872 0-5.847-.212-21.337-.332-41.891-68.514 14.884-82.97-33.017-82.97-33.017-11.199-28.454-27.347-36.029-27.347-36.029-22.362-15.282 1.692-14.972 1.692-14.972 24.717 1.742 37.727 25.382 37.727 25.382 21.971 37.64 57.646 26.77 71.681 20.465 2.238-15.917 8.6-26.77 15.638-32.927-54.693-6.216-112.191-27.347-112.191-121.73 0-26.889 9.597-48.876 25.352-66.093-2.533-6.232-10.985-31.274 2.414-65.184 0 0 20.68-6.622 67.731 25.25 19.647-5.464 40.716-8.196 61.663-8.291 20.916.095 41.987 2.828 61.662 8.29 47.023-31.872 67.665-25.249 67.665-25.249 13.437 33.91 4.983 58.952 2.451 65.184 15.785 17.217 25.318 39.203 25.318 66.093 0 94.62-57.588 115.44-112.458 121.538 8.845 7.604 16.721 22.637 16.721 45.612 0 32.927-.302 59.493-.302 67.568 0 6.587 4.437 14.25 16.936 11.843 97.788-32.634 168.295-124.89 168.295-233.672 0-136.043-110.287-246.316-246.319-246.316z" fill="#FFF"></path></svg></a><a href="https://twitter.com/LifeAlsoIsGG" rel="noopener noreferrer" target="_blank" aria-label="Twitter" data-balloon-pos="up" class="media-link"><span class="sr-only">Twitter</span> <svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon icon-twitter"><path d="M544.06 959.267h-64.95c-228.633 0-415.697-187.064-415.697-415.698V478.62c0-228.633 187.064-415.697 415.698-415.697h64.949c228.633 0 415.697 187.064 415.697 415.697v64.95c0 228.633-187.065 415.697-415.697 415.697z" fill="#5EAADE"></path> <path d="M749.737 364.631c-17.594 7.805-36.513 13.088-56.371 15.459 20.269-12.148 35.836-31.387 43.156-54.312A196.233 196.233 0 01674.2 349.6c-17.894-19.083-43.406-30.997-71.636-30.997-54.2 0-98.137 43.944-98.137 98.157 0 7.695.861 15.19 2.544 22.373-81.57-4.092-153.876-43.174-202.284-102.558-8.443 14.498-13.285 31.356-13.285 49.348 0 34.05 17.326 64.096 43.656 81.697a97.69 97.69 0 01-44.447-12.277c-.01.41-.01.82-.01 1.24 0 47.558 33.822 87.23 78.72 96.249a98.285 98.285 0 01-25.852 3.448 97.491 97.491 0 01-18.465-1.768c12.483 39.002 48.725 67.38 91.672 68.17-33.582 26.334-75.897 42.024-121.884 42.024-7.924 0-15.736-.46-23.408-1.37 43.434 27.844 95.014 44.104 150.443 44.104 180.505 0 279.221-149.576 279.221-279.294 0-4.263-.09-8.494-.278-12.708 19.178-13.835 35.813-31.115 48.967-50.807z" fill="#FFF"></path></svg></a><a href="http://localhost:8083/blog-vuepress/tencent:/AddContact/?fromId=50&amp;fromSubId=1&amp;subcmd=all&amp;uin=1138312802.html" rel="noopener noreferrer" target="_blank" aria-label="QQ" data-balloon-pos="up" class="media-link"><span class="sr-only">QQ</span> <svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon icon-qq"><path d="M544.06 959.267h-64.95c-228.633 0-415.697-187.064-415.697-415.698V478.62c0-228.633 187.064-415.697 415.698-415.697h64.949c228.633 0 415.697 187.064 415.697 415.697v64.95c0 228.633-187.065 415.697-415.697 415.697z" fill="#5EAADE"></path> <path d="M729.46 627.3c-3.157-39.628-24.045-83.747-32.624-105.91l-22.084-57.047c-.702-23.73 6.312-78.322-30.511-146.61s-110.82-74.446-124.497-75.147c-13.677-.701-99.248-1.403-141.331 72.945-42.084 74.347-30.745 148.812-30.745 148.812l-23.523 57.478c-.001.002-10.962 26.223-20.43 58.135-9.469 31.914-18.938 82.064-9.469 92.234 9.47 10.17 43.837-46.643 46.993-51.903 0 0 2.456 27.18 8.943 41.383l.81 1.776.33.723.38.826.3.652.444.96.203.436a281.465 281.465 0 001.917 4.025l.189.386c.231.473.468.953.711 1.442l.146.292c6.886 13.807 18.61 33.823 37.443 50.42l.018.016-1.184.387c-10.667 3.516-31.694 11.21-40.625 19.82-1.717 1.655-2.987 3.344-3.65 5.045-5.376 13.794 4.208 15.43 20.575 16.366 16.366.934 94.923 3.04 132.564-2.221.407-.056.787-.114 1.17-.171 2.711.094 5.324.142 7.83.16l.151.002c.836.005 1.663.008 2.475.008.496 0 1.015-.002 1.542-.006l.21-.001a222.593 222.593 0 005.462-.107c.26.038.508.076.778.114 37.642 5.26 116.198 3.156 132.564 2.22 16.366-.934 25.951-2.571 20.574-16.365-4.302-11.037-34.175-21.62-45.956-25.413a141.388 141.388 0 007.958-7.645l.237-.245a142.494 142.494 0 002.53-2.702c42.435-46.643 38.928-76.101 40.682-92.935 0 0 35.775 51.553 43.488 53.306 7.713 1.754 10.169-6.31 7.012-45.94z" fill="#FFF"></path></svg></a></div> <div class="footer">ç²¤ICPå¤‡19126168å·</div> <div class="copyright">Copyright Â© 2020 LifeAlsoIsGG</div></footer></div><div class="global-ui"><!----><!----><div id="pwa-install"><!----> <div id="install-modal-wrapper" style="display:none;"><div class="background"></div> <div class="install-modal"><div class="header"><button aria-label="Close" class="close-button"><svg width="23" height="22" xmlns="http://www.w3.org/2000/svg" class="icon close-icon"><path fill-rule="evenodd" clip-rule="evenodd" d="M1.12.358a1.224 1.224 0 011.729 0l8.92 8.914L20.686.358a1.224 1.224 0 011.73 1.728L13.497 11l8.92 8.913a1.222 1.222 0 11-1.73 1.729l-8.919-8.913-8.92 8.913a1.224 1.224 0 01-1.729-1.729L10.04 11l-8.92-8.914a1.222 1.222 0 010-1.728z" fill="currentColor"></path></svg></button> <div class="logo"><!----> <div class="title"><h1></h1> <p class="desc">è¯¥åº”ç”¨å¯ä»¥å®‰è£…åœ¨æ‚¨çš„ PC æˆ–ç§»åŠ¨è®¾å¤‡ä¸Šã€‚è¿™å°†ä½¿è¯¥ Web åº”ç”¨ç¨‹åºå¤–è§‚å’Œè¡Œä¸ºä¸å…¶ä»–åº”ç”¨ç¨‹åºç›¸åŒã€‚å®ƒå°†åœ¨å‡ºç°åœ¨åº”ç”¨ç¨‹åºåˆ—è¡¨ä¸­ï¼Œå¹¶å¯ä»¥å›ºå®šåˆ°ä¸»å±å¹•ï¼Œå¼€å§‹èœå•æˆ–ä»»åŠ¡æ ã€‚æ­¤ Web åº”ç”¨ç¨‹åºè¿˜å°†èƒ½å¤Ÿä¸å…¶ä»–åº”ç”¨ç¨‹åºå’Œæ‚¨çš„æ“ä½œç³»ç»Ÿå®‰å…¨åœ°è¿›è¡Œäº¤äº’ã€‚</p></div></div></div> <div class="content"><div class="highlight"><!----> <!----></div> <div class="description"><h3>è¯¦æƒ…</h3> <p></p></div></div> <div class="button-wrapper"><button class="install-button">
        å®‰è£… <span></span></button> <button class="cancel-button">
        å–æ¶ˆ
      </button></div></div></div></div><div tabindex="-1" role="dialog" aria-hidden="true" class="pswp"><div class="pswp__bg"></div> <div class="pswp__scroll-wrap"><div class="pswp__container"><div class="pswp__item"></div> <div class="pswp__item"></div> <div class="pswp__item"></div></div> <div class="pswp__ui pswp__ui--hidden"><div class="pswp__top-bar"><div class="pswp__counter"></div> <button title="Close (Esc)" class="pswp__button pswp__button--close"></button> <button title="Share" class="pswp__button pswp__button--share"></button> <button title="Toggle fullscreen" class="pswp__button pswp__button--fs"></button> <button title="Zoom in/out" class="pswp__button pswp__button--zoom"></button> <div class="pswp__preloader"><div class="pswp__preloader__icn"><div class="pswp__preloader__cut"><div class="pswp__preloader__donut"></div></div></div></div></div> <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class="pswp__share-tooltip"></div></div> <button title="Previous (arrow left)" class="pswp__button pswp__button--arrow--left"></button> <button title="Next (arrow right)" class="pswp__button pswp__button--arrow--right"></button> <div class="pswp__caption"><div class="pswp__caption__center"></div></div></div></div></div></div></div>
    <script src="/assets/js/app.37d24613.js" defer></script><script src="/assets/js/layout-Layout.91119c09.js" defer></script><script src="/assets/js/vendors~layout-Blog~layout-Layout~layout-NotFound.397a85cd.js" defer></script><script src="/assets/js/vendors~layout-Blog~layout-Layout~layout-NotFound~layout-Slide.5d1fa701.js" defer></script><script src="/assets/js/vendors~layout-Blog~layout-Layout.d3f55ab1.js" defer></script><script src="/assets/js/page-Java-é›†åˆå®¹å™¨--b6c81274.adbc525f.js" defer></script>
  </body>
</html>
